<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="google-site-verification" content="9qs7VjxtSrYMqw5OElxCdKv_gnssSRi6acB2iYlZnGA" />

    
    
    <meta property="og:title" content="To Be Decided">
    <meta property="og:url" content="https://www.kaitoy.xyz">
    <link rel="canonical" href="https://www.kaitoy.xyz">
    
    <meta property="og:site_name" content="To Be Decided">

    <title>
      
      kubernetes | To Be Decided
      
    </title>

    
    <link rel="shortcut icon" href="https://www.kaitoy.xyz/assets/favicon.ico">

    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.kaitoy.xyz/index.xml">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Marcellus+SC" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/zenburn.min.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/styles.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/custom.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/table.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/jquery.bxslider.css" rel="stylesheet" />

    
    

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-6244473643910448",
        enable_page_level_ads: true
      });
    </script>

    
  </head>
  <body>

    <header id="site-header">
      <div class="container">
        <h1 class="text-center">
          <a href="https://www.kaitoy.xyz" class="font-logo">To Be Decided</a>
        </h1>
      </div>
    </header>

    <main id="site-body">
      <div class="container">


<div class="row">
  <div class="col-md-9">
    <div id="posts">
      <div class="row">
        
        
        
        <div class="col-sm-6">
          <article>
            <a href="https://www.kaitoy.xyz/2018/04/01/hello-skaffold/" class="post post-topix">
              <header class="eyecatch text-center">
                <img src="/images/kubernetes.png" alt="eyecatch">
              </header>
              <div class="date text-center">
                <span>Sun, Apr 1, 2018</span>
              </div>
              <h2 class="title">Skaffoldã‚’è§¦ã£ã¦ã¿ãŸ</h2>
              <div class="summary">
                Skaffoldã‚’è©¦ã—ã¦ã¿ãŸè©±ã€‚ (adsbygoogle = window.adsbygoogle || []).push({}); Skaffoldã¨ã¯ GoogleãŒé–‹ç™ºã—ã¦ã„ã‚‹ã€Kubernetesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿«é©ã«é–‹ç™ºã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã€‚ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–ã—ã€å¤‰æ›´ãŒå…¥ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã€‚ 2018/3/16ã«ç™ºè¡¨ã•ã‚ŒãŸæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã€è§¦ã£ãŸæ„Ÿã˜ã§ã¯ã¾ã ã“ã‚Œã‹ã‚‰ã¨ã„ã£ãŸæ„Ÿã˜ã ã£ãŸã€‚ Goã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€Linuxã€OS Xã€Windowsç”¨ã®ãƒã‚¤ãƒŠãƒªãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã€‚ Windowsç‰ˆã‚’è©¦ã™ è‡ªPCãŒWindowsãªã®ã§Windowsç‰ˆã‚’è©¦ã™ã€‚ ä¼šç¤¾ã§ä½¿ã£ã¦ã‚‹ã®ã‚‚Windowsã ã—ã€‚ Skaffoldã‚’ä½¿ã†ã«ã¯ã€Skaffoldã®å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã€ãã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã«è¨­å®šã—ãŸkubectlã€DockerãŒå¿…è¦ã€‚ ã¾ãšWindowsç‰ˆSkaffoldã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ GitHubã®ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸ã‹ã‚‰Windowsãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€skaffold.exeã«ãƒªãƒãƒ¼ãƒ ã—ã¦PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã ã‘ã€‚ Skaffoldã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.3.0ã€‚ Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€Windows 10 Homeä¸Šã«minikube 0.22.2ã§ä½œã£ãŸKubernetes 1.7.0ã®ã‚¯ãƒ©ã‚¹ã‚¿ã€‚ minikubeã¯ä»¥å‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã‚’ä½¿ã†ã€‚ minikubeã‚’èµ·å‹•ã€‚ &gt; minikube start --kubernetes-version v1.7.0 kubectlã‚‚minikubeã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚ Dockerã«ã¤ã„ã¦ã¯ã€ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯minikubeä¸Šã®ã‚’ä½¿ãˆã°ã„ã„ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(Docker Client)ã¯skaffoldã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã®ã§Windowsä¸Šã«ãªã„ã¨ã ã‚ã¯ãªãšã€‚ Windowsã§Dockerã¨è¨€ãˆã°ä»Šãªã‚‰Docker for Windowsã ã‘ã©ã€ã“ã‚Œã¯Windows 10 Proã˜ã‚ƒãªã„ã¨ä½¿ãˆãªã‹ã£ãŸã¯ãšãªã®ã§ã€Docker Toolboxã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã„ã‚ŒãŸã€‚ ã“ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã¦ã‚‹ã®ã§ã€minikubeã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã•ã›ã‚‹ã€‚ ãã®ãŸã‚ã®è¨­å®šã¯minikubeã®ã‚³ãƒãƒ³ãƒ‰ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚ &gt;minikube docker-env SET DOCKER_TLS_VERIFY=1 SET DOCKER_HOST=tcp://192.168.99.100:2376 SET DOCKER_CERT_PATH=C:\Users\kaitoy\.minikube\certs SET DOCKER_API_VERSION=1.23 REM Run this command to configure your shell: REM @FOR /f &quot;tokens=*&quot; %i IN ('minikube docker-env') DO @%i ã“ã‚Œã«å¾“ã£ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®šå®Œäº†ã€‚ &gt; @FOR /f &quot;tokens=*&quot; %i IN ('minikube docker-env') DO @%i ã“ã‚Œã§æº–å‚™å®Œäº†ã€‚ Skaffoldã®Getting Startedã‚’ã‚„ã£ã¦ã¿ã‚‹ã€‚ Skaffoldã®ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–‹ã„ã¦ã€examples/getting-startedã«cdã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚ &gt; skaffold dev ã‚¨ãƒ©ãƒ¼ã§çµ‚ã‚ã£ãŸã€‚ [31mERRO[0m[0047] run: running skaffold steps: starting watch on file C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: adding watch for C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: The parameter is incorrect.
              </div>
            </a>
          </article>
        </div>
        
        
        
        
        
        <div class="col-sm-6">
          <article>
            <a href="https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/" class="post post-topix">
              <header class="eyecatch text-center">
                <img src="/images/kubernetes.png" alt="eyecatch">
              </header>
              <div class="date text-center">
                <span>Tue, Oct 31, 2017</span>
              </div>
              <h2 class="title">Kubernetes 1.8ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦ã€‚ã‚ã¨Dashboardã€‚</h2>
              <div class="summary">
                ã€ŒKubernetes1.8ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚kubeadmã§ã€‚ã€ã§ã€DashboardãŒã†ã¾ãå‹•ã‹ãªã„å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚“ã ã‘ã©ã€ãã‚Œã‚’è§£æ±ºã—ãŸè©±ã€‚ (adsbygoogle = window.adsbygoogle || []).push({}); å•é¡Œã®ç¾è±¡ kubeadmã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã§ã€è‡ªå‰ã®ã‚¢ãƒ—ãƒª(Goslings)ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã¯ã†ã¾ãã§ããŸã‚“ã ã‘ã©ã€Dashboardã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚‰å‹•ã‹ãšã€Web UIã«kubectl proxyçµŒç”±ã§ã¤ãªã„ã§ã‚‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã—ã¾ã£ãŸã€‚ å¯¾ç­– ãªã‚“ã¨ãªãã€ã‚¯ãƒ©ã‚¹ã‚¿å†…éƒ¨ã§ã®åå‰è§£æ±ºã«ã¯kube-dnsã«ã‚ˆã‚‹DNSã‚µãƒ¼ãƒ“ã‚¹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã£ã½ã„ã®ã§ã€/etc/hostsã«ä½™è¨ˆãªäº‹æ›¸ã„ãŸã®ãŒã„ã‘ãªã‹ã£ãŸã¨æ€ã£ãŸã€‚ ã®ã§ã€/etc/hostsã‹ã‚‰k8s-masterã¨k8s-nodeã®ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€kubeadm initã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ã¿ãŸã€‚ çµæœ ã—ãŸã‚‰ã¡ã‚ƒã‚“ã¨å‹•ã„ãŸã€‚ VMã®ãƒ›ã‚¹ãƒˆã§kubectl proxyã—ã¦ã€ C:\Users\kaitoy\Desktop&gt;kubectl proxy Starting to serve on 127.0.0.1:8001 http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¤ãªã„ã ã‚‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚ Dashboardã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³å‡¦ç†ã¯Kubernetes(ã¨ã„ã†ã‹kube-apiserver)ã®ãã‚Œã«ç§»è­²ã—ã¦ã„ã‚‹ã€‚ Dashboardã¯ãã“ã§èªè¨¼ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ã§ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€æƒ…å ±ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹ã€‚å¤šåˆ†ã€‚ Dashboardã¸ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ãŒã€ãã‚Œã‚‰ã‚’ç†è§£ã™ã‚‹ã«ã¯Kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦å­¦ã¶ã“ã¨ã‚’æ¨å¥¨ã¨ã‚ã£ãŸã®ã§ã¡ã‚‡ã£ã¨Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã ã€‚ Kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯kube-apiserverã§ã‚ã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚‚kube-apiserverãŒã‚„ã‚‹ã€‚ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨kube-apiserverã¨ã®TLSã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒç¢ºç«‹ã—ãŸå¾Œã€HTTPå±¤ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’ã™ã‚‹ã‚“ã ã‘ã©ã€ãã®å‡¦ç†ã¯Authentication(èªè¨¼)ã€Authorization(èªå¯)ã€Admission(è¨±å¯)ã®ä¸‰æ®µéšã‹ã‚‰ãªã‚‹ã€‚ Authentication ç¬¬ä¸€æ®µéšãŒAuthenticationã€‚ ã“ã“ã§ã¯ã€kube-apiserverã«ä»•è¾¼ã¾ã‚ŒãŸAuthenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ¦ãƒ¼ã‚¶èªè¨¼ã‚’ã™ã‚‹ã€‚ KubernetesãŒèªè¨¼ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã«ã¯ã€KubernetesãŒç®¡ç†ã™ã‚‹Service Accountã¨ã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–éƒ¨ã§ç®¡ç†ã•ã‚Œã‚‹é€šå¸¸ãƒ¦ãƒ¼ã‚¶ã®äºŒé€šã‚ŠãŒã‚ã‚‹ã€‚ Service Accountã¯PodãŒkube-apiserverã¨è©±ã™ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ã§ã€é€šå¸¸ãƒ¦ãƒ¼ã‚¶ã¯ä¸»ã«äººãŒkubectlã¨ã‹ã§kube-apiserverã¨è©±ã™ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ã€‚(åŒ¿åã§è©±ã™ã“ã¨ã‚‚ã§ãã‚‹ã€‚) å‰è€…ã¯ServiceAccountã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å®šç¾©ã•ã‚Œã‚‹ã‘ã©ã€å¾Œè€…ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãªã„ã€‚ ServiceAccountã¯Namespaceã¨é–¢é€£ä»˜ã(ã¤ã¾ã‚Šnamespaceæ¯ã«ãƒ¦ãƒ‹ãƒ¼ã‚¯)ã€Secretã«ç´ã¥ãã€‚ Secretã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã®ã‚»ãƒƒãƒˆã‚’å®šç¾©ã—ã€Podã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã€‚ ServiceAccountã¨Secretã¯ã€ãµã¤ã†ã¯è‡ªå‹•ã§ä½œã‚‰ã‚Œã€Podã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã€‚ kube-apiserverã«ã¯ä¸€ã¤ä»¥ä¸Šã®Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã¦ã€ã©ã‚Œã‹ã§èªè¨¼ã§ãã‚Œã°æ¬¡ã®æ®µéšã«é€²ã‚ã‚‹ã€‚ èªè¨¼å¤±æ•—ã™ã‚‹ã¨HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰401ãŒè¿”ã‚‹ã€‚ Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸: X.509ã®ãƒ‡ã‚£ã‚¸ã‚¿ãƒ«è¨¼æ˜æ›¸ã‚’ä½¿ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«--client-ca-fileã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚è¨¼æ˜æ›¸ã®Common NameãŒãƒ¦ãƒ¼ã‚¶åã«ãªã‚Šã€OrganizationãŒã‚°ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãã®è¨¼æ˜æ›¸ã¨å¯¾å¿œã™ã‚‹ç§˜å¯†éµã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚ Bearer Token: ç„¡è¨˜åãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«--token-auth-fileã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ã¯CSVã§ã€ã€Œtoken,user,uid,&quot;group1,group2,group3&quot;ã€ã¨ã„ã†å½¢å¼ã§æ›¸ãã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³æ–‡å­—åˆ—ã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚ ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼: ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§èªè¨¼ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«--basic-auth-fileã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚ã“ã®ãƒªã‚¹ãƒˆã¯CSVã§ã€ã€Œpassword,user,uid,&quot;group1,group2,group3&quot;ã€ã¨ã„ã†å½¢å¼ã§æ›¸ãã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ™‚ã¯Authorizationãƒ˜ãƒƒãƒ€ãŒä½¿ãˆã‚‹ã€‚ Service Account Token: Service Accountã‚’ç½²åä»˜ãBearer Tokenã§èªè¨¼ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ãªã‚‹ã€‚ ã“ã®ã‚ãŸã‚Šã€Qiitaã®ã€ŒkubernetesãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹èªè¨¼æ–¹æ³•ã®å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‹•ã‹ã™ã€ã¨ã„ã†è¨˜äº‹ã‚’ã¿ã‚‹ã¨ç†è§£ãŒæ·±ã¾ã‚‹ã€‚ Authorization Authenticationã‚’ãƒ‘ã‚¹ã™ã‚‹ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶(ã¨ã‚°ãƒ«ãƒ¼ãƒ—)ãŒèªè¨¼ã•ã‚Œã€ç¬¬äºŒæ®µéšã®Authorizationãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡¦ç†ã«ç§»ã‚‹ã€‚ ã“ã“ã§ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹(æ“ä½œå¯¾è±¡ã€æ“ä½œç¨®åˆ¥(ãƒ¡ã‚½ãƒƒãƒ‰)ç­‰)ã‚’è¦‹ã¦ã€ãã‚ŒãŒãƒ¦ãƒ¼ã‚¶ã«è¨±ã•ã‚ŒãŸã‚‚ã®ãªã‚‰èªå¯ã™ã‚‹ã€‚ ä½•ã‚’è¨±ã™ã‹ã¯äº‹å‰ã«ã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã—ã¦ãŠãã€‚ kube-apiserverèµ·å‹•æ™‚ã«--authorization-modeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¸€ã¤ä»¥ä¸Šã®Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¦ã€ã©ã‚Œã‹ã§èªå¯ã•ã‚Œã‚Œã°æ¬¡ã®æ®µéšã«é€²ã‚ã‚‹ã€‚ ã•ã‚‚ãªãã°HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰403ãŒè¿”ã‚‹ã€‚ Authorizationãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚ Node: kubeletã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’èªå¯ã™ã‚‹ã€‚
              </div>
            </a>
          </article>
        </div>
        
        
        
        
        
        <div class="col-sm-6">
          <article>
            <a href="https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/" class="post post-topix">
              <header class="eyecatch text-center">
                <img src="/images/kubernetes.png" alt="eyecatch">
              </header>
              <div class="date text-center">
                <span>Sat, Oct 21, 2017</span>
              </div>
              <h2 class="title">Kubernetes1.8ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚kubeadmã§ã€‚</h2>
              <div class="summary">
                ã€ŒKubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹ã€ã§Minikubeã‚’ã‚„ã£ãŸã‚“ã ã‘ã©ã€ã‚‚ã†ä¸€æ­©ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã¹ãã€kubeadmã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã§ã¿ãŸè©±ã€‚ (adsbygoogle = window.adsbygoogle || []).push({}); kubeadmã¨ã¯ kubeadm(ã‚­ãƒ¥ãƒ¼ãƒ–ã‚¢ãƒ€ãƒ )ã¯Kubernetesã«å«ã¾ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ç°¡å˜ã«æ§‹ç¯‰ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚ Kubernetes 1.4ã§è¿½åŠ ã•ã‚Œã€Kubernetes 1.8ã®æ™‚ç‚¹ã§ã¾ã ãƒ™ãƒ¼ã‚¿ã§ã€æœ¬ç•ªç’°å¢ƒã«ã¯ä½¿ã‚ãªã„ã§ã¨ãªã£ã¦ã„ã‚‹ã€‚ Qiitaã®ã€ŒkubeadmãŒä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã‹ã¿ã¦ã¿ãŸã€ã¨ã„ã†è¨˜äº‹ãŒã€ä¸­ã§ã©ã‚“ãªå‹•ä½œã‚’ã—ã¦ã‚‹ã‹ã‚’è§£èª¬ã—ã¦ã„ã¦å‚è€ƒã«ãªã‚‹ã€‚ ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ç”¨æ„Ÿã‹ã‚‰ã™ã‚‹ã¨ã€Dockerã®Swarmãƒ¢ãƒ¼ãƒ‰ã§ã®ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰ã®å®¹æ˜“ã•ã‚’Kubernetesã«å–ã‚Šè¾¼ã‚€ã“ã¨ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹æ°—ãŒã—ãŸã€‚ ãƒãƒƒãƒˆã§è¦‹ã‹ã‘ãŸè©•åˆ¤ã ã¨ã€ç¢ºã‹ã«ç°¡å˜ã«ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰ã§ãã¦ç´ æ™´ã‚‰ã—ã„ã‘ã©ã€TLSã®è¨¼æ˜æ›¸ç”Ÿæˆãªã©ã€ç´°ã‹ãåˆ¶å¾¡ã§ããªãã¦å›°ã‚‹ã¨ã“ã‚ãŒã‚ã£ã¦ã€ã‚„ã¯ã‚Šæœ¬ç•ªã«ä½¿ãˆã‚‹ãƒ¬ãƒ™ãƒ«ã§ã¯ãªã„ã¨ã®ã“ã¨ã€‚ ã¾ã‚ã¨ã«ã‹ãè©¦ã—ã¦ã¿ã‚‹ä¾¡å€¤ã¯ã‚ã‚ã†ã€‚ kubeadmã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦kubeadmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ç‰ˆã®1.8.1ã€‚ VMä½œæˆ kubeadmã®ã‚µãƒãƒ¼ãƒˆOSã¯ã€Ubuntu 16.04+ã€Debian 9ã€CentOS 7ã€RHEL 7ã€Fedora 25/26ã€HypriotOS v1.0.1+ã¨ãªã£ã¦ã„ã‚‹ã€‚ æ…£ã‚Œã¦ã„ã‚‹CentOS 7ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚ (HypriotOSã£ã¦ãªã‚“ã ã‚ã†?) è‡ªå‰ã®ãƒãƒ¼ãƒˆPCã®Windows 10 x64 Home Editionä¸Šã®VMware Player 12ã®VMã«CentOS 7ã‚’å…¥ã‚ŒãŸã€‚ ãƒ¡ãƒ¢ãƒªã¯1GBä»¥ä¸ŠãŒè¦ä»¶ãªã®ã§ã€å‘³ã‚’ä»˜ã‘ã¦1.4GBã§ã€‚ VMé–“ã§é€šä¿¡ã§ãã‚‹ã“ã¨ã£ã¦è¦ä»¶ãŒã‚ã£ãŸã‘ã©ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚‚å¿…è¦ãªã¯ãšãªã®ã§ã€NICã¯NATã®ã‚„ã¤ã§ã€‚ ã“ã®VMã¯Masterã«ãªã‚‹ã€‚ OSè¨­å®š KubernetesãŒä½¿ã†ãƒãƒ¼ãƒˆã‚’ã„ã‚ã„ã‚é–‹ã‘ãªã‘ã‚Œã°ã„ã‘ãªã„ã‚“ã ã‘ã©ã€ã‚ã‚“ã©ã„ã®ã§firewalldã‚’ç„¡åŠ¹ã«ã™ã‚‹ã€‚ [root@localhost ~]# systemctl stop firewalld [root@localhost ~]# systemctl disable firewalld Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service. Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service. ãªã‚“ã¨ãªãIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’DHCPã‹ã‚‰é™çš„å‰²ã‚Šå½“ã¦ã«ã€‚(192.168.171.200) [root@k8s-master ~]# nmcli c modify ens33 ipv4.method manual [root@k8s-master ~]# nmcli c modify ens33 ipv4.addresses 192.168.171.200/24 [root@k8s-master ~]# nmcli c modify ens33 ipv4.dns 192.168.171.2 [root@k8s-master ~]# nmcli c modify ens33 ipv4.gateway 192.168.171.2 [root@k8s-master ~]# systemctl restart network ãƒ›ã‚¹ãƒˆåã‚’localhost.localdomainã‹ã‚‰k8s-masterã«å¤‰æ›´ã€‚ [root@localhost ~]# hostnamectl set-hostname k8s-master ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ­ã‚°ã‚¤ãƒ³ã§åæ˜ ã€‚ /etc/hostsã‚’ç·¨é›†ã—ã¦ã€k8s-masterã®ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã€‚ ã‚ã¨ã§ä½œã‚‹ã‚‚ã†ä¸€ã¤ã®VMã€k8s-nodeã®ã»ã†ã‚‚ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã€‚ (ã“ã‚Œã¯ã ã‚ã ã£ãŸã£ã½ã„ã€‚è©³ç´°ã¯å¾Œè¿°ã€‚) ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹æˆã™ã‚‹ãƒãƒ¼ãƒ‰ã¯ã€ä¸€æ„ã®MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¨product_uuidã‚’æŒã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„ã€‚ KubernetesãŒãã‚Œã‚‰ã§ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒãƒ¼ãƒ‰ã‚’åŒºåˆ¥ã—ã¦ã‚‹ã®ã§ã€‚ MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¯ip linkã‚³ãƒãƒ³ãƒ‰ãªã©ã§ç¢ºèªã§ãã‚‹ã€‚ [root@k8s-master ~]# ip link 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000 link/ether 00:0c:29:38:de:ae brd ff:ff:ff:ff:ff:ff product_uuidã¯ã€SMBIOSã¨ã„ã†ã€PCå›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãƒ»å‚ç…§ã™ã‚‹ãŸã‚ã®ä»•æ§˜ãŒã‚ã£ã¦ã€ãã‚Œã«å¾“ã£ã¦ä¿å­˜ã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ ã®è­˜åˆ¥å­ã‚‰ã—ã„ã€‚ product_uuidã¯dmidecodeã‚³ãƒãƒ³ãƒ‰ãªã©ã§ç¢ºèªã§ãã‚‹ã€‚ [root@k8s-master ~]# dmidecode -s system-uuid 58114D56-A744-3610-C3C5-9B15A838DEAE kubeletãŒã¡ã‚ƒã‚“ã¨å‹•ããŸã‚ã«ã¯swapã‚’ç„¡åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ [root@k8s-master ~]# swapoff -a (ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã‚ˆããªã‹ã£ãŸã€‚è©³ç´°ã¯å¾Œè¿°ã€‚) ebtablesã¨ethtoolã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ [root@k8s-master ~]# yum install -y ebtables ethtool Dockerã‚‚å…¥ã‚Œãªã„ã¨ã€‚ v1.12ãŒæ¨å¥¨ã§ã€v1.11ã‹v1.13ã§ã‚‚ã„ã„ã€‚ é©å½“ã«å…¥ã‚ŒãŸã‚‰v1.12.6ã ã£ãŸã€‚ [root@k8s-master ~]# yum install -y docker [root@k8s-master ~]# systemctl enable docker &amp;&amp; systemctl start docker Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ãŒæ©Ÿèƒ½ã™ã‚‹è¦ä»¶ã¨ã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠãŒãƒ›ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ãã®ãŸã‚ã«ã¯ç¾çŠ¶ã€SELinuxã‚’ç„¡åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ [root@k8s-master ~]# setenforce 0 (ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚‚ã‚ˆããªã‹ã£ãŸã€‚è©³ç´°ã¯å¾Œè¿°ã€‚) RHELç³»ã®å ´åˆã€iptablesãŒãƒã‚¤ãƒ‘ã‚¹ã•ã‚Œã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒå¤‰ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹å•é¡ŒãŒã‚ã‚‹ãŸã‚ã€net.bridge.bridge-nf-call-iptablesã‚’1ã«ã‚»ãƒƒãƒˆã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚ [root@k8s-master ~]# cat &lt;&lt;EOF &gt; /etc/sysctl.d/k8s.conf &gt; net.bridge.bridge-nf-call-ip6tables = 1 &gt; net.bridge.bridge-nf-call-iptables = 1 &gt; EOF [root@k8s-master ~]# sysctl --system * Applying /usr/lib/sysctl.d/00-system.conf ...
              </div>
            </a>
          </article>
        </div>
        
        
        
        
        
        <div class="col-sm-6">
          <article>
            <a href="https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/" class="post post-topix">
              <header class="eyecatch text-center">
                <img src="/images/kubernetes_goslings.png" alt="eyecatch">
              </header>
              <div class="date text-center">
                <span>Wed, Oct 11, 2017</span>
              </div>
              <h2 class="title">Kubernetesã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚‹</h2>
              <div class="summary">
                ã€ŒKubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹ã€ã®ç¶šãã€‚ Minikubeã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¾ã§ã¯ã§ããŸã®ã§ã€Kubernetes Basicsã¨ã„ã†ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚ŠãªãŒã‚‰ã€Goslingsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚ (adsbygoogle = window.adsbygoogle || []).push({}); Kubernetes Basics - æ¦‚è¦ Kubernetes Basicsã¯ã€å…¬å¼ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã€‚ ä»¥ä¸‹ã®6ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ãªã‚‹ã€‚ Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹ ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹ ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹ ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹ ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½¿ã†ã®ã¯Minikubeã ã‘ã©ã€è‡ªåˆ†ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚ Katacodaã¨ã„ã†ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ITæŠ€è¡“ã‚’å­¦ã¹ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚Šã€Kubernetes Basicsã¯ãã‚Œã‚’åˆ©ç”¨ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ãƒ›ã‚¹ãƒ†ãƒƒãƒ‰Minikubeã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚ ãŒã€å‰å›ã®è¨˜äº‹ã§è‡ªPCä¸Šã«Minikubeã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã®ã§ã€ãã¡ã‚‰ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚ Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 1: Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹ Minikubeã‚’èµ·å‹•ã—ã¦kubectlã§ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’ã¿ã‚‹ã ã‘ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚ ã“ã‚Œã¯å‰å›ã®è¨˜äº‹ã§ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã€‚ Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 2: ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ ã‚¢ãƒ—ãƒª(i.e. ã‚³ãƒ³ãƒ†ãƒŠ)ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯Deploymentã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã€‚ Masterã¯Deploymentã®specã«å¾“ã£ã¦å„ãƒãƒ¼ãƒ‰ã«ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã€‚ Deploymentã¯ã€ã‚¢ãƒ—ãƒªãŒè½ã¡ãŸã‚‰å†èµ·å‹•ã—ã¦ãã‚Œã‚‹ã€ã¤ã¾ã‚Šself-healingã‚‚å®Ÿç¾ã™ã‚‹ã€‚ Deploymentã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯kubectl run &lt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå&gt; --image=&lt;Dockerã‚¤ãƒ¡ãƒ¼ã‚¸å&gt;ã€‚ Goslingsã‚’ã“ã‚Œã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚ Goslingsã‚³ãƒ³ãƒ†ãƒŠã¯3ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€æŒ‡å®šã—ãŸãƒãƒ¼ãƒˆã§Webã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹ã€‚ --portã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãã®ãƒãƒ¼ãƒˆã‚’exposeã™ã‚‹ã‚ˆã†ã«ã—ã¦ã€--ã®å¾Œã«ã‚³ãƒ³ãƒ†ãƒŠã«æ¸¡ã™å¼•æ•°ã‚’è¨˜è¿°ã™ã‚‹ã€‚ C:\Users\kaitoy&gt;kubectl run goslings --image=kaitoy/goslings:latest --port 8080 -- 8080 /tmp https://github.com/kaitoy/ deployment &quot;goslings&quot; created C:\Users\kaitoy&gt;kubectl get deployment NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE goslings 1 1 1 1 27s ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããŸã€‚ è£ã§Podã‚‚ä½œã‚‰ã‚Œã¦ã„ã¦ã€ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã•ã‚Œã¦ã„ã‚‹ã€‚ C:\Users\kaitoy&gt;kubectl get pods NAME READY STATUS RESTARTS AGE goslings-1210510689-6w5tf 0/1 ContainerCreating 0 1m (kubectl getã«æŒ‡å®šã™ã‚‹ã®ã¯ã€çœç•¥å½¢ã®deployã¨ã‹poã§ã‚‚ã„ã„ã€‚) Podã¯éš”é›¢ã•ã‚ŒãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§å‹•ãã®ã§ã€ãã®ã¾ã¾ã§ã¯PodåŒå£«ã¯é€šä¿¡ã§ãã‚‹ã‘ã©ã€å¤–ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã€‚ kubectlã§ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½œã£ã¦ã‚„ã‚‹ã“ã¨ã§ã€å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ C:\Users\kaitoy&gt;kubectl proxy Starting to serve on 127.0.0.1:8001 ã“ã‚Œã§ã€kube-apiserverã¸ã®ãƒ—ãƒ­ã‚­ã‚·ãŒãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã§èµ·å‹•ã—ãŸã€‚ ã“ã®çŠ¶æ…‹ã§http://localhost:8001ã‚’é–‹ãã¨ã€kube-apiserverã®APIä¸€è¦§ãŒè¦‹ã‚Œã‚‹ã€‚ ä¾‹ãˆã°ã€http://localhost:8001/versionã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®JSONãƒ‡ãƒ¼ã‚¿ãŒè¿”ã£ã¦ãã‚‹ã€‚ { &quot;major&quot;: &quot;1&quot;, &quot;minor&quot;: &quot;7&quot;, &quot;gitVersion&quot;: &quot;v1.7.0&quot;, &quot;gitCommit&quot;: &quot;d3ada0119e776222f11ec7945e6d860061339aad&quot;, &quot;gitTreeState&quot;: &quot;dirty&quot;, &quot;buildDate&quot;: &quot;2017-10-04T09:25:40Z&quot;, &quot;goVersion&quot;: &quot;go1.8.3&quot;, &quot;compiler&quot;: &quot;gc&quot;, &quot;platform&quot;: &quot;linux/amd64&quot; } å„Podã¸ã‚‚ä»¥ä¸‹ã®URLã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚ http://localhost:8001/api/v1/proxy/namespaces/default/pods/&lt;Podå&gt;/ Podåã®éƒ¨åˆ†ã¯kubectl getã§ç¢ºèªã§ãã‚‹ã€‚ C:\Users\kaitoy&gt;kubectl get po NAME READY STATUS RESTARTS AGE goslings-1210510689-6w5tf 1/1 Running 0 24m å®Ÿéš›ã«ã€http://localhost:8001/api/v1/proxy/namespaces/default/pods/goslings-1210510689-6w5tf/ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ãŸã‚‰ã€Goslingsã®GUIãŒå‡ºãŸã€‚ ãƒ’ãƒ¥ãƒ¼ã€‚ Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 3: ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹ ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’èª¿æŸ»ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚ kubectl get: ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤ºã™ã‚‹ã€‚ kubectl describe: ãƒªã‚½ãƒ¼ã‚¹ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã€‚ kubectl logs: ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚docker logsçš„ãªã€‚ kubectl exec: ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚docker execçš„ãªã€‚ kubectl getã¯ã•ã‚“ã–ã‚“ã‚„ã£ãŸã®ã§é£›ã°ã—ã¦ã€kubectl describeã—ã¦ã¿ã‚‹ã€‚ C:\Users\kaitoy&gt;kubectl describe po Name: goslings-1210510689-6w5tf Namespace: default Node: minikube/192.168.99.100 Start Time: Tue, 10 Oct 2017 21:51:48 +0900 Labels: pod-template-hash=1210510689 run=goslings Annotations: kubernetes.io/created-by={&quot;kind&quot;:&quot;SerializedReference&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;reference&quot;:{&quot;kind&quot;:&quot;ReplicaSet&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;name&quot;:&quot;goslings-1210510689&quot;,&quot;uid&quot;:&quot;c74b6518-adb9-11e7-88a0-08002798178d...
              </div>
            </a>
          </article>
        </div>
        
        
        
        
        
        <div class="col-md-3 col-sm-4 col-xs-6">
          <article>
            <a href="https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/" class="post">
              <header class="eyecatch text-center">
                <img src="/images/kubernetes_goslings.png" alt="eyecatch">
              </header>
              <div class="date text-center">
                <span>Tue, Oct 10, 2017</span>
              </div>
              <h3 class="title">Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹</h3>
            </a>
          </article>
        </div>
        
        
        
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <aside id="site-sidebar">
      <div class="row">
        <div class="col-md-12 col-sm-6 col-xs-12">
  <div class="text-center custom-partial">
    
  </div>
  <section class="sidebar-bordered">
    
    <div id="profile">
      <div class="text-center">
        <img id="profile-photo" src="/images/nopicture.png" alt="profile">
      </div>
      <div class="data">
        <h4 id="profile-username" class="post-title"></h4>
        
        <span id="profile-birth">DOB: Dec 14, 1983</span>
        
        <div id="social-links">
          
          <a href="https://www.facebook.com/yamada.kaito.90" target="_blank"><i class="fa fa-facebook-square"></i></a>
          
          
          
          <a href="https://github.com/Kaitoy" target="_blank"><i class="fa fa-github-square"></i></a>
          
        </div>
        <div id="profile-description"></div>
        <ul id="profile-urls" class="post-tags"></ul>
      </div>
    </div>
    
  </section>
</div>

<div class="col-md-12 col-sm-6 col-xs-12">
  <section>
    <h3>Tags</h3>
    
    <div id="tag-cloud" class="text-center">
      
      
      
      <a href="https://www.kaitoy.xyz/tags/atom">atom</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/aws">aws</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/aws-ecs">aws-ecs</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/blog">blog</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/bow">bow</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/cdn">cdn</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/ci">ci</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/cnn">cnn</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/coursera">coursera</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/deep-learning">deep-learning</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/disturb-me">disturb-me</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/docker">docker</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/elasticsearch">elasticsearch</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/filebeat">filebeat</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/firedrop">firedrop</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/git">git</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/github">github</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/goslings">goslings</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/groovy">groovy</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/headless-browser">headless-browser</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/hibernate">hibernate</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/hugo">hugo</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/impress.js">impress.js</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/japanese-word-selection">japanese-word-selection</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/javascript">javascript</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/jekyll">jekyll</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/jgit">jgit</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/jvm-language">jvm-language</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/keras">keras</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/kotlin">kotlin</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/kubeadm">kubeadm</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/kubernetes">kubernetes</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/license">license</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/logstash">logstash</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/machine-learning">machine-learning</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/management">management</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/minikube">minikube</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/nanoserver">nanoserver</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/neural-network">neural-network</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/nlp">nlp</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/oop">oop</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/orm">orm</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/pcap4j">pcap4j</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/react">react</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/rnn">rnn</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/runc">runc</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/selenium">selenium</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/seo">seo</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/servicenow">servicenow</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/skaffold">skaffold</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/spring">spring</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/spring-boot">spring-boot</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/subversion">subversion</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/tensorflow">tensorflow</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/test-framework">test-framework</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/vcs">vcs</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/webdriverio">webdriverio</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/windows">windows</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/yegor256">yegor256</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/zundoko">zundoko</a>
      
    </div>
    
  </section>
</div>





<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-6244473643910448"
    data-ad-slot="1845600530"
    data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div class="col-md-12 col-sm-6 col-xs-12">
  <div class="text-center custom-partial">
    
  </div>
</div>

      </div>
    </aside>
  </div>
</div>

        <div class="text-center custom-partial">
          
        </div>
      </div>
    </main>

    <footer id="site-footer" class="text-center font-logo">
      <p>&copy;  2015 -  2018  Kaito Yamada </p>
      <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a></p>
      <p>
        Theme: <a target="_blank" href="https://github.com/dim0627/hugo_theme_robust">Robust</a>
        designed by <a target="_blank" href="http://yet.unresolved.xyz">Daisuke Tsuji</a>
      </p>
    </footer>

    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://www.kaitoy.xyz/js/jquery.bxslider.min.js"></script>
    
    <script>
      $(document).ready(function(){
        $('.bxslider').bxSlider({
          speed: 1,
          preloadImages: 'all'
        });
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="https://www.kaitoy.xyz/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65248565-1', 'auto');
    ga('send', 'pageview');

    </script>

    <script>
    $(function() {
      var url = "https://ja.gravatar.com/5fbe47b2a4b3637dd26dfc9a49381895.json?callback=?";
      $.getJSON(url)
        .done(function(data) {
          var entry = data.entry[0];
          $("#profile-photo").attr("src", entry.photos[0].value);
          $("#profile-username").html(entry.name.familyName + " " + entry.name.givenName);
          $("#profile-description").html(entry.aboutMe);
          entry.urls.forEach(function(el){
            $("#profile-urls").append($("<li><a href='" + el.value + "'>" + el.title + "</a></li>"));
          });
          $("#profile").show();
        });
    });
    </script>
  </body>
</html>

