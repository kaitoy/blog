<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>To Be Decided </title>
    <link>https://www.kaitoy.xyz/tags/kubernetes/</link>
    <language>en-us</language>
    <author>Kaito Yamada</author>
    <rights>(C) 2018</rights>
    <updated>2018-04-01 09:59:43 &#43;0900 JST</updated>

    
      
        <item>
          <title>Skaffoldã‚’è§¦ã£ã¦ã¿ãŸ</title>
          <link>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</link>
          <pubDate>Sun, 01 Apr 2018 09:59:43 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold#run-a-deployment-pipeline-once&#34;&gt;Skaffold&lt;/a&gt;ã‚’è©¦ã—ã¦ã¿ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;skaffoldã¨ã¯&#34;&gt;Skaffoldã¨ã¯&lt;/h2&gt;

&lt;p&gt;GoogleãŒé–‹ç™ºã—ã¦ã„ã‚‹ã€Kubernetesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿«é©ã«é–‹ç™ºã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–ã—ã€å¤‰æ›´ãŒå…¥ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;2018/3/16ã«&lt;a href=&#34;https://cloudplatform.googleblog.com/2018/03/introducing-Skaffold-Easy-and-repeatable-Kubernetes-development.html&#34;&gt;ç™ºè¡¨&lt;/a&gt;ã•ã‚ŒãŸæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã€è§¦ã£ãŸæ„Ÿã˜ã§ã¯ã¾ã ã“ã‚Œã‹ã‚‰ã¨ã„ã£ãŸæ„Ÿã˜ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;Goã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€Linuxã€OS Xã€Windowsç”¨ã®ãƒã‚¤ãƒŠãƒªãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¼¼ãŸãƒ„ãƒ¼ãƒ«ã«ã¯Microsoftã®&lt;a href=&#34;https://draft.sh/&#34;&gt;Draft&lt;/a&gt;ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€Gitã®ã‚³ãƒŸãƒƒãƒˆã‚’è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã«ã€&lt;a href=&#34;https://gitkube.sh/&#34;&gt;Gitkube&lt;/a&gt;ã€&lt;a href=&#34;http://jenkins-x.io/&#34;&gt;Jenkins X (ã‚¨ãƒƒã‚¯ã‚¹)&lt;/a&gt;ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;windowsç‰ˆã‚’è©¦ã™&#34;&gt;Windowsç‰ˆã‚’è©¦ã™&lt;/h2&gt;

&lt;p&gt;è‡ªPCãŒWindowsãªã®ã§Windowsç‰ˆã‚’è©¦ã™ã€‚
ä¼šç¤¾ã§ä½¿ã£ã¦ã‚‹ã®ã‚‚Windowsã ã—ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã‚’ä½¿ã†ã«ã¯ã€Skaffoldã®å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã€ãã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã«è¨­å®šã—ãŸkubectlã€DockerãŒå¿…è¦ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšWindowsç‰ˆSkaffoldã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/releases&#34;&gt;GitHubã®ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸&lt;/a&gt;ã‹ã‚‰Windowsãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€skaffold.exeã«ãƒªãƒãƒ¼ãƒ ã—ã¦PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã ã‘ã€‚
Skaffoldã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.3.0ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€Windows 10 Homeä¸Šã«minikube 0.22.2ã§ä½œã£ãŸKubernetes 1.7.0ã®ã‚¯ãƒ©ã‚¹ã‚¿ã€‚
minikubeã¯&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;ä»¥å‰&lt;/a&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã‚’ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;minikubeã‚’èµ·å‹•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; minikube start --kubernetes-version v1.7.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;kubectlã‚‚minikubeã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerã«ã¤ã„ã¦ã¯ã€ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯minikubeä¸Šã®ã‚’ä½¿ãˆã°ã„ã„ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(Docker Client)ã¯skaffoldã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã®ã§Windowsä¸Šã«ãªã„ã¨ã ã‚ã¯ãªãšã€‚&lt;/p&gt;

&lt;p&gt;Windowsã§Dockerã¨è¨€ãˆã°ä»Šãªã‚‰&lt;a href=&#34;https://www.docker.com/docker-windows&#34;&gt;Docker for Windows&lt;/a&gt;ã ã‘ã©ã€ã“ã‚Œã¯Windows 10 Proã˜ã‚ƒãªã„ã¨ä½¿ãˆãªã‹ã£ãŸã¯ãšãªã®ã§ã€&lt;a href=&#34;https://docs.docker.com/toolbox/&#34;&gt;Docker Toolbox&lt;/a&gt;ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã„ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã¦ã‚‹ã®ã§ã€minikubeã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã•ã›ã‚‹ã€‚
ãã®ãŸã‚ã®è¨­å®šã¯minikubeã®ã‚³ãƒãƒ³ãƒ‰ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt;minikube docker-env
SET DOCKER_TLS_VERIFY=1
SET DOCKER_HOST=tcp://192.168.99.100:2376
SET DOCKER_CERT_PATH=C:\Users\kaitoy\.minikube\certs
SET DOCKER_API_VERSION=1.23
REM Run this command to configure your shell:
REM @FOR /f &amp;quot;tokens=*&amp;quot; %i IN (&#39;minikube docker-env&#39;) DO @%i
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã«å¾“ã£ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®šå®Œäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; @FOR /f &amp;quot;tokens=*&amp;quot; %i IN (&#39;minikube docker-env&#39;) DO @%i
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§æº–å‚™å®Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã®&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/tree/10d56cf0fd3c253b0716a084419b5833e53d9870#getting-started-with-local-tooling&#34;&gt;Getting Started&lt;/a&gt;ã‚’ã‚„ã£ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã®ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–‹ã„ã¦ã€&lt;code&gt;examples/getting-started&lt;/code&gt;ã«cdã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; skaffold dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã§çµ‚ã‚ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-txt&#34;&gt;[31mERRO[0m[0047] run: running skaffold steps: starting watch on file C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: adding watch for C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: The parameter is incorrect.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;MinGW(Git Bash)ã§ã‚„ã£ã¦ã‚‚åŒã˜çµæœã€‚
&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/issues/287&#34;&gt;Issuesã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚„ã¤&lt;/a&gt;ã¨åŒã˜å•é¡Œã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¾å¿œã‚’å¾…ã¤ã—ã‹ãªã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;linuxç‰ˆã‚’è©¦ã™&#34;&gt;Linuxç‰ˆã‚’è©¦ã™&lt;/h2&gt;

&lt;p&gt;Linuxç‰ˆã‚‚è©¦ã—ã¦ã¿ã‚‹ã€‚
minikubeã®VMãŒLinux(Boot2Docker)ãªã®ã§ã€ãã“ã§å‹•ã‹ã™ã€‚
&lt;a href=&#34;https://ja.wikipedia.org/wiki/Windows_Subsystem_for_Linux&#34;&gt;WSL&lt;/a&gt;ã¯è©¦ã•ãªã„ã€‚
ä¼šç¤¾ã®PCãŒWindows 7ã§ä½¿ãˆãªã„ã®ã§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Skaffoldã®Linuxç‰ˆãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦skaffoldã«ãƒªãƒãƒ¼ãƒ ã—ã¦ã€minikubeã®Boot2Dockerã«SSHã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã€PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã€‚
å› ã¿ã«minikubeã®Boot2Dockerã¯ã€ãƒ¦ãƒ¼ã‚¶dockerãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰tcuserã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®Linuxç‰ˆãƒã‚¤ãƒŠãƒªã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦PATHã«å…¥ã‚ŒãŸã‚‰æº–å‚™å®Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started&lt;/code&gt;ã«cdã—ã¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ ERRO[0001] run: getting skaffold config: getting k8s client: Error creating kubeConfig: invalid configuration: no configuration has been provided
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨èª¿ã¹ãŸã‚‰ã€kubectlã®ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã®ãŒã ã‚ã£ã½ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ kubectl config current-context
error: current-context is not set
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Windowsä¸Šã®kubectlã«è¨­å®šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã‚’å‚è€ƒã«ã€ä»¥ä¸‹ã®å†…å®¹ã‚’&lt;code&gt;~/.kube/config&lt;/code&gt;ã«ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
clusters:
- cluster:
    certificate-authority: /c/Users/kaitoy/.minikube/ca.crt
    server: https://localhost:8443
  name: minikube
contexts:
- context:
    cluster: minikube
    user: minikube
  name: minikube
current-context: minikube
kind: Config
preferences: {}
users:
- name: minikube
  user:
    client-certificate: /c/Users/kaitoy/.minikube/client.crt
    client-key: /c/Users/kaitoy/.minikube/client.key
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å†åº¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰é•ã†ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;WARN[0002] run: build: build step: running build: read auth configs: docker config: opening docker config: open /home/docker/.docker/config.json: no such file or directory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;.docker/config.json&lt;/code&gt;ã¯&lt;code&gt;docker login&lt;/code&gt;ã™ã‚‹ã¨ç”Ÿæˆã•ã‚Œã‚‹ã‚‚ã®ã‚‰ã—ã„ã€‚
Skaffoldã®README.mdã«ã¯minikubeä½¿ã†ãªã‚‰Docker image registryè¦ã‚‰ãªã„ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã‚“ã ã‘ã©â€¦&lt;/p&gt;

&lt;p&gt;è‰²ã€…ã‚ã£ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã„ã„ã ã‘ã£ã½ã„ã®ã§ã€ä»¥ä¸‹ã§è‰¯ã—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ echo {} &amp;gt; ~/.docker/config.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å†åº¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰å‹•ã„ãŸã€‚
Dockerãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚Šã€minikubeã«PodãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;Getting Startedã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€ä¸€ç§’ã”ã¨ã«ã€Œ[getting-started] Hello world!ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started/main.go&lt;/code&gt;ã®&lt;code&gt;fmt.Println(&amp;quot;Hello world!&amp;quot;)&lt;/code&gt;ã®ã¨ã“ã‚’ã„ã˜ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰ãˆãŸã‚‰ã€è‡ªå‹•ã§å†Dockerãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã€æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—å§‹ã‚ãŸã€‚
ä¾¿åˆ©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started/skaffold.yaml&lt;/code&gt;ãŒSkaffoldã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã“ã“ã«å®šç¾©ã•ã‚ŒãŸKubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã£ã½ã„ã€‚
watchã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã©ã†æ±ºã‚ã¦ã„ã‚‹ã‚“ã ã‚ã†ã‹ã€‚
Dockerfileã¨main.goã¯watchã—ã¦ã‚‹ã‘ã©ã€æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã‚‚Dockerãƒ“ãƒ«ãƒ‰èµ°ã‚‰ãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã²ã¨ã¤å•é¡Œã¯ã€Linuxãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã§ç·¨é›†ã—ãªã„ã¨å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;minikubeã®VMã«ã¯&lt;code&gt;C:\Users&lt;/code&gt;ãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã‚‹ã®ã§ã€æœ€åˆã¯Windowsä¸Šã«cloneã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚’Skaffoldã§å®Ÿè¡Œã—ã¤ã¤ã€Windowsä¸Šã§main.goã‚’ç·¨é›†ã—ã¦ã¿ãŸã‚“ã ã‘ã©ã€ãã‚Œã ã¨ãƒ€ãƒ¡ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚„ã¯ã‚ŠWindowsç‰ˆSkaffoldã®ä¿®æ­£ãŒå¾…ãŸã‚Œã‚‹ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetes 1.8ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦ã€‚ã‚ã¨Dashboardã€‚</title>
          <link>https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/</link>
          <pubDate>Tue, 31 Oct 2017 16:57:04 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/&#34;&gt;Kubernetes1.8ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚kubeadmã§ã€‚&lt;/a&gt;ã€ã§ã€DashboardãŒã†ã¾ãå‹•ã‹ãªã„å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚“ã ã‘ã©ã€ãã‚Œã‚’è§£æ±ºã—ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;å•é¡Œã®ç¾è±¡&#34;&gt;å•é¡Œã®ç¾è±¡&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/kubeadm/&#34;&gt;kubeadm&lt;/a&gt;ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã§ã€è‡ªå‰ã®ã‚¢ãƒ—ãƒª(&lt;a href=&#34;https://www.kaitoy.xyz/2016/12/11/goslings-development-memo0-intro-design/&#34;&gt;Goslings&lt;/a&gt;)ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã¯ã†ã¾ãã§ããŸã‚“ã ã‘ã©ã€&lt;a href=&#34;https://github.com/kubernetes/dashboard&#34;&gt;Dashboard&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚‰å‹•ã‹ãšã€Web UIã«&lt;code&gt;kubectl proxy&lt;/code&gt;çµŒç”±ã§ã¤ãªã„ã§ã‚‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã—ã¾ã£ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¯¾ç­–&#34;&gt;å¯¾ç­–&lt;/h2&gt;

&lt;p&gt;ãªã‚“ã¨ãªãã€ã‚¯ãƒ©ã‚¹ã‚¿å†…éƒ¨ã§ã®åå‰è§£æ±ºã«ã¯&lt;a href=&#34;https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/dns&#34;&gt;kube-dns&lt;/a&gt;ã«ã‚ˆã‚‹DNSã‚µãƒ¼ãƒ“ã‚¹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã£ã½ã„ã®ã§ã€&lt;code&gt;/etc/hosts&lt;/code&gt;ã«ä½™è¨ˆãªäº‹æ›¸ã„ãŸã®ãŒã„ã‘ãªã‹ã£ãŸã¨æ€ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã®ã§ã€&lt;code&gt;/etc/hosts&lt;/code&gt;ã‹ã‚‰k8s-masterã¨k8s-nodeã®ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€&lt;code&gt;kubeadm init&lt;/code&gt;ã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ã¿ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;çµæœ&#34;&gt;çµæœ&lt;/h2&gt;

&lt;p&gt;ã—ãŸã‚‰ã¡ã‚ƒã‚“ã¨å‹•ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;VMã®ãƒ›ã‚¹ãƒˆã§&lt;code&gt;kubectl proxy&lt;/code&gt;ã—ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl proxy
Starting to serve on 127.0.0.1:8001
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/&lt;/code&gt;ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¤ãªã„ã ã‚‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/dashboard.png&#34; alt=&#34;dashboard&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dashboardã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³å‡¦ç†ã¯Kubernetes(ã¨ã„ã†ã‹kube-apiserver)ã®ãã‚Œã«ç§»è­²ã—ã¦ã„ã‚‹ã€‚
Dashboardã¯ãã“ã§èªè¨¼ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ã§ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€æƒ…å ±ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹ã€‚å¤šåˆ†ã€‚&lt;/p&gt;

&lt;p&gt;Dashboardã¸ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³æ–¹æ³•ã¯&lt;a href=&#34;https://github.com/kubernetes/dashboard/wiki/Access-control&#34;&gt;ã„ãã¤ã‹ã‚ã‚‹&lt;/a&gt;ãŒã€ãã‚Œã‚‰ã‚’ç†è§£ã™ã‚‹ã«ã¯Kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦å­¦ã¶ã“ã¨ã‚’æ¨å¥¨ã¨ã‚ã£ãŸã®ã§ã¡ã‚‡ã£ã¨&lt;a href=&#34;https://kubernetes.io/docs/admin/accessing-the-api/&#34;&gt;Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã‚’èª­ã‚“ã ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡&#34;&gt;Kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯kube-apiserverã§ã‚ã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚‚kube-apiserverãŒã‚„ã‚‹ã€‚
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨kube-apiserverã¨ã®TLSã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒç¢ºç«‹ã—ãŸå¾Œã€HTTPå±¤ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’ã™ã‚‹ã‚“ã ã‘ã©ã€ãã®å‡¦ç†ã¯&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/&#34;&gt;Authentication&lt;/a&gt;(èªè¨¼)ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/&#34;&gt;Authorization&lt;/a&gt;(èªå¯)ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/admission-controllers/&#34;&gt;Admission&lt;/a&gt;(è¨±å¯)ã®ä¸‰æ®µéšã‹ã‚‰ãªã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;authentication&#34;&gt;Authentication&lt;/h3&gt;

&lt;p&gt;ç¬¬ä¸€æ®µéšãŒAuthenticationã€‚
ã“ã“ã§ã¯ã€kube-apiserverã«ä»•è¾¼ã¾ã‚ŒãŸAuthenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ¦ãƒ¼ã‚¶èªè¨¼ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;KubernetesãŒèªè¨¼ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã«ã¯ã€KubernetesãŒç®¡ç†ã™ã‚‹Service Accountã¨ã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–éƒ¨ã§ç®¡ç†ã•ã‚Œã‚‹é€šå¸¸ãƒ¦ãƒ¼ã‚¶ã®äºŒé€šã‚ŠãŒã‚ã‚‹ã€‚
Service Accountã¯PodãŒkube-apiserverã¨è©±ã™ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ã§ã€é€šå¸¸ãƒ¦ãƒ¼ã‚¶ã¯ä¸»ã«äººãŒkubectlã¨ã‹ã§kube-apiserverã¨è©±ã™ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ã€‚(åŒ¿åã§è©±ã™ã“ã¨ã‚‚ã§ãã‚‹ã€‚)
å‰è€…ã¯ServiceAccountã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å®šç¾©ã•ã‚Œã‚‹ã‘ã©ã€å¾Œè€…ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountã¯Namespaceã¨é–¢é€£ä»˜ã(ã¤ã¾ã‚Šnamespaceæ¯ã«ãƒ¦ãƒ‹ãƒ¼ã‚¯)ã€Secretã«ç´ã¥ãã€‚
Secretã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã®ã‚»ãƒƒãƒˆã‚’å®šç¾©ã—ã€Podã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã€‚
ServiceAccountã¨Secretã¯ã€ãµã¤ã†ã¯è‡ªå‹•ã§ä½œã‚‰ã‚Œã€Podã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kube-apiserverã«ã¯ä¸€ã¤ä»¥ä¸Šã®Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã¦ã€ã©ã‚Œã‹ã§èªè¨¼ã§ãã‚Œã°æ¬¡ã®æ®µéšã«é€²ã‚ã‚‹ã€‚
èªè¨¼å¤±æ•—ã™ã‚‹ã¨HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰401ãŒè¿”ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#x509-client-certs&#34;&gt;ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸&lt;/a&gt;: X.509ã®ãƒ‡ã‚£ã‚¸ã‚¿ãƒ«è¨¼æ˜æ›¸ã‚’ä½¿ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--client-ca-file&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚è¨¼æ˜æ›¸ã®Common NameãŒãƒ¦ãƒ¼ã‚¶åã«ãªã‚Šã€OrganizationãŒã‚°ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãã®è¨¼æ˜æ›¸ã¨å¯¾å¿œã™ã‚‹ç§˜å¯†éµã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#putting-a-bearer-token-in-a-request&#34;&gt;Bearer Token&lt;/a&gt;: ç„¡è¨˜åãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--token-auth-file&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ã¯CSVã§ã€ã€Œ&lt;code&gt;token,user,uid,&amp;quot;group1,group2,group3&amp;quot;&lt;/code&gt;ã€ã¨ã„ã†å½¢å¼ã§æ›¸ãã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³æ–‡å­—åˆ—ã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#static-password-file&#34;&gt;ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼&lt;/a&gt;: ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§èªè¨¼ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--basic-auth-file&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚ã“ã®ãƒªã‚¹ãƒˆã¯CSVã§ã€ã€Œ&lt;code&gt;password,user,uid,&amp;quot;group1,group2,group3&amp;quot;&lt;/code&gt;ã€ã¨ã„ã†å½¢å¼ã§æ›¸ãã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ™‚ã¯Authorizationãƒ˜ãƒƒãƒ€ãŒä½¿ãˆã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#service-account-tokens&#34;&gt;Service Account Token&lt;/a&gt;: Service Accountã‚’ç½²åä»˜ãBearer Tokenã§èªè¨¼ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ãªã‚‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã®ã‚ãŸã‚Šã€Qiitaã®ã€Œ&lt;a href=&#34;https://qiita.com/hiyosi/items/43465d4fc501c2044d01#x509-client-certs&#34;&gt;kubernetesãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹èªè¨¼æ–¹æ³•ã®å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‹•ã‹ã™&lt;/a&gt;ã€ã¨ã„ã†è¨˜äº‹ã‚’ã¿ã‚‹ã¨ç†è§£ãŒæ·±ã¾ã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;authorization&#34;&gt;Authorization&lt;/h3&gt;

&lt;p&gt;Authenticationã‚’ãƒ‘ã‚¹ã™ã‚‹ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶(ã¨ã‚°ãƒ«ãƒ¼ãƒ—)ãŒèªè¨¼ã•ã‚Œã€ç¬¬äºŒæ®µéšã®Authorizationãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡¦ç†ã«ç§»ã‚‹ã€‚
ã“ã“ã§ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹(æ“ä½œå¯¾è±¡ã€æ“ä½œç¨®åˆ¥(ãƒ¡ã‚½ãƒƒãƒ‰)ç­‰)ã‚’è¦‹ã¦ã€ãã‚ŒãŒãƒ¦ãƒ¼ã‚¶ã«è¨±ã•ã‚ŒãŸã‚‚ã®ãªã‚‰èªå¯ã™ã‚‹ã€‚
ä½•ã‚’è¨±ã™ã‹ã¯äº‹å‰ã«ã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã—ã¦ãŠãã€‚&lt;/p&gt;

&lt;p&gt;kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--authorization-mode&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¸€ã¤ä»¥ä¸Šã®Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¦ã€ã©ã‚Œã‹ã§èªå¯ã•ã‚Œã‚Œã°æ¬¡ã®æ®µéšã«é€²ã‚ã‚‹ã€‚
ã•ã‚‚ãªãã°HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰403ãŒè¿”ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Authorizationãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/node/&#34;&gt;Node&lt;/a&gt;: kubeletã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’èªå¯ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/abac/&#34;&gt;ABAC Mode&lt;/a&gt;: Attribute-based Access Controlã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹å±æ€§ã¨Policyã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¯”è¼ƒã—ã¦ã€ãƒãƒƒãƒã™ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°èªå¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/rbac/&#34;&gt;RBAC Mode&lt;/a&gt;: Role-Based Access Controlã€‚Roleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ClusterRoleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã—ã€ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚„è¨±å¯ã™ã‚‹æ“ä½œã‚’å®šç¾©ã—ã¦ã€RoleBindingã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ClusterRoleBindingã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ¦ãƒ¼ã‚¶åã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã¨ç´ã¥ã‘ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/webhook/&#34;&gt;Webhook Mode&lt;/a&gt;: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹ã‚’ç¤ºã™SubjectAccessReviewã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸJSONãƒ‡ãƒ¼ã‚¿ã‚’HTTPã§POSTã—ã¦ã€ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã‚ˆã£ã¦èªå¯å¯å¦ã‚’æ±ºã‚ã‚‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;admission-control&#34;&gt;Admission Control&lt;/h3&gt;

&lt;p&gt;Authorizationã‚’ãƒ‘ã‚¹ã™ã‚‹ã¨ã€ç¬¬ä¸‰æ®µéšã®Admission Controlãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡¦ç†ã«ç§»ã‚‹ã€‚
ã“ã“ã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã€å‰Šé™¤ã€æ›´æ–°ãªã©ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ°¸ç¶šåŒ–å‰ã«ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã—ã¦ã€æ°¸ç¶šåŒ–ã‚’è¨±å¯ã™ã‚‹ã‹ã‚’æ±ºã‚ã‚‹ã€‚
ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ãã‚Œã«é–¢é€£ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ°¸ç¶šåŒ–å‰ã«ã„ã˜ã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã—ãŸã‚Šã‚‚ã§ãã‚‹ã€‚
èª­ã¿å–ã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å ´åˆã¯å®Ÿè¡Œã•ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--admission-control&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¤‡æ•°ã®Admission Controlãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¦ã€å…¨ã¦ãŒè¨±å¯ã—ãªã„ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå´ä¸‹ã•ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Admission Controlãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è‰²ã€…ã‚ã‚‹ã‚“ã ã‘ã©ã€Kubernetes 1.6ä»¥é™ã§ã¯&lt;code&gt;--admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,ResourceQuota,DefaultTolerationSeconds&lt;/code&gt;ã¨æŒ‡å®šã™ã‚‹ã®ãŒå¼·ãæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚
ã“ã“ã§æŒ‡å®šã—ã¦ã„ã‚‹&lt;a href=&#34;https://kubernetes.io/docs/admin/admission-controllers/#serviceaccount&#34;&gt;ServiceAccountãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«&lt;/a&gt;ã¯ã€kube-controller-managerã«å«ã¾ã‚Œã‚‹ServiceAccountControllerã¨TokenControllerã¨å”èª¿ã—ã€Service Accountå‘¨ã‚Šã®å‡¦ç†ã‚’&lt;a href=&#34;https://kubernetes.io/docs/admin/service-accounts-admin/#service-account-automation&#34;&gt;è‡ªå‹•åŒ–&lt;/a&gt;ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountControllerã¯ã€å„Namespaceã«&lt;code&gt;default&lt;/code&gt;ã¨ã„ã†åå‰ã®Service Accountã‚’ä½œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountãŒä½œæˆã•ã‚Œã‚‹ã¨TokenControllerãŒå‹•ãã€å¯¾å¿œã—ãŸSecretã¨ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã¦ç´ã¥ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€Podã®ä½œæˆã‚„æ›´æ–°æ™‚ã«å‹•ãã€ä»¥ä¸‹ã®å‡¦ç†ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Podã«ServiceAccountãŒè¨­å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€&lt;code&gt;default&lt;/code&gt;ã‚’è¨­å®šã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;Podã«è¨­å®šã•ã‚ŒãŸServiceAccountãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€å­˜åœ¨ã—ã¦ã„ãªã‘ã‚Œã°ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å´ä¸‹ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;PodãŒImagePullSecretsã‚’å«ã‚“ã§ã„ãªã‘ã‚Œã°ã€ServiceAccountã®ImagePullSecretsã‚’Podã«è¿½åŠ ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å«ã‚“ã Volumeã‚’Podã«è¿½åŠ ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;Podå†…ã®å„ã‚³ãƒ³ãƒ†ãƒŠã®&lt;code&gt;/var/run/secrets/kubernetes.io/serviceaccount&lt;/code&gt;ã«ãã®Volumeã‚’ãƒã‚¦ãƒ³ãƒˆã•ã›ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;dashboardã¸bearer-tokenã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&#34;&gt;Dashboardã¸Bearer Tokenã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&lt;/h2&gt;

&lt;p&gt;Dashboardã®è©±ã«æˆ»ã‚‹ã€‚
ã¨ã‚Šã‚ãˆãš&lt;a href=&#34;https://github.com/kubernetes/dashboard/wiki/Access-control#bearer-token&#34;&gt;Bearer Tokenã§ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³&lt;/a&gt;ã‚’è©¦ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è‰²ã‚“ãªService AccountãŒä½œã‚‰ã‚Œã¦ã„ã¦ã€ç•°ãªã‚‹æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã€‚
ãã®ã„ãšã‚Œã‹ã®Secretã®Tokenã‚’ä½¿ã£ã¦Dashboardã¸ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã§ãã‚‹ã‚‰ã—ã„ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§&lt;code&gt;kube-system&lt;/code&gt;ã¨ã„ã†Namespaceã®Secretã‚’ä¸€è¦§ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl -n kube-system get secret
NAME                                     TYPE                                  DATA      AGE
attachdetach-controller-token-skzmj      kubernetes.io/service-account-token   3         18m
bootstrap-signer-token-mhqfh             kubernetes.io/service-account-token   3         18m
bootstrap-token-2964e0                   bootstrap.kubernetes.io/token         7         18m
certificate-controller-token-fvrgm       kubernetes.io/service-account-token   3         18m
cronjob-controller-token-hmrdm           kubernetes.io/service-account-token   3         18m
daemon-set-controller-token-vqz85        kubernetes.io/service-account-token   3         18m
default-token-h987g                      kubernetes.io/service-account-token   3         18m
deployment-controller-token-86bp9        kubernetes.io/service-account-token   3         18m
disruption-controller-token-6mskg        kubernetes.io/service-account-token   3         18m
endpoint-controller-token-d4wz6          kubernetes.io/service-account-token   3         18m
generic-garbage-collector-token-smfgq    kubernetes.io/service-account-token   3         18m
horizontal-pod-autoscaler-token-wsbn9    kubernetes.io/service-account-token   3         18m
job-controller-token-fttt2               kubernetes.io/service-account-token   3         18m
kube-dns-token-sn5qq                     kubernetes.io/service-account-token   3         18m
kube-proxy-token-w96xd                   kubernetes.io/service-account-token   3         18m
kubernetes-dashboard-certs               Opaque                                2         7m
kubernetes-dashboard-key-holder          Opaque                                2         6m
kubernetes-dashboard-token-gtppc         kubernetes.io/service-account-token   3         7m
namespace-controller-token-5kksd         kubernetes.io/service-account-token   3         18m
node-controller-token-chpwt              kubernetes.io/service-account-token   3         18m
persistent-volume-binder-token-d5x49     kubernetes.io/service-account-token   3         18m
pod-garbage-collector-token-l8sct        kubernetes.io/service-account-token   3         18m
replicaset-controller-token-njjwr        kubernetes.io/service-account-token   3         18m
replication-controller-token-qrr5h       kubernetes.io/service-account-token   3         18m
resourcequota-controller-token-dznjm     kubernetes.io/service-account-token   3         18m
service-account-controller-token-99nh8   kubernetes.io/service-account-token   3         18m
service-controller-token-9cw7k           kubernetes.io/service-account-token   3         18m
statefulset-controller-token-8z8w9       kubernetes.io/service-account-token   3         18m
token-cleaner-token-cxbkc                kubernetes.io/service-account-token   3         18m
ttl-controller-token-k7gh7               kubernetes.io/service-account-token   3         18m
weave-net-token-lqdgm                    kubernetes.io/service-account-token   3         17m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€é©å½“ã«ãã‚Œã£ã½ã„Secretã€&lt;code&gt;deployment-controller-token-86bp9&lt;/code&gt;ã‚’é¸ã‚“ã§ã€&lt;code&gt;kubectl describe&lt;/code&gt;ã—ãŸã‚‰TokenãŒè¦‹ã‚ŒãŸã€‚
(Dataã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®&lt;code&gt;token&lt;/code&gt;ã®ã¨ã“ã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl -n kube-system describe secret deployment-controller-token-86bp9
Name:         deployment-controller-token-86bp9
Namespace:    kube-system
Labels:       &amp;lt;none&amp;gt;
Annotations:  kubernetes.io/service-account.name=deployment-controller
              kubernetes.io/service-account.uid=17fc5207-b627-11e7-9867-000c2938deae

Type:  kubernetes.io/service-account-token

Data
====
ca.crt:     1025 bytes
namespace:  11 bytes
token:      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZXBsb3ltZW50LWNvbnRyb2xsZXItdG9rZW4tODZicDkiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVwbG95bWVudC1jb250cm9sbGVyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiMTdmYzUyMDctYjYyNy0xMWU3LTk4NjctMDAwYzI5MzhkZWFlIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRlcGxveW1lbnQtY29udHJvbGxlciJ9.ZGV9XDd-GQjAwRuLKpdsWL_dTeF0Mr_2gF117OW4BhEuLwPujnsfOuysAQ-DUtNOp1NHKGitlfxjh6fKo4tFsdwLVJWrRK6i4YH1Mm2No7Sheks7IQn1FnwSmr7yCuvjlHD2e4RpZH0wupOFoY7FHntilhOWbXTJzJzi7TozLX02EKbkVGAsvch3LZ6p8jmUH5hr8DdKc4jbmTRp86SOiFS4_-TJ3RtAHCxiioAuKzXm3-rAWdeGLLcKrM2pAFSAGaBNu8MO5BZlAi6h3Xt4x-8-1ZXs4mudtJiECvjB-XIwiwzhpq8wIPZvvQQ-f1khixOyk1RfIXRJhIE5Gqvi8g
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ã§Tokenã‚’é¸æŠã—ã€
ã“ã®ã€&lt;code&gt;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZXBsb3ltZW50LWNvbnRyb2xsZXItdG9rZW4tODZicDkiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVwbG95bWVudC1jb250cm9sbGVyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiMTdmYzUyMDctYjYyNy0xMWU3LTk4NjctMDAwYzI5MzhkZWFlIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRlcGxveW1lbnQtY29udHJvbGxlciJ9.ZGV9XDd-GQjAwRuLKpdsWL_dTeF0Mr_2gF117OW4BhEuLwPujnsfOuysAQ-DUtNOp1NHKGitlfxjh6fKo4tFsdwLVJWrRK6i4YH1Mm2No7Sheks7IQn1FnwSmr7yCuvjlHD2e4RpZH0wupOFoY7FHntilhOWbXTJzJzi7TozLX02EKbkVGAsvch3LZ6p8jmUH5hr8DdKc4jbmTRp86SOiFS4_-TJ3RtAHCxiioAuKzXm3-rAWdeGLLcKrM2pAFSAGaBNu8MO5BZlAi6h3Xt4x-8-1ZXs4mudtJiECvjB-XIwiwzhpq8wIPZvvQQ-f1khixOyk1RfIXRJhIE5Gqvi8g&lt;/code&gt;ã‚’å…¥åŠ›ã—ãŸã‚‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã§ãã¦ã€Goslingsã®Deploymentã®æƒ…å ±ãŒè¦‹ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/deploy.png&#34; alt=&#34;deploy&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Podã‚‚è¦‹ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/pods.png&#34; alt=&#34;pods&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‘ã©Serviceã¯è¦‹ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/service.png&#34; alt=&#34;service&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å„ç”»é¢ã§ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã®ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ã‚‚å‡ºã¦ã„ã¦ã€&lt;code&gt;deployment-controller&lt;/code&gt;ãƒ¦ãƒ¼ã‚¶ã§è¦‹ã‚Œã‚‹ç¯„å›²ã¯ã‚ã¾ã‚Šåºƒããªã„ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;dashboardã¸adminæ¨©é™ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&#34;&gt;Dashboardã¸Adminæ¨©é™ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&lt;/h2&gt;

&lt;p&gt;Dashboardã®Podã®Service Accountã§ã‚ã‚‹&lt;code&gt;kubernetes-dashboard&lt;/code&gt;ã«Adminæ¨©é™ã‚’ä»˜ã‘ã¦ã‚„ã£ã¦ã€ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ã§SKIPã‚’æŠ¼ã™ã¨ãªã‚“ã§ã‚‚è¦‹ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã®ã§æœ¬ç•ªã§ã¯NGè¨­å®šã ã‘ã©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;cluster-admin&lt;/code&gt;ã¨ã„ã†ClusterRoleãŒã‚ã£ã¦ã€ã“ã‚Œã‚’&lt;code&gt;kubernetes-dashboard&lt;/code&gt;ã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ClusterRoleBindingã‚’ä½œã£ã¦ã‚„ã‚Œã°ã„ã„ã€‚&lt;/p&gt;

&lt;p&gt;ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªYAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: kubernetes-dashboard
  labels:
    k8s-app: kubernetes-dashboard
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: kubernetes-dashboard
  namespace: kube-system
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;kubectl&lt;/code&gt;ã§æŠ•ã’ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl create -f dashboard-admin.yml
clusterrolebinding &amp;quot;kubernetes-dashboard&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã—ãŸã‚‰Serviceã‚‚è¦‹ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/service-admin.png&#34; alt=&#34;service-admin&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã¤ã„ã§ã«HWãƒªã‚½ãƒ¼ã‚¹æƒ…å ±ã‚‚è¦‹ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/resources.png&#34; alt=&#34;resources&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æº€è¶³ã—ãŸã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetes1.8ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚kubeadmã§ã€‚</title>
          <link>https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/</link>
          <pubDate>Sat, 21 Oct 2017 10:42:46 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹&lt;/a&gt;ã€ã§Minikubeã‚’ã‚„ã£ãŸã‚“ã ã‘ã©ã€ã‚‚ã†ä¸€æ­©ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã¹ãã€&lt;a href=&#34;https://kubernetes.io/docs/admin/kubeadm/&#34;&gt;kubeadm&lt;/a&gt;ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã§ã¿ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubeadmã¨ã¯&#34;&gt;kubeadmã¨ã¯&lt;/h2&gt;

&lt;p&gt;kubeadm(ã‚­ãƒ¥ãƒ¼ãƒ–ã‚¢ãƒ€ãƒ )ã¯Kubernetesã«å«ã¾ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ç°¡å˜ã«æ§‹ç¯‰ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚
Kubernetes 1.4ã§è¿½åŠ ã•ã‚Œã€Kubernetes 1.8ã®æ™‚ç‚¹ã§ã¾ã ãƒ™ãƒ¼ã‚¿ã§ã€æœ¬ç•ªç’°å¢ƒã«ã¯ä½¿ã‚ãªã„ã§ã¨ãªã£ã¦ã„ã‚‹ã€‚
Qiitaã®ã€Œ&lt;a href=&#34;https://qiita.com/helix_kaz/items/9c4a83532f949d8a94ef&#34;&gt;kubeadmãŒä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã‹ã¿ã¦ã¿ãŸ&lt;/a&gt;ã€ã¨ã„ã†è¨˜äº‹ãŒã€ä¸­ã§ã©ã‚“ãªå‹•ä½œã‚’ã—ã¦ã‚‹ã‹ã‚’è§£èª¬ã—ã¦ã„ã¦å‚è€ƒã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ç”¨æ„Ÿã‹ã‚‰ã™ã‚‹ã¨ã€&lt;a href=&#34;https://docs.docker.com/engine/swarm/&#34;&gt;Dockerã®Swarmãƒ¢ãƒ¼ãƒ‰&lt;/a&gt;ã§ã®ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰ã®å®¹æ˜“ã•ã‚’Kubernetesã«å–ã‚Šè¾¼ã‚€ã“ã¨ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹æ°—ãŒã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãƒãƒƒãƒˆã§è¦‹ã‹ã‘ãŸè©•åˆ¤ã ã¨ã€ç¢ºã‹ã«ç°¡å˜ã«ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰ã§ãã¦ç´ æ™´ã‚‰ã—ã„ã‘ã©ã€TLSã®è¨¼æ˜æ›¸ç”Ÿæˆãªã©ã€ç´°ã‹ãåˆ¶å¾¡ã§ããªãã¦å›°ã‚‹ã¨ã“ã‚ãŒã‚ã£ã¦ã€ã‚„ã¯ã‚Šæœ¬ç•ªã«ä½¿ãˆã‚‹ãƒ¬ãƒ™ãƒ«ã§ã¯ãªã„ã¨ã®ã“ã¨ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ã‚ã¨ã«ã‹ãè©¦ã—ã¦ã¿ã‚‹ä¾¡å€¤ã¯ã‚ã‚ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubeadmã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;kubeadmã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/install-kubeadm/&#34;&gt;Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã«å¾“ã£ã¦kubeadmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ç‰ˆã®1.8.1ã€‚&lt;/p&gt;

&lt;h3 id=&#34;vmä½œæˆ&#34;&gt;VMä½œæˆ&lt;/h3&gt;

&lt;p&gt;kubeadmã®ã‚µãƒãƒ¼ãƒˆOSã¯ã€Ubuntu 16.04+ã€Debian 9ã€CentOS 7ã€RHEL 7ã€Fedora 25/26ã€HypriotOS v1.0.1+ã¨ãªã£ã¦ã„ã‚‹ã€‚
æ…£ã‚Œã¦ã„ã‚‹CentOS 7ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚
(HypriotOSã£ã¦ãªã‚“ã ã‚ã†?)&lt;/p&gt;

&lt;p&gt;è‡ªå‰ã®ãƒãƒ¼ãƒˆPCã®Windows 10 x64 Home Editionä¸Šã®VMware Player 12ã®VMã«CentOS 7ã‚’å…¥ã‚ŒãŸã€‚
ãƒ¡ãƒ¢ãƒªã¯1GBä»¥ä¸ŠãŒè¦ä»¶ãªã®ã§ã€å‘³ã‚’ä»˜ã‘ã¦1.4GBã§ã€‚
VMé–“ã§é€šä¿¡ã§ãã‚‹ã“ã¨ã£ã¦è¦ä»¶ãŒã‚ã£ãŸã‘ã©ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚‚å¿…è¦ãªã¯ãšãªã®ã§ã€NICã¯NATã®ã‚„ã¤ã§ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®VMã¯Masterã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;osè¨­å®š&#34;&gt;OSè¨­å®š&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/install-kubeadm/#check-required-ports&#34;&gt;KubernetesãŒä½¿ã†ãƒãƒ¼ãƒˆ&lt;/a&gt;ã‚’ã„ã‚ã„ã‚é–‹ã‘ãªã‘ã‚Œã°ã„ã‘ãªã„ã‚“ã ã‘ã©ã€ã‚ã‚“ã©ã„ã®ã§firewalldã‚’ç„¡åŠ¹ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# systemctl stop firewalld
[root@localhost ~]# systemctl disable firewalld
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãªã‚“ã¨ãªãIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’DHCPã‹ã‚‰é™çš„å‰²ã‚Šå½“ã¦ã«ã€‚(192.168.171.200)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# nmcli c modify ens33 ipv4.method manual
[root@k8s-master ~]# nmcli c modify ens33 ipv4.addresses 192.168.171.200/24
[root@k8s-master ~]# nmcli c modify ens33 ipv4.dns 192.168.171.2
[root@k8s-master ~]# nmcli c modify ens33 ipv4.gateway 192.168.171.2
[root@k8s-master ~]# systemctl restart network
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãƒ›ã‚¹ãƒˆåã‚’localhost.localdomainã‹ã‚‰k8s-masterã«å¤‰æ›´ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# hostnamectl set-hostname k8s-master
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ­ã‚°ã‚¤ãƒ³ã§åæ˜ ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;/etc/hosts&lt;/code&gt;ã‚’ç·¨é›†ã—ã¦ã€k8s-masterã®ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã€‚
ã‚ã¨ã§ä½œã‚‹ã‚‚ã†ä¸€ã¤ã®VMã€k8s-nodeã®ã»ã†ã‚‚ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã€‚
(ã“ã‚Œã¯ã ã‚ã ã£ãŸã£ã½ã„ã€‚è©³ç´°ã¯å¾Œè¿°ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹æˆã™ã‚‹ãƒãƒ¼ãƒ‰ã¯ã€ä¸€æ„ã®MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¨product_uuidã‚’æŒã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„ã€‚
KubernetesãŒãã‚Œã‚‰ã§ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒãƒ¼ãƒ‰ã‚’åŒºåˆ¥ã—ã¦ã‚‹ã®ã§ã€‚&lt;/p&gt;

&lt;p&gt;MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¯&lt;code&gt;ip link&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# ip link
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: ens33: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000
    link/ether 00:0c:29:38:de:ae brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;product_uuidã¯ã€&lt;a href=&#34;https://ja.wikipedia.org/wiki/SMBIOS&#34;&gt;SMBIOS&lt;/a&gt;ã¨ã„ã†ã€PCå›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãƒ»å‚ç…§ã™ã‚‹ãŸã‚ã®ä»•æ§˜ãŒã‚ã£ã¦ã€ãã‚Œã«å¾“ã£ã¦ä¿å­˜ã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ ã®è­˜åˆ¥å­ã‚‰ã—ã„ã€‚
product_uuidã¯&lt;code&gt;dmidecode&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# dmidecode -s system-uuid
58114D56-A744-3610-C3C5-9B15A838DEAE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;kubeletãŒã¡ã‚ƒã‚“ã¨å‹•ããŸã‚ã«ã¯swapã‚’ç„¡åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# swapoff -a
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã‚ˆããªã‹ã£ãŸã€‚è©³ç´°ã¯å¾Œè¿°ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ebtablesã¨ethtoolã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# yum install -y ebtables ethtool
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerã‚‚å…¥ã‚Œãªã„ã¨ã€‚
v1.12ãŒæ¨å¥¨ã§ã€v1.11ã‹v1.13ã§ã‚‚ã„ã„ã€‚
é©å½“ã«å…¥ã‚ŒãŸã‚‰v1.12.6ã ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# yum install -y docker
[root@k8s-master ~]# systemctl enable docker &amp;amp;&amp;amp; systemctl start docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ãŒæ©Ÿèƒ½ã™ã‚‹è¦ä»¶ã¨ã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠãŒãƒ›ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ãã®ãŸã‚ã«ã¯ç¾çŠ¶ã€SELinuxã‚’ç„¡åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# setenforce 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚‚ã‚ˆããªã‹ã£ãŸã€‚è©³ç´°ã¯å¾Œè¿°ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;RHELç³»ã®å ´åˆã€iptablesãŒãƒã‚¤ãƒ‘ã‚¹ã•ã‚Œã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒå¤‰ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹å•é¡ŒãŒã‚ã‚‹ãŸã‚ã€&lt;code&gt;net.bridge.bridge-nf-call-iptables&lt;/code&gt;ã‚’1ã«ã‚»ãƒƒãƒˆã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# cat &amp;lt;&amp;lt;EOF &amp;gt;  /etc/sysctl.d/k8s.conf
&amp;gt; net.bridge.bridge-nf-call-ip6tables = 1
&amp;gt; net.bridge.bridge-nf-call-iptables = 1
&amp;gt; EOF
[root@k8s-master ~]# sysctl --system
* Applying /usr/lib/sysctl.d/00-system.conf ...
net.bridge.bridge-nf-call-ip6tables = 0
net.bridge.bridge-nf-call-iptables = 0
net.bridge.bridge-nf-call-arptables = 0
* Applying /usr/lib/sysctl.d/10-default-yama-scope.conf ...
kernel.yama.ptrace_scope = 0
* Applying /usr/lib/sysctl.d/50-default.conf ...
kernel.sysrq = 16
kernel.core_uses_pid = 1
net.ipv4.conf.default.rp_filter = 1
net.ipv4.conf.all.rp_filter = 1
net.ipv4.conf.default.accept_source_route = 0
net.ipv4.conf.all.accept_source_route = 0
net.ipv4.conf.default.promote_secondaries = 1
net.ipv4.conf.all.promote_secondaries = 1
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /usr/lib/sysctl.d/99-docker.conf ...
fs.may_detach_mounts = 1
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/k8s.conf ...
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
* Applying /etc/sysctl.conf ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Cgroup Driverã‚’ã€Dockerã¨kubeletã¨ã®é–“ã§ä¸€è‡´ã•ã›ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# cat /etc/systemd/system/kubelet.service.d/10-kubeadm.conf | grep KUBELET_CGROUP_ARGS
Environment=&amp;quot;KUBELET_CGROUP_ARGS=--cgroup-driver=systemd&amp;quot;
ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CADVISOR_ARGS $KUBELET_CGROUP_ARGS $KUBELET_CERTIFICATE_ARGS $KUBELET_EXTRA_ARGS
[root@k8s-master ~]# docker info |grep -i cgroup
 WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.
Cgroup Driver: systemd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã©ã£ã¡ã‚‚systemdã ã£ãŸã®ã§å•é¡Œãªã—ã€‚
(é•ã£ã¦ãŸã‚‰&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#troubleshooting&#34;&gt;&lt;code&gt;KUBELET_CGROUP_ARGS&lt;/code&gt;ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹&lt;/a&gt;ã€‚)&lt;/p&gt;

&lt;h3 id=&#34;kubelet-kubeadm-kubectlã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;kubeletã€kubeadmã€kubectlã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;

&lt;p&gt;ã“ã“ã§ã‚„ã£ã¨kubeadmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
kubeletã¨kubectlã‚‚ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšYUMãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/yum.repos.d/kubernetes.repo
&amp;gt; [kubernetes]
&amp;gt; name=Kubernetes
&amp;gt; baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
&amp;gt; enabled=1
&amp;gt; gpgcheck=1
&amp;gt; repo_gpgcheck=1
&amp;gt; gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg
&amp;gt;         https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
&amp;gt; EOF
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# yum install kubelet kubeadm kubectl
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€kubeletã‚’ã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# systemctl enable kubelet &amp;amp;&amp;amp; systemctl start kubelet
Created symlink from /etc/systemd/system/multi-user.target.wants/kubelet.service to /etc/systemd/system/kubelet.service.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã“ã§VMã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ã¨ã£ã¦ãŠã„ã¦ã€å¾Œã§Nodeã‚’è¿½åŠ ã™ã‚‹ã¨ãã«ä½¿ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;masteræ§‹ç¯‰&#34;&gt;Masteræ§‹ç¯‰&lt;/h2&gt;

&lt;p&gt;Masterã¯&lt;code&gt;kubeadm init&lt;/code&gt;ã§æ§‹ç¯‰ã§ãã‚‹ã€‚
&lt;code&gt;--apiserver-advertise-address&lt;/code&gt;ã§kube-apiserverãŒlistenã™ã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã™ã¹ã—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm init --apiserver-advertise-address=192.168.171.200
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[init] Using Kubernetes version: v1.8.1
[init] Using Authorization modes: [Node RBAC]
[preflight] Running pre-flight checks
[preflight] WARNING: Running with swap on is not supported. Please disable swap or set kubelet&#39;s --fail-swap-on flag to false.
[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)
[certificates] Generated ca certificate and key.
[certificates] Generated apiserver certificate and key.
[certificates] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.171.200]
[certificates] Generated apiserver-kubelet-client certificate and key.
[certificates] Generated sa key and public key.
[certificates] Generated front-proxy-ca certificate and key.
[certificates] Generated front-proxy-client certificate and key.
[certificates] Valid certificates and keys now exist in &amp;quot;/etc/kubernetes/pki&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;admin.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;kubelet.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;controller-manager.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;scheduler.conf&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-apiserver to &amp;quot;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-controller-manager to &amp;quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-scheduler to &amp;quot;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;quot;
[etcd] Wrote Static Pod manifest for a local etcd instance to &amp;quot;/etc/kubernetes/manifests/etcd.yaml&amp;quot;
[init] Waiting for the kubelet to boot up the control plane as Static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;
[init] This often takes around a minute; or longer if the control plane images have to be pulled.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.

Unfortunately, an error has occurred:
        timed out waiting for the condition

This error is likely caused by that:
        - The kubelet is not running
        - The kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)
        - There is no internet connection; so the kubelet can&#39;t pull the following control plane images:
                - gcr.io/google_containers/kube-apiserver-amd64:v1.8.1
                - gcr.io/google_containers/kube-controller-manager-amd64:v1.8.1
                - gcr.io/google_containers/kube-scheduler-amd64:v1.8.1

You can troubleshoot this for example with the following commands if you&#39;re on a systemd-powered system:
        - &#39;systemctl status kubelet&#39;
        - &#39;journalctl -xeu kubelet&#39;
couldn&#39;t initialize a Kubernetes cluster
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªã‚“ã‹å¤±æ•—ã—ãŸã€‚
&lt;code&gt;getsockopt: connection refused.&lt;/code&gt;ã£ã¦ã®ãŒãŸãã•ã‚“å‡ºã¦ã‚‹ã€‚
ã‚°ã‚°ã‚‹ã¨ã€swapãŒã‚ã‚„ã—ã„ã€‚
ç¢ºèªã—ã¦ã¿ãŸã‚‰ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# swapon -s
Filename                                Type            Size    Used    Priority
/dev/dm-1                               partition       2097148 0       -1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¡åŠ¹ã«ãªã£ã¦ãªã„ã€‚
&lt;code&gt;swapoff -a&lt;/code&gt;ã§swapç„¡åŠ¹ã«ã—ã¦ã‚‚ã€OSå†èµ·å‹•ã—ãŸã‚‰ã‚‚ã¨ã«æˆ»ã£ã¦ã—ã¾ã†ã®ã‹ã€‚&lt;/p&gt;

&lt;p&gt;æ°¸ç¶šçš„ã«ç„¡åŠ¹ã«ã™ã‚‹ãŸã‚ã€&lt;code&gt;/etc/fstab&lt;/code&gt;ã‚’ç·¨é›†ã—ã¦ã€ä»¥ä¸‹ã®è¡Œã‚’å‰Šé™¤ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;/dev/mapper/centos-swap swap                    swap    defaults        0 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€OSãƒªãƒ–ãƒ¼ãƒˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;kubeadm initã‚’ã‚„ã‚Šç›´ã™å‰ã«ã€ã„ã£ãŸã‚“&lt;code&gt;kubeadm reset&lt;/code&gt;ã—ã¦åˆæœŸåŒ–ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm reset
[preflight] Running pre-flight checks
[reset] Stopping the kubelet service
[reset] Unmounting mounted directories in &amp;quot;/var/lib/kubelet&amp;quot;
[reset] Removing kubernetes-managed containers
[reset] Deleting contents of stateful directories: [/var/lib/kubelet /etc/cni/net.d /var/lib/dockershim /var/run/kubernetes /var/lib/etcd]
[reset] Deleting contents of config directories: [/etc/kubernetes/manifests /etc/kubernetes/pki]
[reset] Deleting files: [/etc/kubernetes/admin.conf /etc/kubernetes/kubelet.conf /etc/kubernetes/controller-manager.conf /etc/kubernetes/scheduler.conf]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;2å›ç›®ã®&lt;code&gt;kubeadm init&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm init --apiserver-advertise-address=192.168.171.200
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[init] Using Kubernetes version: v1.8.1
[init] Using Authorization modes: [Node RBAC]
[preflight] Running pre-flight checks
[preflight] Starting the kubelet service
[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)
[certificates] Generated ca certificate and key.
[certificates] Generated apiserver certificate and key.
[certificates] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.171.200]
[certificates] Generated apiserver-kubelet-client certificate and key.
[certificates] Generated sa key and public key.
[certificates] Generated front-proxy-ca certificate and key.
[certificates] Generated front-proxy-client certificate and key.
[certificates] Valid certificates and keys now exist in &amp;quot;/etc/kubernetes/pki&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;admin.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;kubelet.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;controller-manager.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;scheduler.conf&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-apiserver to &amp;quot;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-controller-manager to &amp;quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-scheduler to &amp;quot;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;quot;
[etcd] Wrote Static Pod manifest for a local etcd instance to &amp;quot;/etc/kubernetes/manifests/etcd.yaml&amp;quot;
[init] Waiting for the kubelet to boot up the control plane as Static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;
[init] This often takes around a minute; or longer if the control plane images have to be pulled.

Unfortunately, an error has occurred:
        timed out waiting for the condition

This error is likely caused by that:
        - The kubelet is not running
        - The kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)
        - There is no internet connection; so the kubelet can&#39;t pull the following control plane images:
                - gcr.io/google_containers/kube-apiserver-amd64:v1.8.1
                - gcr.io/google_containers/kube-controller-manager-amd64:v1.8.1
                - gcr.io/google_containers/kube-scheduler-amd64:v1.8.1

You can troubleshoot this for example with the following commands if you&#39;re on a systemd-powered system:
        - &#39;systemctl status kubelet&#39;
        - &#39;journalctl -xeu kubelet&#39;
couldn&#39;t initialize a Kubernetes cluster
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãŸé•ã†æ„Ÿã˜ã®ã‚¨ãƒ©ãƒ¼ã€‚
ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¾“ã£ã¦ã€&lt;code&gt;journalctl -xeu kubelet&lt;/code&gt;ã§ãƒ­ã‚°ã‚’è¦‹ã¦ã¿ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Post https://192.168.171.200:6443/api/v1/nodes: dial tcp 192.168.171.200:6443: getsockopt: connection refused
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/kubeadm/issues/228&#34;&gt;kubeadmã«Issue&lt;/a&gt;ã«ã“ã®ã‚¨ãƒ©ãƒ¼ãŒè¼‰ã£ã¦ã„ã‚‹ã€‚
åŸå› ã¯ã„ã‚ã„ã‚ã‚ã‚‹ã£ã½ã„ã‘ã©ã€ãã®ã²ã¨ã¤ã«SELinuxãŒã‚ã£ãŸã®ã§ç¢ºèªã—ã¦ã¿ãŸã‚‰ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# getenforce
Enforcing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;SELinuxãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ãŸã€‚
&lt;code&gt;setenforce 0&lt;/code&gt;ã‚‚OSå†èµ·å‹•ã§å…ƒã«æˆ»ã£ã¦ã—ã¾ã£ãŸæ¨¡æ§˜ã€‚&lt;/p&gt;

&lt;p&gt;æ°¸ç¶šçš„ã«SELinuxã‚’ç„¡åŠ¹ã«ã™ã‚‹ãŸã‚ã€&lt;code&gt;/etc/selinux/config&lt;/code&gt;ã‚’ç·¨é›†ã—ã¦ã€&lt;code&gt;SELINUX&lt;/code&gt;ã‚’&lt;code&gt;disabled&lt;/code&gt;ã«ã—ã¦ã€OSå†èµ·å‹•ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€&lt;code&gt;kubeadm reset&lt;/code&gt;ã—ãŸã‚‰3å›ç›®ã®&lt;code&gt;kubeadm init&lt;/code&gt;ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm init --apiserver-advertise-address=192.168.171.200
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[init] Using Kubernetes version: v1.8.1
[init] Using Authorization modes: [Node RBAC]
[preflight] Running pre-flight checks
[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)
[certificates] Generated ca certificate and key.
[certificates] Generated apiserver certificate and key.
[certificates] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.171.200]
[certificates] Generated apiserver-kubelet-client certificate and key.
[certificates] Generated sa key and public key.
[certificates] Generated front-proxy-ca certificate and key.
[certificates] Generated front-proxy-client certificate and key.
[certificates] Valid certificates and keys now exist in &amp;quot;/etc/kubernetes/pki&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;admin.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;kubelet.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;controller-manager.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;scheduler.conf&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-apiserver to &amp;quot;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-controller-manager to &amp;quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-scheduler to &amp;quot;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;quot;
[etcd] Wrote Static Pod manifest for a local etcd instance to &amp;quot;/etc/kubernetes/manifests/etcd.yaml&amp;quot;
[init] Waiting for the kubelet to boot up the control plane as Static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;
[init] This often takes around a minute; or longer if the control plane images have to be pulled.
[apiclient] All control plane components are healthy after 99.510003 seconds
[uploadconfig]?Storing the configuration used in ConfigMap &amp;quot;kubeadm-config&amp;quot; in the &amp;quot;kube-system&amp;quot; Namespace
[markmaster] Will mark node k8s-master as master by adding a label and a taint
[markmaster] Master k8s-master tainted and labelled with key/value: node-role.kubernetes.io/master=&amp;quot;&amp;quot;
[bootstraptoken] Using token: 957b7b.eaaf0cb656edba7b
[bootstraptoken] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstraptoken] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstraptoken] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstraptoken] Creating the &amp;quot;cluster-info&amp;quot; ConfigMap in the &amp;quot;kube-public&amp;quot; namespace
[addons] Applied essential addon: kube-dns
[addons] Applied essential addon: kube-proxy

Your Kubernetes master has initialized successfully!

To start using your cluster, you need to run (as a regular user):

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run &amp;quot;kubectl apply -f [podnetwork].yaml&amp;quot; with one of the options listed at:
  http://kubernetes.io/docs/admin/addons/

You can now join any number of machines by running the following on each node
as root:

  kubeadm join --token 957b7b.eaaf0cb656edba7b 192.168.171.200:6443 --discovery-token-ca-cert-hash sha256:7d16ade2b651ebac573368b1b4db5c0f1236979584e61833efe90a96ff34ae2e
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚
ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€å¾Œã«æ›¸ã‹ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’ã€å¾Œã§Nodeã‚’è¿½åŠ ã™ã‚‹ã¨ãã«ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;kubectlãŒã“ã®VMä¸Šã®kube-apiserverã¨è©±ã›ã‚‹ã‚ˆã†ã«ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®šã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# mkdir -p $HOME/.kube
[root@k8s-master ~]# cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
[root@k8s-master ~]# chown $(id -u):$(id -g) $HOME/.kube/config
[root@k8s-master ~]# kubectl get nodes
NAME         STATUS     ROLES     AGE       VERSION
k8s-master   NotReady   master    16m       v1.8.1
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ã‚ªãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ã‚ªãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;

&lt;p&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®å‰ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;å¤šãã®é¸æŠè‚¢ãŒã‚ã‚‹ãªã‹ã€æœ‰åãª&lt;a href=&#34;https://github.com/coreos/flannel&#34;&gt;Flannel&lt;/a&gt;ã«ã—ã‚ˆã†ã¨æ€ã£ãŸã‘ã©ã€Flannelã‚’ä½¿ã†ã«ã¯
&lt;code&gt;kubeadm init&lt;/code&gt;æ™‚ã«&lt;code&gt;--pod-network-cidr=10.244.0.0/16&lt;/code&gt;ã‚’æ¸¡ã•ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã€‚
ã‚„ã‚Šç›´ã™ã®ã¯é¢å€’ãªã®ã§ä»£ã‚ã‚Šã«&lt;a href=&#34;https://www.weave.works/docs/net/latest/kube-addon/&#34;&gt;Weave Net&lt;/a&gt;ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# export kubever=$(kubectl version | base64 | tr -d &#39;\n&#39;)
[root@k8s-master ~]# kubectl apply -f &amp;quot;https://cloud.weave.works/k8s/net?k8s-version=$kubever&amp;quot;
serviceaccount &amp;quot;weave-net&amp;quot; created
clusterrole &amp;quot;weave-net&amp;quot; created
clusterrolebinding &amp;quot;weave-net&amp;quot; created
daemonset &amp;quot;weave-net&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ã‚ªãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚
ã—ã°ã‚‰ãã—ã¦ã€&lt;code&gt;kube-dns&lt;/code&gt;ã®PodãŒèµ·å‹•ã—ã¦ã„ã‚Œã°(i.e. STATUSãŒRunningã«ãªã£ã¦ã‚Œã°)OKã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubectl get pods --all-namespaces
NAMESPACE     NAME                                 READY     STATUS    RESTARTS   AGE
kube-system   etcd-k8s-master                      1/1       Running   0          1m
kube-system   kube-apiserver-k8s-master            1/1       Running   0          1m
kube-system   kube-controller-manager-k8s-master   1/1       Running   0          1m
kube-system   kube-dns-545bc4bfd4-xtlnh            3/3       Running   0          6m
kube-system   kube-proxy-922wk                     1/1       Running   0          6m
kube-system   kube-scheduler-k8s-master            1/1       Running   0          1m
kube-system   weave-net-s2kkw                      2/2       Running   0          2m
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;masterã«podã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã›ã‚‹è¨­å®š&#34;&gt;Masterã«Podã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã›ã‚‹è¨­å®š&lt;/h3&gt;

&lt;p&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®éƒ½åˆã§Masterã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‹•ãNodeã«ã¯PodãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œãªã„ã€‚
ã‘ã©ã€VM2å€‹ã§Podã‚’åˆ†æ•£ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ãŸã„ã®ã§ã€ã“ã®ç¸›ã‚Šã‚’å¤–ã—ã¦ãŠãã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubectl taint nodes --all node-role.kubernetes.io/master-
node &amp;quot;k8s-master&amp;quot; untainted
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šã§Masterã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯å®Œäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;nodeè¿½åŠ &#34;&gt;Nodeè¿½åŠ &lt;/h2&gt;

&lt;p&gt;æ¬¡ã«Nodeã‚’ã²ã¨ã¤è¿½åŠ ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;k8s-masterã§&lt;code&gt;kubeadm init&lt;/code&gt;ã™ã‚‹ã¾ãˆã«æ’®ã£ãŸã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã€ãƒ›ã‚¹ãƒˆåã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¤‰æ›´ã—ã€ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹Nodeã®ãƒã‚·ãƒ³(k8s-node)ã«ã™ã‚‹ã€‚
ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸã‚‰MACã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚product_uuidã‚‚å¤‰ã‚ã£ãŸã®ã§ã€å•é¡Œãªãä½¿ãˆãã†ã€‚&lt;/p&gt;

&lt;p&gt;k8s-nodeã‚’ã‚¯ãƒ©ã‚¹ã‚¿ã«è¿½åŠ ã™ã‚‹ã«ã¯ã€ã“ã®VMä¸Šã§ã€&lt;code&gt;kubeadm init&lt;/code&gt;æˆåŠŸæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€å¾Œã«è¡¨ç¤ºã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰(i.e. &lt;code&gt;kubeadm join&lt;/code&gt;)ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-node ~]# kubeadm join --token 957b7b.eaaf0cb656edba7b 192.168.171.200:6443 --discovery-token-ca-cert-hash sha256:7d16ade2b651ebac573368b1b4db5c0f1236979584e61833efe90a96ff34ae2e
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[preflight] Running pre-flight checks
[discovery] Trying to connect to API Server &amp;quot;192.168.171.200:6443&amp;quot;
[discovery] Created cluster-info discovery client, requesting info from &amp;quot;https://192.168.171.200:6443&amp;quot;
[discovery] Requesting info from &amp;quot;https://192.168.171.200:6443&amp;quot; again to validate TLS against the pinned public key
[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server &amp;quot;192.168.171.200:6443&amp;quot;
[discovery] Successfully established connection with API Server &amp;quot;192.168.171.200:6443&amp;quot;
[bootstrap] Detected server version: v1.8.1
[bootstrap] The server supports the Certificates API (certificates.k8s.io/v1beta1)

Node join complete:
* Certificate signing request sent to master and response
  received.
* Kubelet informed of new secure connection details.

Run &#39;kubectl get nodes&#39; on the master to see this machine join.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚
k8s-masterã§Nodeã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubectl get nodes
NAME         STATUS    ROLES     AGE       VERSION
k8s-master   Ready     master    42m       v1.8.1
k8s-node     Ready     &amp;lt;none&amp;gt;    45s       v1.8.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;k8s-masterã‚‚k8s-nodeã‚‚Readyã€‚&lt;/p&gt;

&lt;h2 id=&#34;vmãƒ›ã‚¹ãƒˆã®kubectlã®è¨­å®š&#34;&gt;VMãƒ›ã‚¹ãƒˆã®kubectlã®è¨­å®š&lt;/h2&gt;

&lt;p&gt;kubectlã¯kube-apiserverã®Web APIã‚’å‘¼ã¶ã‚³ãƒãƒ³ãƒ‰ãªã®ã§ã€æ¥ç¶šå…ˆã•ãˆã¡ã‚ƒã‚“ã¨è¨­å®šã™ã‚Œã°Masterã®ãƒã‚·ãƒ³ä¸Šã§ãªãã¦ã‚‚ä½¿ãˆã‚‹ã€‚
VMã®ãƒ›ã‚¹ãƒˆ(i.e. Windows 10 PC)ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®æ¥ç¶šå…ˆæƒ…å ±ã¯ã€&lt;code&gt;kubeadm init&lt;/code&gt;æ™‚ã«ç”Ÿæˆã•ã‚ŒãŸ&lt;code&gt;/etc/kubernetes/admin.conf&lt;/code&gt;ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ãƒ›ã‚¹ãƒˆã«æŒã£ã¦ãã¦kubectlã«æ¸¡ã—ã¦ã‚„ã‚Œã°ã„ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get nodes
NAME         STATUS    ROLES     AGE       VERSION
k8s-master   Ready     master    51m       v1.8.1
k8s-node     Ready     &amp;lt;none&amp;gt;    10m       v1.8.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;admin.confã‚’&lt;code&gt;%UserProfile%\.kube\&lt;/code&gt;ã®ä¸‹ã«&lt;code&gt;config&lt;/code&gt;ã¨ã„ã†åå‰ã§ç½®ã„ã¦ã‚„ã‚‹ã¨ã€&lt;code&gt;--kubeconfig&lt;/code&gt;ã§æŒ‡å®šã—ãªãã¦ã‚‚èª­ã‚“ã§ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;goslingsãƒ‡ãƒ—ãƒ­ã‚¤&#34;&gt;Goslingsãƒ‡ãƒ—ãƒ­ã‚¤&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/#%E7%95%AA%E5%A4%96%E7%B7%A82-%E5%91%BD%E4%BB%A4%E7%9A%84%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9A&#34;&gt;ã€ŒKubernetesã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚‹ã€ã®ç•ªå¤–ç·¨&lt;/a&gt;ã§ä½œã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã€ä»Šå›ä½œã£ãŸã‚¯ãƒ©ã‚¹ã‚¿ã«&lt;a href=&#34;https://www.kaitoy.xyz/2016/12/11/goslings-development-memo0-intro-design/&#34;&gt;Goslings&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf create -f deploy_goslings.yml
deployment &amp;quot;goslings-sample&amp;quot; created

C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf create -f service_goslings.yml
service &amp;quot;goslings-sample&amp;quot; created

C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get po -o wide
NAME                              READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-sample-dfd84c69c-4mgh9   1/1       Running   0          12m       10.244.1.3   k8s-node
goslings-sample-dfd84c69c-cd5mm   1/1       Running   0          12m       10.244.0.3   k8s-master
goslings-sample-dfd84c69c-nwwh7   1/1       Running   0          12m       10.244.1.2   k8s-node

C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get svc
NAME              TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
goslings-sample   NodePort    10.109.174.204   &amp;lt;none&amp;gt;        8080:30004/TCP   7m
kubernetes        ClusterIP   10.96.0.1        &amp;lt;none&amp;gt;        443/TCP          1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ™®é€šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããŸã€‚
ãƒ¬ãƒ—ãƒªã‚«3ã¤ãŒã¡ã‚ƒã‚“ã¨2ã¤ã®Nodeã«åˆ†æ•£ã•ã‚Œã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;k8s-masterã®IPã‚¢ãƒ‰ãƒ¬ã‚¹( &lt;a href=&#34;http://192.168.171.200:30004/&#34;&gt;http://192.168.171.200:30004/&lt;/a&gt; )ã§ã‚‚k8s-nodeã®IPã‚¢ãƒ‰ãƒ¬ã‚¹( &lt;a href=&#34;http://192.168.171.201:30004/&#34;&gt;http://192.168.171.201:30004/&lt;/a&gt; )ã§ã‚‚Goslingsã«ã¤ãªã’ãŸã€‚
æ™®é€šã¯Masterã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ã†ã‚‰ã—ã„ã€‚
ãã‚Šã‚ƒãã†ã‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/build-kubernetes-cluster-by-kubeadm/goslings.png&#34; alt=&#34;goslings&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;è©¦ã—ã«k8s-nodeã®VMã‚’è½ã¨ã—ã¦ã¿ã‚‹ã€‚
k8s-nodeä¸Šã®PodãŒk8s-masterã«ç§»å‹•ã—ã¦ãã‚Œã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ãŸã‘ã©ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get po -o wide
NAME                              READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-sample-dfd84c69c-4mgh9   1/1       Running   0          55m       10.244.1.3   k8s-node
goslings-sample-dfd84c69c-cd5mm   1/1       Running   0          55m       10.244.0.3   k8s-master
goslings-sample-dfd84c69c-nwwh7   1/1       Running   0          55m       10.244.1.2   k8s-node
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªã‚“ã‹k8s-nodeã§å‹•ãç¶šã‘ã¦ã„ã‚‹ã“ã¨ã«ãªã£ã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã†ã¾ãå‹•ã„ã¦ã„ãªã„ã‚“ã ã‚ã†ã‹â€¦&lt;/p&gt;

&lt;h2 id=&#34;ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤&#34;&gt;ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’Web UIã§ç¢ºèªã§ãã‚‹ã€&lt;a href=&#34;https://github.com/kubernetes/dashboard&#34;&gt;Dashboard&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml
secret &amp;quot;kubernetes-dashboard-certs&amp;quot; created
serviceaccount &amp;quot;kubernetes-dashboard&amp;quot; created
role &amp;quot;kubernetes-dashboard-minimal&amp;quot; created
rolebinding &amp;quot;kubernetes-dashboard-minimal&amp;quot; created
deployment &amp;quot;kubernetes-dashboard&amp;quot; created
service &amp;quot;kubernetes-dashboard&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;DashboardãŒèµ·å‹•ã™ã‚‹ã¾ã§ã—ã°ã‚‰ãã¾ã£ã¦ã‹ã‚‰ã€&lt;code&gt;kubectl proxy&lt;/code&gt;ã—ã¦ã€
&lt;code&gt;http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/&lt;/code&gt;ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¤ãªã’ã°GUIãŒé–‹ãã¯ãšãªã‚“ã ã‘ã©ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã¤ãªãŒã‚‰ãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã†ã¾ãå‹•ã„ã¦ã„ãªã„ã‚“ã ã‚ã†ã‹â€¦&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;NICãŒNATãªã®ãŒã ã‚ã ã£ãŸã‹ã‚‚ã¨æ€ã„ã€ãƒ–ãƒªãƒƒã‚¸ã«ã—ã¦ã¿ãŸã‘ã©åŒã˜çµæœã ã£ãŸã€‚
Podã®ãƒ•ã‚§ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã‚‚ã—ãªã„ã—Dashboardã‚‚é–‹ã‘ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ã¡ã‚ƒã‚“ã¨ä¸€ã¤ä¸€ã¤è‡ªåˆ†ã§æ§‹ç¯‰ã—ãªã„ã¨ã‚ˆãåˆ†ã‹ã‚‰ãªã„ãªã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã§ãµã¨æ€ã„ç«‹ã£ã¦ã€&lt;code&gt;/etd/hosts&lt;/code&gt;ã‚’ã„ã˜ã£ãŸã‚‰Dashboardã¯å‹•ã„ãŸã€‚
ãã‚Œã«ã¤ã„ã¦ã¯ã¾ãŸ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/&#34;&gt;åˆ¥ã®è¨˜äº‹&lt;/a&gt;ã§ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetesã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚‹</title>
          <link>https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/</link>
          <pubDate>Wed, 11 Oct 2017 23:48:40 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹&lt;/a&gt;ã€ã®ç¶šãã€‚
Minikubeã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¾ã§ã¯ã§ããŸã®ã§ã€&lt;a href=&#34;https://kubernetes.io/docs/tutorials/kubernetes-basics/&#34;&gt;Kubernetes Basics&lt;/a&gt;ã¨ã„ã†ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚ŠãªãŒã‚‰ã€&lt;a href=&#34;https://kaitoy.github.io/goslings/&#34;&gt;Goslings&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-æ¦‚è¦&#34;&gt;Kubernetes Basics - æ¦‚è¦&lt;/h2&gt;

&lt;p&gt;Kubernetes Basicsã¯ã€å…¬å¼ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã€‚
ä»¥ä¸‹ã®6ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ãªã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½¿ã†ã®ã¯&lt;a href=&#34;https://github.com/kubernetes/minikube&#34;&gt;Minikube&lt;/a&gt;ã ã‘ã©ã€è‡ªåˆ†ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚
&lt;a href=&#34;https://www.katacoda.com/&#34;&gt;Katacoda&lt;/a&gt;ã¨ã„ã†ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ITæŠ€è¡“ã‚’å­¦ã¹ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚Šã€Kubernetes Basicsã¯ãã‚Œã‚’åˆ©ç”¨ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ãƒ›ã‚¹ãƒ†ãƒƒãƒ‰Minikubeã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ãŒã€&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;å‰å›ã®è¨˜äº‹&lt;/a&gt;ã§è‡ªPCä¸Šã«Minikubeã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã®ã§ã€ãã¡ã‚‰ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-1-kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 1: Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹&lt;/h2&gt;

&lt;p&gt;Minikubeã‚’èµ·å‹•ã—ã¦kubectlã§ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’ã¿ã‚‹ã ã‘ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;å‰å›ã®è¨˜äº‹&lt;/a&gt;ã§ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-2-ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 2: ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ã‚¢ãƒ—ãƒª(i.e. ã‚³ãƒ³ãƒ†ãƒŠ)ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯Deploymentã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã€‚
Masterã¯Deploymentã®specã«å¾“ã£ã¦å„ãƒãƒ¼ãƒ‰ã«ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã€‚
Deploymentã¯ã€ã‚¢ãƒ—ãƒªãŒè½ã¡ãŸã‚‰å†èµ·å‹•ã—ã¦ãã‚Œã‚‹ã€ã¤ã¾ã‚Šself-healingã‚‚å®Ÿç¾ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Deploymentã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯&lt;code&gt;kubectl run &amp;lt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå&amp;gt; --image=&amp;lt;Dockerã‚¤ãƒ¡ãƒ¼ã‚¸å&amp;gt;&lt;/code&gt;ã€‚
Goslingsã‚’ã“ã‚Œã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Goslingsã‚³ãƒ³ãƒ†ãƒŠã¯3ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€æŒ‡å®šã—ãŸãƒãƒ¼ãƒˆã§Webã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹ã€‚
&lt;code&gt;--port&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãã®ãƒãƒ¼ãƒˆã‚’exposeã™ã‚‹ã‚ˆã†ã«ã—ã¦ã€&lt;code&gt;--&lt;/code&gt;ã®å¾Œã«ã‚³ãƒ³ãƒ†ãƒŠã«æ¸¡ã™å¼•æ•°ã‚’è¨˜è¿°ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl run goslings --image=kaitoy/goslings:latest --port 8080 -- 8080 /tmp https://github.com/kaitoy/
deployment &amp;quot;goslings&amp;quot; created

C:\Users\kaitoy&amp;gt;kubectl get deployment
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   1         1         1            1           27s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããŸã€‚
è£ã§Podã‚‚ä½œã‚‰ã‚Œã¦ã„ã¦ã€ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get pods
NAME                        READY     STATUS              RESTARTS   AGE
goslings-1210510689-6w5tf   0/1       ContainerCreating   0          1m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(&lt;code&gt;kubectl get&lt;/code&gt;ã«æŒ‡å®šã™ã‚‹ã®ã¯ã€çœç•¥å½¢ã®&lt;code&gt;deploy&lt;/code&gt;ã¨ã‹&lt;code&gt;po&lt;/code&gt;ã§ã‚‚ã„ã„ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Podã¯éš”é›¢ã•ã‚ŒãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§å‹•ãã®ã§ã€ãã®ã¾ã¾ã§ã¯PodåŒå£«ã¯é€šä¿¡ã§ãã‚‹ã‘ã©ã€å¤–ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã€‚
kubectlã§ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½œã£ã¦ã‚„ã‚‹ã“ã¨ã§ã€å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl proxy
Starting to serve on 127.0.0.1:8001
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€kube-apiserverã¸ã®ãƒ—ãƒ­ã‚­ã‚·ãŒãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã§èµ·å‹•ã—ãŸã€‚
ã“ã®çŠ¶æ…‹ã§&lt;code&gt;http://localhost:8001&lt;/code&gt;ã‚’é–‹ãã¨ã€kube-apiserverã®APIä¸€è¦§ãŒè¦‹ã‚Œã‚‹ã€‚
ä¾‹ãˆã°ã€&lt;code&gt;http://localhost:8001/version&lt;/code&gt;ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®JSONãƒ‡ãƒ¼ã‚¿ãŒè¿”ã£ã¦ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;major&amp;quot;: &amp;quot;1&amp;quot;,
  &amp;quot;minor&amp;quot;: &amp;quot;7&amp;quot;,
  &amp;quot;gitVersion&amp;quot;: &amp;quot;v1.7.0&amp;quot;,
  &amp;quot;gitCommit&amp;quot;: &amp;quot;d3ada0119e776222f11ec7945e6d860061339aad&amp;quot;,
  &amp;quot;gitTreeState&amp;quot;: &amp;quot;dirty&amp;quot;,
  &amp;quot;buildDate&amp;quot;: &amp;quot;2017-10-04T09:25:40Z&amp;quot;,
  &amp;quot;goVersion&amp;quot;: &amp;quot;go1.8.3&amp;quot;,
  &amp;quot;compiler&amp;quot;: &amp;quot;gc&amp;quot;,
  &amp;quot;platform&amp;quot;: &amp;quot;linux/amd64&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å„Podã¸ã‚‚ä»¥ä¸‹ã®URLã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;http://localhost:8001/api/v1/proxy/namespaces/default/pods/&amp;lt;Podå&amp;gt;/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Podåã®éƒ¨åˆ†ã¯&lt;code&gt;kubectl get&lt;/code&gt;ã§ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get po
NAME                        READY     STATUS    RESTARTS   AGE
goslings-1210510689-6w5tf   1/1       Running   0          24m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Ÿéš›ã«ã€&lt;code&gt;http://localhost:8001/api/v1/proxy/namespaces/default/pods/goslings-1210510689-6w5tf/&lt;/code&gt;ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ãŸã‚‰ã€Goslingsã®GUIãŒå‡ºãŸã€‚
ãƒ’ãƒ¥ãƒ¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes-cont/goslings-proxy.png&#34; alt=&#34;goslings-proxy&#34; /&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-3-ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 3: ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’èª¿æŸ»ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;kubectl get: ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤ºã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;kubectl describe: ãƒªã‚½ãƒ¼ã‚¹ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;kubectl logs: ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚&lt;code&gt;docker logs&lt;/code&gt;çš„ãªã€‚&lt;/li&gt;
&lt;li&gt;kubectl exec: ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚&lt;code&gt;docker exec&lt;/code&gt;çš„ãªã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;kubectl get&lt;/code&gt;ã¯ã•ã‚“ã–ã‚“ã‚„ã£ãŸã®ã§é£›ã°ã—ã¦ã€&lt;code&gt;kubectl describe&lt;/code&gt;ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl describe po
Name:           goslings-1210510689-6w5tf
Namespace:      default
Node:           minikube/192.168.99.100
Start Time:     Tue, 10 Oct 2017 21:51:48 +0900
Labels:         pod-template-hash=1210510689
                run=goslings
Annotations:    kubernetes.io/created-by={&amp;quot;kind&amp;quot;:&amp;quot;SerializedReference&amp;quot;,&amp;quot;apiVersion&amp;quot;:&amp;quot;v1&amp;quot;,&amp;quot;reference&amp;quot;:{&amp;quot;kind&amp;quot;:&amp;quot;ReplicaSet&amp;quot;,&amp;quot;namespace&amp;quot;:&amp;quot;default&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;goslings-1210510689&amp;quot;,&amp;quot;uid&amp;quot;:&amp;quot;c74b6518-adb9-11e7-88a0-08002798178d...
Status:         Running
IP:             172.17.0.2
Created By:     ReplicaSet/goslings-1210510689
Controlled By:  ReplicaSet/goslings-1210510689
Containers:
  goslings:
    Container ID:       docker://ce90460886c9555f7748bf59e8d9892f05c05020e7841154ee85713d6d9b0c2d
    Image:              kaitoy/goslings:latest
    Image ID:           docker-pullable://kaitoy/goslings@sha256:a587e3c5f202cdaa6d4d5a9c4f6a01ba6f4782e00277c3a18c77dd034daa0109
    Port:               8080/TCP
    Args:
      8080
      C:/Users/kaitoy/AppData/Local/Temp
    State:              Running
      Started:          Tue, 10 Oct 2017 21:55:54 +0900
    Ready:              True
    Restart Count:      0
    Environment:        &amp;lt;none&amp;gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-cqq59 (ro)
Conditions:
  Type          Status
  Initialized   True
  Ready         True
  PodScheduled  True
Volumes:
  default-token-cqq59:
    Type:       Secret (a volume populated by a Secret)
    SecretName: default-token-cqq59
    Optional:   false
QoS Class:      BestEffort
Node-Selectors: &amp;lt;none&amp;gt;
Tolerations:    &amp;lt;none&amp;gt;
Events:
  FirstSeen     LastSeen        Count   From                    SubObjectPath                   Type            Reason
                Message
  ---------     --------        -----   ----                    -------------                   --------        ------
                -------
  45m           45m             1       default-scheduler                                       Normal          Scheduled               Successfully assigned goslings-1210510689-6w5tf to minikube
  45m           45m             1       kubelet, minikube                                       Normal          SuccessfulMountVolume   MountVolume.SetUp succeeded for volume &amp;quot;default-token-cqq59&amp;quot;
  45m           45m             1       kubelet, minikube       spec.containers{goslings}       Normal          Pulling
                pulling image &amp;quot;kaitoy/goslings:latest&amp;quot;
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Pulled
                Successfully pulled image &amp;quot;kaitoy/goslings:latest&amp;quot;
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Created
                Created container
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Started
                Started container
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Podã®è©³ç´°ãªæƒ…å ±ãŒå‡ºãŸã€‚
Eventsã®ã¨ã“ã«Kubernetesã®é ‘å¼µã‚ŠãŒè¦‹ãˆã¦é¢ç™½ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã¯&lt;code&gt;kubectl logs&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl logs goslings-1210510689-6w5tf

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.4.3.RELEASE)

2017-10-10 12:56:02.498  INFO 6 --- [           main] c.g.kaitoy.goslings.server.Application   : Starting Application on goslings-1210510689-6w5tf with PID 6 (/usr/local/src/goslings/goslings-server/build/libs/goslings-server-0.0.1.jar started by root in /usr/local/src/goslings)
(snip)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Goslingsã¯&lt;a href=&#34;https://projects.spring.io/spring-boot/&#34;&gt;Spring Boot&lt;/a&gt;ã§ã§ãã¦ã‚‹ã®ã§ã€ãã®ãƒ­ã‚°ãŒå‡ºã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã¯&lt;code&gt;kubectl exec&lt;/code&gt;ã‚’è©¦ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl exec goslings-1210510689-6w5tf env
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=goslings-1210510689-6w5tf
KUBERNETES_PORT_443_TCP=tcp://10.0.0.1:443
KUBERNETES_PORT_443_TCP_PROTO=tcp
KUBERNETES_PORT_443_TCP_PORT=443
KUBERNETES_PORT_443_TCP_ADDR=10.0.0.1
KUBERNETES_SERVICE_HOST=10.0.0.1
KUBERNETES_SERVICE_PORT=443
KUBERNETES_SERVICE_PORT_HTTPS=443
KUBERNETES_PORT=tcp://10.0.0.1:443
LANG=C.UTF-8
JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
JAVA_VERSION=8u111
JAVA_DEBIAN_VERSION=8u111-b14-2~bpo8+1
CA_CERTIFICATES_JAVA_VERSION=20140324
HOME=/root
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;env&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ç’°å¢ƒå¤‰æ•°ä¸€è¦§ã‚’å‡ºã›ãŸã€‚
Kubernetesé–¢ä¿‚ã®å¤‰æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;docker exec&lt;/code&gt;ã¨åŒæ§˜ã«ã€&lt;code&gt;-it&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã€Œå…¥ã‚‹ã€ã“ã¨ã‚‚ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl exec -it goslings-1210510689-6w5tf sh
# ls
Dockerfile  _config.yml  build.log     goslings-server  gradle.properties  gradlew.bat
# exit

C:\Users\kaitoy&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-4-ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 4: ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;Serviceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ‰±ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ³ã«ã‚ã‚‹ã¨ã™ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;PodãŒã‚ã‚‹Nodeã§å‹•ã„ã¦ã„ãŸã‚“ã ã‘ã©ã€ãã®NodeãŒæ­»ã‚“ã ã®ã§ã€KubernetesãŒåˆ¥ã®Nodeã«Podã‚’èµ·å‹•ã—ãªãŠã—ã¦ãã‚ŒãŸã€‚&lt;/li&gt;
&lt;li&gt;åŒã˜ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’3ã¤ã®Podã§å‹•ã‹ã—ã¦ã€è² è·åˆ†æ•£ã•ã›ãŸã„ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã†ã„ã†å ´åˆã€Kubernetesã¯Podæ¯ã«å›ºæœ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã®ã§ã€Podã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã¯ã‚¢ã‚¯ã‚»ã‚¹å…ˆãŒä¸å®‰å®šã§ã‚ã‚“ã©ã„ã“ã¨ã«ãªã‚‹ã€‚
ã“ã®å•é¡Œã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ã®ãŒServiceã§ã€ã“ã„ã¤ã¯ã€Podã‚’æŠ½è±¡åŒ–ã—ã¦ã€å®‰å®šã—ãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¬é–‹ã—ã¦ãã‚Œã‚‹ã€‚
ã—ã‹ã‚‚ãã‚Œã¯ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Podã¨Serviceã®ç´ã¥ã‘ã«ã¯ã€&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/&#34;&gt;ãƒ©ãƒ™ãƒ«ã¨ã‚»ãƒ¬ã‚¯ã‚¿&lt;/a&gt;ã¨ã„ã†ã‚‚ã®ãŒä½¿ã‚ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Serviceã®æƒ…å ±ã¯Deploymentã¨ã‹ã¨åŒæ§˜ã«&lt;code&gt;kubectl get&lt;/code&gt;ã§è¦‹ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get svc
NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
kubernetes   10.0.0.1     &amp;lt;none&amp;gt;        443/TCP   1d
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§å‡ºã¦ã„ã‚‹kubernetesã¨ã„ã†ã®ã¯ã€MinikubeãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½œã‚‹Serviceã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Serviceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€&lt;code&gt;kubectl expose&lt;/code&gt;ã§ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;goslings&lt;/code&gt;ã¨ã„ã†åã®Deploymentã«å¯¾ã—ã€NodePortã®Serviceã‚’ä½œã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠã®8080ãƒãƒ¼ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl expose deploy/goslings --type=NodePort --port 8080
service &amp;quot;goslings&amp;quot; exposed

C:\Users\kaitoy&amp;gt;kubectl get services
NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
goslings     10.0.0.69    &amp;lt;nodes&amp;gt;       8080:32406/TCP   11s
kubernetes   10.0.0.1     &amp;lt;none&amp;gt;        443/TCP          1d

C:\Users\kaitoy&amp;gt;kubectl describe services/goslings
Name:                   goslings
Namespace:              default
Labels:                 run=goslings
Annotations:            &amp;lt;none&amp;gt;
Selector:               run=goslings
Type:                   NodePort
IP:                     10.0.0.69
Port:                   &amp;lt;unset&amp;gt; 8080/TCP
NodePort:               &amp;lt;unset&amp;gt; 32406/TCP
Endpoints:              172.17.0.2:8080
Session Affinity:       None
Events:                 &amp;lt;none&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;goslingsã¨ã„ã†åå‰ã®ServiceãŒã§ããŸã€‚
ä¸Šè¨˜&lt;code&gt;kubectl describe&lt;/code&gt;ã®å‡ºåŠ›ã®NodePortã®ã¨ã“ã«æ›¸ã„ã¦ã‚ã‚‹ã®ãŒå¤–éƒ¨ã«ã•ã‚‰ã•ã‚ŒãŸãƒãƒ¼ãƒˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;minikube ip&lt;/code&gt;ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube ip
192.168.99.100
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Minikubeã®VMã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚åˆ†ã‹ã‚‹ã®ã§ã€NodePortã®ãƒãƒ¼ãƒˆã¨åˆã‚ã›ã¦ã€&lt;code&gt;http://192.168.99.100:32406&lt;/code&gt;ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚‰ã€Goslingsã®GUIè¦‹ã‚ŒãŸã€‚
ãƒ’ãƒ¥ãƒ¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes-cont/goslings-service.png&#34; alt=&#34;goslings-service&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã¨ã“ã‚ã§ã€ä¸Šè¨˜&lt;code&gt;kubectl describe&lt;/code&gt;ã®å‡ºåŠ›ã‚’è¦‹ã‚‹ã¨ã€ç‰¹ã«æŒ‡å®šã¯ã—ãªã‹ã£ãŸãŒã€Podã«&lt;code&gt;run=goslings&lt;/code&gt;ã¨ã„ã†LabelãŒä»˜ã„ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚
Serviceã®describeã‚’è¦‹ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl describe svc goslings
Name:                   goslings
Namespace:              default
Labels:                 run=goslings
Annotations:            &amp;lt;none&amp;gt;
Selector:               run=goslings
Type:                   NodePort
IP:                     10.0.0.69
Port:                   &amp;lt;unset&amp;gt; 8080/TCP
NodePort:               &amp;lt;unset&amp;gt; 32406/TCP
Endpoints:              172.17.0.2:8080
Session Affinity:       None
Events:                 &amp;lt;none&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;run=goslings&lt;/code&gt;ã¨ã„ã†SelectorãŒServiceã«ç´ã¥ã„ã¦ã„ã‚‹ã€‚
ã¤ã¾ã‚Šã€Serviceã¨PodãŒã€&lt;code&gt;run=goslings&lt;/code&gt;ã§ç´ã¥ã„ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Labelã¯ã‚¯ã‚¨ãƒªæ™‚ã®ãƒ•ã‚£ãƒ«ã‚¿ã¨ã‹ã«ã‚‚ä½¿ãˆã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get po -l run=goslings
NAME                        READY     STATUS    RESTARTS   AGE
goslings-1210510689-6w5tf   1/1       Running   0          1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¾Œã‹ã‚‰ãƒ©ãƒ™ãƒ«ä»˜ã‘ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl label pod goslings-1210510689-6w5tf ver=1.2.3
pod &amp;quot;goslings-1210510689-6w5tf&amp;quot; labeled
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-5-ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 5: ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ã‚¢ãƒ—ãƒªã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³ã‚’å­¦ã¶ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;Deploymentã®å®šç¾©ã§Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’å¤‰ãˆã‚‹ã¨ã€ãã®æ•°ã«åˆã‚ã›ã¦KubernetesãŒPodã‚’èµ·å‹•ã—ãŸã‚Šæ­¢ã‚ãŸã‚Šã—ã¦ãã‚Œã¦ã‚¹ã‚±ãƒ¼ãƒ«ã§ãã‚‹ä»•çµ„ã¿ã€‚
ãƒ¬ãƒ—ãƒªã‚«ã‚’ä½œã£ã¦ãŠãã¨ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãã‚‹ã®ã‚‚åˆ©ç‚¹ã€‚
&lt;a href=&#34;http://kubernetes.io/docs/user-guide/horizontal-pod-autoscaling/&#34;&gt;ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒ«æ©Ÿèƒ½&lt;/a&gt;ã‚‚ã‚ã‚‹ã‘ã©ã€ãã‚Œã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯æ‰±ã‚ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;è¤‡æ•°ã®Podã§è² è·åˆ†æ•£ã™ã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã€Serviceã§ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã™ã‚‹ã®ãŒå‰æã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ç¾åœ¨ã®Deploymentã®çŠ¶æ…‹ã‚’ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get deploy
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   1         1         1            1           1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã¯ã€æœŸå¾…ã—ã¦ã‚‹(DESIRED)ã®ãŒ1ã§ã€ä»Š(CURRENT)ã‚‚1ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆã™ã‚‹ã«ã¯ã€&lt;code&gt;kubectl scale&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã§ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’å¢—ã‚„ã—ã¦ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl scale deploy/goslings --replicas=3
deployment &amp;quot;goslings&amp;quot; scaled

C:\Users\kaitoy&amp;gt;kubectl get deploy
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   3         3         3            3           1h

C:\Users\kaitoy&amp;gt;kubectl get po -o wide
NAME                       READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-442066424-jn1lw   1/1       Running   0          1h        172.17.0.2   minikube
goslings-442066424-rdw4k   1/1       Running   0          1m        172.17.0.3   minikube
goslings-442066424-rwwjw   1/1       Running   0          1m        172.17.0.4   minikube
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ¬ãƒ—ãƒªã‚«ãŒ3å€‹ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³ã™ã‚‹ã«ã¯ã€&lt;code&gt;kubectl scale&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã§ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’æ¸›ã‚‰ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl scale deploy/goslings --replicas=2
deployment &amp;quot;goslings&amp;quot; scaled

C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS        RESTARTS   AGE
goslings-442066424-0mv4x   1/1       Terminating   0          1m
goslings-442066424-34h1f   1/1       Running       0          1m
goslings-442066424-kmn3p   1/1       Running       0          17m

C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS    RESTARTS   AGE
goslings-442066424-34h1f   1/1       Running   0          1m
goslings-442066424-kmn3p   1/1       Running   0          17m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;kubectl scale&lt;/code&gt;ç›´å¾Œã®&lt;code&gt;kubectl get po&lt;/code&gt;ã§ã¯ã€ä¸€ã¤ã®Podã‚’åœæ­¢ã—ã¦ã„ã‚‹æœ€ä¸­ã®æ§˜å­ãŒè¦‹ãˆã¦ã„ã¦ã€å†åº¦ã®&lt;code&gt;kubectl get po&lt;/code&gt;ã§ã¯ãƒ¬ãƒ—ãƒªã‚«ãŒ2å€‹ã«ãªã£ãŸã®ãŒç¢ºèªã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®çŠ¶æ…‹ãŒKubernetes Basicsã§ä½œã‚‹ã‚¯ãƒ©ã‚¹ã‚¿ã®æœ€çµ‚å½¢ã§ã€å›³ã«ã™ã‚‹ã¨ä»¥ä¸‹ã®æ„Ÿã˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes-cont/objects.png&#34; alt=&#34;objects&#34; /&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-6-ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 6: ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚¢ãƒ—ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ(i.e. ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®å¤‰æ›´)ã‚’å­¦ã¶ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;Deploymentã®å®šç¾©ã‚’ã„ã˜ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¤‰ãˆã¦ã‚„ã‚‹ã¨ã€ãã®ä¸­ã®Podã‚’æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã§é †æ¬¡(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ä¸€ã¤ä¸€ã¤)èµ·å‹•ã—ãªãŠã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¢ãƒ—ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚‚ã•ã‚Œã¦ã€ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚‚ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€&lt;code&gt;kubectl set image&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã€‚
&lt;code&gt;goslings&lt;/code&gt;ã¨ã„ã†åã®Deploymentå†…ã®ã€&lt;code&gt;goslings&lt;/code&gt;ã¨ã„ã†åã®Containerã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’&lt;code&gt;kaitoy/goslings:hoge&lt;/code&gt;ã«å¤‰æ›´ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl set image deploy/goslings goslings=kaitoy/goslings:hoge
deployment &amp;quot;goslings&amp;quot; image updated
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Ÿéš›ã«ã¯&lt;code&gt;kaitoy/goslings:hoge&lt;/code&gt;ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ãªã„ã®ã§ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã®Pullã«å¤±æ•—ã—ãŸã¨ã„ã†ã‚¨ãƒ©ãƒ¼(ErrImagePull)ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS         RESTARTS   AGE
goslings-274047280-jxmmh   0/1       ErrImagePull   0          9s
goslings-274047280-rgg2v   0/1       ErrImagePull   0          8s
goslings-442066424-34h1f   1/1       Terminating    0          1h
goslings-442066424-kmn3p   1/1       Running        0          1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›´å‰ã«æˆ»ã™ã«ã¯ã€&lt;code&gt;kubectl rollout undo&lt;/code&gt;ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl rollout undo deploy/goslings
deployment &amp;quot;goslings&amp;quot; rolled back

C:\Users\kaitoy&amp;gt;kubectl rollout status deploy/goslings
deployment &amp;quot;goslings&amp;quot; successfully rolled out

C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS    RESTARTS   AGE
goslings-442066424-kmn3p   1/1       Running   0          1h
goslings-442066424-m3873   1/1       Running   0          5s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¡äº‹ã«æˆ»ã£ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç•ªå¤–ç·¨1-3ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ‰‹æ³•&#34;&gt;ç•ªå¤–ç·¨1 - 3ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ‰‹æ³•&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç®¡ç†ã™ã‚‹æ‰‹æ³•ã¯&lt;a href=&#34;https://kubernetes.io/docs/tutorials/object-management-kubectl/object-management/&#34;&gt;å¤§ãã3ã¤ã‚ã‚‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç®¡ç†æ‰‹æ³•&lt;/th&gt;
&lt;th&gt;ã„ã˜ã‚‹å¯¾è±¡&lt;/th&gt;
&lt;th&gt;é›£æ˜“åº¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å‘½ä»¤çš„ã‚³ãƒãƒ³ãƒ‰&lt;/td&gt;
&lt;td&gt;ç”Ÿã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ&lt;/td&gt;
&lt;td&gt;ç°¡å˜&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/td&gt;
&lt;td&gt;å€‹ã€…ã®ãƒ•ã‚¡ã‚¤ãƒ«&lt;/td&gt;
&lt;td&gt;æ™®é€š&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;å®£è¨€çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/td&gt;
&lt;td&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ç¾¤&lt;/td&gt;
&lt;td&gt;é›£ã—ã„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Kubernetes Basicsã§ã‚„ã£ã¦ãŸæ‰‹æ³•ã¯ä¸€ç•ªä¸Šã®å‘½ä»¤çš„ã‚³ãƒãƒ³ãƒ‰ã€‚
ã“ã‚Œã¯ç°¡å˜ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã€‚
ã‘ã©ã€ä½•åº¦ã‚‚åŒã˜ã‚ˆã†ãªãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãªã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’æ¯å›æ‰“ã¤ã®ãŒé¢å€’ã ã—ã€ä½œæˆã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æ˜ç¤ºçš„ã˜ã‚ƒãªã„ã—ã€å¤‰æ›´ç®¡ç†ã‚‚ã§ããªã„ã€‚
ã“ã®æ‰‹æ³•ã¯ä¸»ã«é–‹ç™ºä¸­ã«ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;äºŒã¤ç›®ã®æ‰‹æ³•ã®å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§ã¯ã€YAML(ã‹JSON)ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ã‚’æ›¸ã„ã¦ãŠã„ã¦ã€kubectlã«æ¸¡ã™ã€‚
ã“ã®æ‰‹æ³•ã ã¨ã€å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä½¿ãˆã‚‹ã—ã€Gitã¨ã‹ã®ãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚Œã‚‹ã“ã¨ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»å¤‰æ›´ç®¡ç†ã§ãã‚‹ã€‚
ã‘ã©ã€Kubernetesã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ‡ãƒ«ã‚’ç†è§£ã—ãªã„ã¨ä½¿ãˆãªã„ã€‚
(ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ã®è©³ç´°ã¯&lt;a href=&#34;https://kubernetes.io/docs/api-reference/v1.8/&#34;&gt;APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹&lt;/a&gt;ã‚’å‚ç…§ã€‚)&lt;/p&gt;

&lt;p&gt;å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ kubectl create -f nginx.yaml
$ kubectl delete -f nginx.yaml -f redis.yaml
$ kubectl replace -f nginx.yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä¸‰ã¤ç›®ã®æ‰‹æ³•ã®å®£è¨€çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§ã¯ã€è¨­å®šãƒ•ã‚©ãƒ«ãƒ€ã«å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ç½®ãã€‚
ãƒ¦ãƒ¼ã‚¶ã¯æ˜ç¤ºçš„ã«createã¨ã‹updateã¨ã‹æŒ‡ç¤ºã™ã‚‹å¿…è¦ãŒç„¡ãã€kubectlãŒå‹æ‰‹ã«åˆ¤æ–­ã—ã¦ãã‚Œã‚‹ã€‚
ç”Ÿã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥ã„ã˜ã£ãŸå¾Œã€åŒã˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ›´ã—ã¦ã‚‚ã€
ä¸¡è€…ã®å¤‰æ›´ãŒä¸Šæ‰‹ããƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ãªã‚“ã‹ã™ã”ã„ã‘ã©ã€ä¸Šæ‰‹ãã„ã‹ãªã‹ã£ãŸã¨ãã®ãƒ‡ãƒãƒƒã‚°ãŒã‚€ãšã„ã€‚&lt;/p&gt;

&lt;p&gt;å®£è¨€çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ kubectl apply -R -f configs/
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ç•ªå¤–ç·¨2-å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&#34;&gt;ç•ªå¤–ç·¨2 - å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/h2&gt;

&lt;p&gt;3ã¤ã®æ‰‹æ³•ã®å†…ã€å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§Goslingsã‚’Minikubeã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€Kubernetes Basicsã§ä½œã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¶ˆã™ãŸã‚ã€Minikubeã®VMã‚’ä½œã‚Šç›´ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&amp;gt;minikube delete
Deleting local Kubernetes cluster...
Machine deleted.

C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã«å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã„ãã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://v1-7.docs.kubernetes.io/docs/api-reference/v1.7/#deployment-v1beta1-apps&#34;&gt;APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®Deploymentã®ã¨ã“&lt;/a&gt;ã‚’ã¿ã‚‹ã¨ã€Kubernetes Basicsã®æœ€çµ‚å½¢ã¨åŒã˜ã‚ˆã†ãªDeploymentã‚’ä½œã‚‹å®šç¾©ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: goslings-sample
spec:
  replicas: 2
  template:
    metadata:
      labels:
        app: goslings
        ver: latest
    spec:
      containers:
        - name: goslings
          image: kaitoy/goslings:latest
          ports:
            - name: http
              containerPort: 8080
          args:
            - &#39;8080&#39;
            - /tmp
            - https://github.com/kaitoy/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŒæ§˜ã«ã€Serviceã¯ã€&lt;a href=&#34;https://v1-7.docs.kubernetes.io/docs/api-reference/v1.7/#service-v1-core&#34;&gt;APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®Serviceã®ã¨ã“&lt;/a&gt;ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;kind: Service
apiVersion: v1
metadata:
  name: goslings-sample
spec:
  ports:
    - name: http
      port: 8080
      targetPort: 8080
  selector:
    app: goslings
  type: NodePort
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€ãã‚Œãã‚Œã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’&lt;code&gt;kubectl create&lt;/code&gt;ã«æ¸¡ã—ã¦ã‚„ã‚‹ã¨ã€Goslingsãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\kubeTest&amp;gt;kubectl create -f deploy_goslings.yml
deployment &amp;quot;goslings-sample&amp;quot; created

C:\Users\kaitoy\kubeTest&amp;gt;kubectl create -f service_goslings.yml
service &amp;quot;goslings-sample&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç¨®é¡ã‚‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚å¤§é‡ã«ã‚ã‚‹ã®ã§ã€ä½¿ã„ã“ãªã™ã®ã¯é›£ã—ãã†ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹</title>
          <link>https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/</link>
          <pubDate>Tue, 10 Oct 2017 00:10:59 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt;1.8ã®ãƒªãƒªãƒ¼ã‚¹ãŒè©±é¡Œã«ãªã£ã¦ã„ãŸã®ã§ã€ã¡ã‚‡ã£ã¨è§¦ã£ã¦è¦‹ãŸã¨ã„ã†è©±ã€‚
(1.8ã‚’è§¦ã£ãŸã¨ã¯è¨€ã£ã¦ã„ãªã„ã€‚)&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ã«ã¯ã€&lt;a href=&#34;https://kubernetes.io/docs/tutorials/kubernetes-basics/&#34;&gt;Kubernetes Basics&lt;/a&gt;ã¨ã„ã†ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚ŠãªãŒã‚‰ã€&lt;a href=&#34;https://github.com/kubernetes/minikube&#34;&gt;Minikube&lt;/a&gt;ã«&lt;a href=&#34;https://kaitoy.github.io/goslings/&#34;&gt;Goslings&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚“ã ã‘ã©ã€ã“ã®è¨˜äº‹ã§ã¯Minikubeã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã¨ã“ã‚ã¾ã§ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetesã¨ã¯&#34;&gt;Kubernetesã¨ã¯&lt;/h2&gt;

&lt;p&gt;Kubernetesã¯OSSã®ã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã€‚
è‹±èªã ã¨ã‚¯ãƒ¼ãƒãƒãƒ†ã‚£ã‚¹ã¿ãŸã„ã«ç™ºéŸ³ã™ã‚‹ã€‚
GoogleãŒè‡ªèº«ã®ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã§ã‚ã‚‹&lt;a href=&#34;https://research.google.com/pubs/pub43438.html&#34;&gt;Borg&lt;/a&gt;ã®é‹ç”¨ã§åŸ¹ã£ãŸãƒã‚¦ãƒã‚¦ã‚’æ´»ã‹ã—ã¦é–‹ç™ºã—ãŸã‚‚ã®ã€‚
2014å¹´ã“ã‚ã«é–‹ç™ºãŒå§‹ã¾ã‚Šã€2015å¹´å¤ã«v1ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã¨ã„ã†ã“ã¨ã§ã€ã‹ãªã‚Šæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã€‚
ã‚ˆãæ¯”ã¹ã‚‰ã‚Œã‚‹ã‚‚ã®ã«ã¯&lt;a href=&#34;https://docs.docker.com/engine/swarm/&#34;&gt;Dockerã®Swarmãƒ¢ãƒ¼ãƒ‰&lt;/a&gt;ã‚„&lt;a href=&#34;http://mesos.apache.org/&#34;&gt;Apache Mesos&lt;/a&gt;ãŒã‚ã‚‹ãŒã€ä½•ãŒé•ã†ã®ã‹ã¯èª¿ã¹ã¦ãªã„ã®ã§çŸ¥ã‚‰ãªã„ã€‚
ãŸã ã€Dockerã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯KubernetesãŒä¸€ç•ªå‹¢ã„ãŒã‚ã‚‹é›°å›²æ°—ã‚’æ„Ÿã˜ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;(2017/10/18è¿½è¨˜: &lt;a href=&#34;http://www.publickey1.jp/blog/17/dockerkubernetesdockercon_eu_2017.html&#34;&gt;DockerãŒKubernetesã¨ã®çµ±åˆã‚’ç™ºè¡¨&lt;/a&gt;ã—ãŸã€‚Kubernetesã¯Dockerãƒã‚¤ãƒ†ã‚£ãƒ–ãªãƒ„ãƒ¼ãƒ«ã«ãªã‚Šã€Dockerã¨ã¨ã‚‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€Docker Composeã®Conposeãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‚Šã™ã‚‹ã€‚Kubernetesã®å¤§å‹åˆ©ã£ã½ã„ã€‚)&lt;/p&gt;

&lt;p&gt;Kubernetesã‚’ä½¿ã†ã¨ã€è¤‡æ•°ã®ç‰©ç†ãƒã‚·ãƒ³ã‹ã‚‰ãªã‚‹HAã‚¯ãƒ©ã‚¹ã‚¿(Kubernetesã‚¯ãƒ©ã‚¹ã‚¿)ã‚’æ§‹æˆã—ã€ãã®ä¸Šã«ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ç®¡ç†ã§ãã‚‹ã€‚
Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€ä¸€çµ„ã®Masterã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤(a.k.a. Kubernetes Control Planeã€ã¾ãŸã¯å˜ã«Master)ã¨ä¸€ã¤ä»¥ä¸Šã®Node(æ˜”ã¯Minionã¨å‘¼ã°ã‚Œã¦ãŸã‚‚ã®)ã§æ§‹æˆã•ã‚Œã‚‹ã€‚
Nodeã¯ã€Masterã®ç®¡ç†ä¸‹ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ã‚’å‚™ãˆãŸã€ä¸€å°ã®VMã‚„ç‰©ç†ãƒã‚·ãƒ³ã€‚
Masterã¯Nodeä¸Šã§å‹•ãã€ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ç®¡ç†ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã€çŠ¶æ…‹ç®¡ç†ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãªã©ã‚’æ‹…ã†ã€‚&lt;/p&gt;

&lt;p&gt;Kubernetesã®&lt;a href=&#34;https://github.com/kubernetes/community/blob/master/contributors/design-proposals/architecture/architecture.md&#34;&gt;ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£&lt;/a&gt;ã‚’å›³ã«ã™ã‚‹ã¨ä»¥ä¸‹ã®æ„Ÿã˜ã€‚
çŸ¢å°ã®å‘ãã¨ã‹ã¯ã¡ã‚‡ã£ã¨é–“é•ã£ã¦ã‚‹ã‹ã‚‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes/architecture.png&#34; alt=&#34;architecture&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;ã”ã¡ã‚ƒã”ã¡ã‚ƒã™ã‚‹ã®ã§çœã„ãŸã‘ã©ã€å›³ã®ä¸‹éƒ¨ã®Nodeå†…ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ä»–ã®Nodeå†…ã§ã‚‚å‹•ã„ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Masterã«ã¯&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-apiserver/&#34;&gt;kube-apiserver&lt;/a&gt;ãŒå«ã¾ã‚Œã¦ã„ã¦ã€&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/kubernetes-api/&#34;&gt;Kubernetes API&lt;/a&gt;ã¨ã„ã†REST APIã‚’å…¬é–‹ã™ã‚‹ã€‚
ã“ã®APIã‚’é€šã—ã¦&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/&#34;&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ&lt;/a&gt;ã‚’å®šç¾©ã—ãŸã‚Šã™ã‚‹ã“ã¨ã§ã€å®£è¨€çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã®ç®¡ç†ãŒã§ãã‚‹ä»•çµ„ã¿ã€‚
ãƒ¦ãƒ¼ã‚¶ã¯æ™®é€šã€&lt;a href=&#34;https://kubernetes.io/docs/user-guide/kubectl/&#34;&gt;kubectl&lt;/a&gt;(ã‚­ãƒ¥ãƒ¼ãƒ–ã‚·ãƒ¼ãƒ†ã‚£ãƒ¼ã‚¨ãƒ«)ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§kube-apiserverã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯Masterã®&lt;a href=&#34;https://github.com/coreos/etcd&#34;&gt;etcd&lt;/a&gt;ã«ã‚ˆã£ã¦åˆ†æ•£ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆã‚¢ã«æ°¸ç¶šåŒ–ã•ã‚Œã€ãã®ã‚¹ãƒˆã‚¢ã‚’&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-controller-manager/&#34;&gt;kube-controller-manager&lt;/a&gt;ã¨&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-scheduler/&#34;&gt;kube-scheduler&lt;/a&gt;ãŒwatchã—ã¦ã¦ã€å¤‰æ›´ã«å¿œã˜ãŸå‡¦ç†ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kube-controller-managerã¯ã€ãƒãƒ¼ãƒ‰ã®ç®¡ç†ã‚„ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç®¡ç†ã‚„ã€ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãªã©ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¬ãƒ™ãƒ«ã®æ©Ÿèƒ½ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
(ã‚ˆãã‚ã‹ã‚‰ãªã„ã€‚)&lt;/p&gt;

&lt;p&gt;kube-schedulerã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’é¸å‡ºã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã€å›³ã«ã¯ãªã„ã‘ã©ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/cloud-controller-manager/&#34;&gt;cloud-controller-manager&lt;/a&gt;ã¨ã„ã†ã®ãŒMasterã§å‹•ãã“ã¨ã‚‚ã‚ã£ã¦ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã‚„ã‚Šå–ã‚Šã—ã¦ã‚¯ãƒ©ã‚¦ãƒ‰å›ºæœ‰ã®ä»•äº‹ã‚’ã™ã‚‹ã‚‰ã—ã„ã€‚
ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ³ãƒ€ã˜ã‚ƒãªã‘ã‚Œã°æ°—ã«ã—ãªãã¦è‰¯ã•ãã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä¸€æ–¹ã€å„Nodeã§ã¯ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/kubelet/&#34;&gt;kubelet&lt;/a&gt;(ã‚­ãƒ¥ãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆ)ã¨ã„ã†Masterã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãªã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãŒå‹•ãã€‚&lt;/p&gt;

&lt;p&gt;kubeletã¯kube-apiserverã‹ã‚‰ã®æŒ‡ç¤ºã§ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ãŸã‚Šç›£è¦–ã—ãŸã‚Šæ­¢ã‚ãŸã‚Šã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubeletãŒã‚³ãƒ³ãƒ†ãƒŠã‚’æ‰±ã†ãŸã‚ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯ã€æ™®é€šã¯&lt;a href=&#34;https://www.docker.com/&#34;&gt;Docker&lt;/a&gt;ã ã‘ã©ã€&lt;a href=&#34;https://coreos.com/rkt/&#34;&gt;rkt&lt;/a&gt;ã¨ã‹&lt;a href=&#34;https://github.com/kubernetes-incubator/cri-o&#34;&gt;cri-o&lt;/a&gt;ã¨ã‹&lt;a href=&#34;https://github.com/kubernetes/frakti&#34;&gt;frakti&lt;/a&gt;ã¨ã‹ã‚‚ä½¿ãˆã‚‹ã€‚&lt;a href=&#34;https://github.com/opencontainers/runc&#34;&gt;runc&lt;/a&gt;ã‚„&lt;a href=&#34;https://github.com/oracle/railcar&#34;&gt;RailCar&lt;/a&gt;ã¯ã©ã†ãªã‚“ã ã‚ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã¤ãªãŒã‚‹ã®ã§ã€ãã“ã§å‹•ã„ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã«ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€ä½•ã‚‰ã‹ã®å½¢ã§ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ä¸­ç¶™ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ã“ã‚Œã‚’ã™ã‚‹ã®ãŒ&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-proxy/&#34;&gt;kube-proxy&lt;/a&gt;ã€‚
ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚‚ã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯&#34;&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ä¸Šã§æ©Ÿèƒ½ã™ã‚‹æ§‹æˆè¦ç´ ã‚’è¡¨ç¾ã™ã‚‹ã‚‚ã®ã€‚
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/#object-spec-and-status&#34;&gt;specã¨status&lt;/a&gt;ã‚’æŒã¡ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æœŸå¾…ã™ã‚‹çŠ¶æ…‹ã‚„ãµã‚‹ã¾ã„(spec)ã‚’å®šç¾©ã—ã¦ãŠãã¨ã€KubernetesãŒå®Ÿéš›ã®çŠ¶æ…‹(status)ã‚’ãã‚Œã«åˆã‚ã›ã¦ãã‚Œã‚‹ã€‚
å®£è¨€çš„ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/&#34;&gt;Pod&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã®æœ€å°å˜ä½ã€‚
ä¸€ã¤(ã¾ãŸã¯ãƒªã‚½ãƒ¼ã‚¹ã‚’å…±æœ‰ã™ã‚‹è¤‡æ•°)ã®ã‚³ãƒ³ãƒ†ãƒŠã¨ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ã‚’å†…åŒ…ã™ã‚‹ã€‚
ä¸€ã¤ã®Podã«ã¯ä¸€ã¤ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä»˜ãã€‚&lt;/p&gt;

&lt;p&gt;kubeletã¯Podã®å®šç¾©ã«å¾“ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;å› ã¿ã«ã€etcdä»¥å¤–ã®Masterã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚Podã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/service/&#34;&gt;Service&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Podã®è«–ç†ã‚°ãƒ«ãƒ¼ãƒ—ã€‚
Podã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¤–éƒ¨ã«å…¬é–‹ã•ã‚Œãªã„ã®ã§ã€å¤–ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹ãŸã‚ã«ServiceãŒã‚ã‚‹ã€‚
kube-proxyã¯ã“ã„ã¤ã®å®šç¾©ã«å¾“ã£ã¦åƒãã€‚&lt;/p&gt;

&lt;p&gt;Serviceã«ã¯è¤‡æ•°ã®Endpoint(i.e. Podç­‰)ãŒç´ã¥ãã€å¤–éƒ¨ã‹ã‚‰ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã®ã§ã€å†—é•·åŒ–ã‚„ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µçš„ãªåƒãã‚‚ã™ã‚‹ã€‚
Serviceã¯Podã‚’æŠ½è±¡åŒ–ã™ã‚‹ã®ã§ã€PodãŒæ­»ã‚“ã ã‚Šå…¥ã‚Œæ›¿ã‚ã£ãŸã‚Šã—ã¦ã‚‚å¤–ã«å½±éŸ¿ãŒè¦‹ãˆã«ãããªã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Serviceã«ã¯ä»¥ä¸‹ã®typeãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ClusterIP (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ): Kubernetesã‚¯ãƒ©ã‚¹ã‚¿å†…ã‹ã‚‰ã ã‘ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã ã‘ã‚’ã‚‚ã¤ã€‚&lt;/li&gt;
&lt;li&gt;NodePort: ClusterIPã®æ‹¡å¼µã€‚å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«åŠ ãˆã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒãƒ¼ãƒˆã‚’ä¸€ã¤æŒã¤ã€‚&lt;/li&gt;
&lt;li&gt;LoadBalancer: NodePortã®æ‹¡å¼µã€‚å¤–éƒ¨ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã‚’ä½œã£ã¦ã€å›ºå®šã®å¤–éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä»˜ã‘ã¦ã€å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ExternalName: æŠ½è±¡åã‚’ã‚‚ã¤ã‚µãƒ¼ãƒ“ã‚¹ã€‚Kubernetes DNS serverã§åå‰è§£æ±ºã™ã‚‹ã€‚&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/&#34;&gt;è©³ç´°&lt;/a&gt;ã¯èª­ã‚“ã§ãªã„ã®ã§çŸ¥ã‚‰ãªã„ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/storage/volumes/&#34;&gt;Volume&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ°¸ç¶šåŒ–ã‚„Podå†…ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰ã®ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
Podã¨ã¨ã‚‚ã«ä½œã‚‰ã‚Œã€Podã¨ã¨ã‚‚ã«ç ´æ£„ã•ã‚Œã‚‹ã€‚
å®Ÿæ…‹ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚
hostPathã¨ã‹ã€nfsã¨ã‹ã€awsElasticBlockStoreã¨ã‹ã®ç¨®é¡ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/&#34;&gt;Namespace&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä»®æƒ³ã‚¯ãƒ©ã‚¹ã‚¿ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
ã“ã‚Œã‚’å®šç¾©ã™ã‚‹ã¨ã€ã²ã¨ã¤ã®ç‰©ç†ã‚¯ãƒ©ã‚¹ã‚¿ã‚’è¤‡æ•°ã®ä»®æƒ³ã‚¯ãƒ©ã‚¹ã‚¿ã«åˆ†å‰²ã§ãã‚‹ã€‚
å¤§è¦æ¨¡ãƒ¦ãƒ¼ã‚¶ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘æ©Ÿèƒ½ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Controller&lt;/p&gt;

&lt;p&gt;Podã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸã‚Šã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚„è‡ªå‹•å†èµ·å‹•ã—ãŸã‚Šã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/deployment/&#34;&gt;Deployment&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Podã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
Podã¨ReplicaSetã®å®£è¨€çš„ãªç”Ÿæˆãƒ»æ›´æ–°ã‚’å®Ÿç¾ã™ã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/&#34;&gt;ReplicaSet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡å®šã—ãŸæ•°ã®Podã®ãƒ¬ãƒ—ãƒªã‚«ã‚’ç¶­æŒã—ã¦ãã‚Œã‚‹ã€‚
åŸºæœ¬ã¯Deploymentã‹ã‚‰ä½œã‚‰ã‚Œã¦ã€Podã®ä½œæˆãƒ»å‰Šé™¤ãƒ»æ›´æ–°ã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ã‚¤ãƒˆã™ã‚‹ã€‚
&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/replicationcontroller/&#34;&gt;ReplicationController&lt;/a&gt;ã¨ã„ã†ã®ã‚‚ã‚ã‚‹ã‘ã©ã€ä»Šã¯ReplicaSetãŒæ¨å¥¨ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/&#34;&gt;StatefulSet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªã‚¢ãƒ—ãƒªã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
ç¾æ™‚ç‚¹ã§ã®Kubernetesæœ€æ–°ç‰ˆã®1.8ã§ã¾ã ãƒ™ãƒ¼ã‚¿ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/&#34;&gt;DaemonSet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…¨ã¦ã®ãƒãƒ¼ãƒ‰ã§å‹•ãã‚¢ãƒ—ãƒªã‚’å®Ÿç¾ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/&#34;&gt;Job&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚¸ãƒ§ãƒ–ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
æŒ‡å®šã•ã‚ŒãŸå›æ•°ã€Podã‚’æˆåŠŸã§å®Œäº†ã•ã›ã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/&#34;&gt;ãƒ©ãƒ™ãƒ«&lt;/a&gt;ã¨ã„ã†ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ãªå±æ€§ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã€Podã¨Serviceã®ç´ã¥ã‘ã‚„ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¤œç´¢æ™‚ã®ãƒ•ã‚£ãƒ«ã‚¿ã¨ã‹ã«ä½¿ãˆã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»Šå›Goslingsã‚’å‹•ã‹ã™ã®ã«ä½¿ã£ãŸã®ã¯ã€Podã€Deploymentã€ReplicaSetã€Service (NodePort)ã€‚&lt;/p&gt;

&lt;h2 id=&#34;podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&#34;&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&lt;/h2&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨ç´°ã‹ã„è©±ã ã‘ã©ã€Podé–“ã®é€šä¿¡ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã‹ã¨ã„ã†è©±ã«ã¤ã„ã¦ã¡ã‚‡ã£ã¨èª¿ã¹ãŸã®ã§ã–ã£ãã‚Šæ›¸ã„ã¦ãŠãã€‚&lt;/p&gt;

&lt;p&gt;æ™®é€šã®&lt;a href=&#34;https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/#docker-network&#34;&gt;Dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&lt;/a&gt;ã ã¨ã€ã‚³ãƒ³ãƒ†ãƒŠã¯docker0ã¨ã„ã†ä»®æƒ³ãƒ–ãƒªãƒƒã‚¸ä¸Šã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§å‹•ããŸã‚ã€åŒã˜ãƒ›ã‚¹ãƒˆä¸Šã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã¯é€šä¿¡ã§ãã‚‹ã‘ã©ã€åˆ¥ã®ãƒ›ã‚¹ãƒˆä¸Šã®ã‚³ãƒ³ãƒ†ãƒŠé€šä¿¡ã•ã›ãŸã„å ´åˆã¯ã€ãƒ›ã‚¹ãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒ¼ãƒˆã‚’å‰²ã‚Šå½“ã¦ã¦ã‚„ã‚‰ãªã‘ã‚Œã°ã„ã‘ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ã‚ã‚“ã©ã„ã®ã§ã€Kubernetesã¯ã€å„Podã«ä¸€æ„ãªIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¸ãˆã€PodãŒã©ã®ãƒ›ã‚¹ãƒˆã«ã„ã‚‹ã‹ã«ã‹ã‹ã‚ã‚‰ãšã€NATç„¡ã—ã§ç›¸äº’ã«é€šä¿¡ã§ãã‚‹&lt;a href=&#34;https://kubernetes.io/docs/concepts/cluster-administration/networking/&#34;&gt;ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&lt;/a&gt;ã‚’æä¾›ã™ã‚‹ã€‚
ã“ã‚ŒãŒPodãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ã‹å‘¼ã°ã‚Œã€ãã®ä»•æ§˜ã¯&lt;a href=&#34;https://github.com/containernetworking/cni&#34;&gt;CNI&lt;/a&gt;ã§ã‚ªãƒ¼ãƒ—ãƒ³ã«å®šã‚ã‚‰ã‚Œã¦ã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.projectcalico.org/v2.6/getting-started/kubernetes/installation/hosted/kubeadm/&#34;&gt;Calico&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/projectcalico/canal/tree/master/k8s-install&#34;&gt;Canal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/coreos/flannel&#34;&gt;Flannel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cloudnativelabs/kube-router/blob/master/Documentation/kubeadm.md&#34;&gt;Kube-router&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/romana/romana/tree/master/containerize#using-kubeadm&#34;&gt;Romana&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.weave.works/docs/net/latest/kube-addon/&#34;&gt;Weave Net&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;minikubeã¨ã¯&#34;&gt;Minikubeã¨ã¯&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã¯&lt;a href=&#34;https://kubernetes.io/docs/setup/pick-right-solution/&#34;&gt;ã„ãã¤ã‹ã‚ã‚‹&lt;/a&gt;ãŒã€ä¸­ã§ã‚‚ã‚‚ã£ã¨ã‚‚ç°¡å˜ãªæ–¹æ³•ãŒMinikubeã€‚&lt;/p&gt;

&lt;p&gt;Minikubeã¯ã€å˜ä¸€Nodeã®Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’è©°ã‚ãŸVMã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦èµ·å‹•ã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®kubectlã‹ã‚‰ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã€‚
Linuxã€Windowsã€OS Xã§å‹•ãã€é–‹ç™ºã‚„ãƒ†ã‚¹ãƒˆç”¨é€”ã®Kubernetesç’°å¢ƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨&lt;a href=&#34;https://www.vagrantup.com/&#34;&gt;Vagrant&lt;/a&gt;ã£ã½ã„æ„Ÿã˜ã€‚Kuberneteså°‚ç”¨ã®ã€‚&lt;/p&gt;

&lt;h2 id=&#34;minikubeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Minikubeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/tasks/tools/install-minikube/&#34;&gt;Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã«ã—ãŸãŒã£ã¦ã€Minikubeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
ç’°å¢ƒã¯Windows 10 Home x64ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€Minikubeã®VMã‚’å‹•ã‹ã™ä»®æƒ³åŒ–ãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹ã€‚
ä»Šã®ã¨ã“ã‚MinikubeãŒã‚µãƒãƒ¼ãƒˆã—ã¦ã‚‹ã®ã¯ã€Windowsã ã¨&lt;a href=&#34;https://www.virtualbox.org/&#34;&gt;VirtualBox&lt;/a&gt;ã‹&lt;a href=&#34;https://docs.microsoft.com/ja-jp/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v&#34;&gt;Hyper-V&lt;/a&gt;ã€‚
Windows 10 Homeã ã¨Hyper-VãŒä½¿ãˆãªã„ã®ã§ã€VirtualBoxä¸€æŠã€‚
VirtualBoxã¯ã€é©å½“ã«VT-xã‚’æœ‰åŠ¹ã«ã—ã¦(ã—ã¦ã‚ã£ãŸ)ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã ã‘ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯5.1.28ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€minikubeã‚³ãƒãƒ³ãƒ‰ã‚’å…¥ã‚Œã‚‹ã€‚
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯Goã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”¨ã«ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸãƒã‚¤ãƒŠãƒªãŒGitHubã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸ã®&lt;a href=&#34;https://github.com/kubernetes/minikube/releases&#34;&gt;Releases&lt;/a&gt;ã«ä¸ŠãŒã£ã¦ã‚‹ã®ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦Pathã®é€šã£ãŸã¨ã“ã«ç½®ãã ã‘ã€‚
ä»Šå›ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã®ã¯v0.22.2ã®minikube-windows-amd64ã§ã€ã“ã‚Œã‚’minikube.exeã«ãƒªãƒãƒ¼ãƒ ã—ã¦é…ç½®ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€minikubeãŒã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹Kubernetesã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube get-k8s-versions
The following Kubernetes versions are available:
        - v1.7.5
        - v1.7.4
        - v1.7.3
        - v1.7.2
        - v1.7.0
        (snip)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1.8ã¯ã¾ã ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„â€¦&lt;/p&gt;

&lt;p&gt;1.7.5ãŒæœ€æ–°ãªã®ã§ãã‚Œã§ã‚„ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ã“ã¨ã§ã€kubectlã®1.7.5ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
kubectlã‚‚Goã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰Windowsãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦Pathã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã ã‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;https://storage.googleapis.com/kubernetes-release/release/v1.7.5/bin/windows/amd64/kubectl.exe
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šã§Minikubeã®ç’°å¢ƒãŒã§ããŸã€‚
ç°¡å˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;minikubeèµ·å‹•&#34;&gt;Minikubeèµ·å‹•&lt;/h2&gt;

&lt;p&gt;Minikubeã¯ã€&lt;code&gt;minikube start&lt;/code&gt;ã§èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã€MinikubeãŒèµ·å‹•ã—ãŸã‚‰ã™ãã«Kubernetesã‚’ã„ã˜ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.5
Starting local Kubernetes v1.7.5 cluster...
Starting VM...
Downloading Minikube ISO
 106.37 MB / 106.37 MB [============================================] 100.00% 0s
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.

C:\Users\kaitoy&amp;gt;minikube status
minikube: Running
cluster: Running
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;èµ·å‹•ã—ãŸã€‚
VirtualBoxã®GUIã‚’è¦‹ã‚‹ã¨ã€minikubeã¨ã„ã†VMãŒèµ·å‹•ã—ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã€‚
ã“ã®ä¸­ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãŒå‹•ã„ã¦ã„ã‚‹ã¯ãšã ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®VMã«ã¯ã€&lt;code&gt;minikube ssh&lt;/code&gt;ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube ssh
                         _             _
            _         _ ( )           ( )
  ___ ___  (_)  ___  (_)| |/&#39;)  _   _ | |_      __
/&#39; _ ` _ `\| |/&#39; _ `\| || , &amp;lt;  ( ) ( )| &#39;_`\  /&#39;__`\
| ( ) ( ) || || ( ) || || |\`\ | (_) || |_) )(  ___/
(_) (_) (_)(_)(_) (_)(_)(_) (_)`\___/&#39;(_,__/&#39;`\____)

$ uname -a
Linux minikube 4.9.13 #1 SMP Fri Sep 15 23:35:16 UTC 2017 x86_64 GNU/Linux
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã™ã”ãVagrantã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Minikubeã‚’èµ·å‹•ã™ã‚‹ã¨ã€kubectlã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒminikubeã¨ã„ã†ã‚‚ã®ã«è¨­å®šã•ã‚Œã€kubectlã‚³ãƒãƒ³ãƒ‰ã®æ¥ç¶šå…ˆãŒMinikubeã®Kubernetesã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl config current-context
minikube
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€kubectlã§ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã¨ã‹ã‚’è¦‹ã¦ã¿ã‚ˆã†ã¨æ€ã£ãŸã‚‰ã€ãªã‚“ã‹æ§˜å­ãŒå¤‰ã€‚
ãªã—ã®ã¤ã¶ã¦ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get nodes
Unable to connect to the server: dial tcp 192.168.99.100:8443: connectex: No connection could be made because the target machine actively refused it.

C:\Users\kaitoy&amp;gt;kubectl cluster-info dump
Unable to connect to the server: dial tcp 192.168.99.100:8443: connectex: No connection could be made because the target machine actively refused it.

C:\Users\kaitoy&amp;gt;minikube dashboard
Could not find finalized endpoint being pointed to by kubernetes-dashboard: Error validating service: Error getting service kubernetes-dashboard: Get https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kubernetes-dashboard: dial tcp 192.168.99.100:8443: connectex: No connection could be made because the target machine actively refused it.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†åº¦&lt;code&gt;minikube status&lt;/code&gt;ã—ã¦ã¿ãŸã‚‰ã€ã‚¯ãƒ©ã‚¹ã‚¿ãŒè½ã¡ã¦ã„ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube status
minikube: Running
cluster: Stopped
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;minikube logs&lt;/code&gt;ã§ãƒ­ã‚°ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ãŒãŸãã•ã‚“å‡ºã¦ã„ãŸã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ­ã‚°ãŒæœ€åˆã®ã»ã†ã«å‡ºã¦ãŸã®ã§ã€èªè¨¼ç³»ãŒã ã‚ã§ã€ã‚µãƒ¼ãƒ“ã‚¹é–“ã§ã‚„ã‚Šå–ã‚ŠãŒã§ããªã‹ã£ãŸã‚“ã˜ã‚ƒãªã„ã‹ã¨ã„ã†æ„Ÿã˜ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Oct 04 23:08:43 minikube localkube[2783]: W1004 23:08:43.599396    2783 authentication.go:368] AnonymousAuth is not allowed with the AllowAll authorizer.  Resetting AnonymousAuth to false. You should use a different authorizer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§ã€Kubernetesã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã¡ã‚‡ã£ã¨å¤ã„ã®(1.7.0)å¤‰ãˆã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®1.7.0ã‚’Pathã«ç½®ã„ã¦ã€Minikubeã‚’1.7.0ã§å†èµ·å‹•ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Kubernetes version downgrade is not supported. Using version: v1.7.5
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Kubernetesã®ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãªã„ã¨è¨€ã‚ã‚ŒãŸã€‚
ã®ã§ä¸€å›VMã‚’æ¶ˆã—ã¦ã‹ã‚‰ã‚„ã‚ŠãªãŠã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&amp;gt;minikube delete
Deleting local Kubernetes cluster...
Machine deleted.

C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1.7.0ã§å‹•ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ§˜å­ã¯ã©ã†ã‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop\bin\pleiades\workspace\blog&amp;gt;minikube status
minikube: Running
cluster: Running
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100

C:\Users\kaitoy\Desktop\bin\pleiades\workspace\blog&amp;gt;kubectl get nodes
NAME       STATUS    AGE       VERSION
minikube   Ready     22s       v1.7.0

C:\Users\kaitoy\Desktop\bin\pleiades\workspace\blog&amp;gt;kubectl version
Client Version: version.Info{Major:&amp;quot;1&amp;quot;, Minor:&amp;quot;7&amp;quot;, GitVersion:&amp;quot;v1.7.0&amp;quot;, GitCommit:&amp;quot;d3ada0119e776222f11ec7945e6d860061339aad&amp;quot;, GitTreeState:&amp;quot;clean&amp;quot;, BuildDate:&amp;quot;2017-06-29T23:15:59Z&amp;quot;, GoVersion:&amp;quot;go1.8.3&amp;quot;, Compiler:&amp;quot;gc&amp;quot;, Platform:&amp;quot;windows/amd64&amp;quot;}
Server Version: version.Info{Major:&amp;quot;1&amp;quot;, Minor:&amp;quot;7&amp;quot;, GitVersion:&amp;quot;v1.7.0&amp;quot;, GitCommit:&amp;quot;d3ada0119e776222f11ec7945e6d860061339aad&amp;quot;, GitTreeState:&amp;quot;dirty&amp;quot;, BuildDate:&amp;quot;2017-10-04T09:25:40Z&amp;quot;, GoVersion:&amp;quot;go1.8.3&amp;quot;, Compiler:&amp;quot;gc&amp;quot;, Platform:&amp;quot;linux/amd64&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã„ã‚‹ã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã ã‘ã¯ãªãœã‹ç›¸å¤‰ã‚ã‚‰ãšé–‹ã‘ãªã„ã‘ã©ã¾ã‚ã„ã„ã‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube dashboard
Could not find finalized endpoint being pointed to by kubernetes-dashboard: Error validating service: Error getting service kubernetes-dashboard: services &amp;quot;kubernetes-dashboard&amp;quot; not found
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ç¶šãã¯ã¾ãŸ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/&#34;&gt;åˆ¥ã®è¨˜äº‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å› ã¿ã«ã€ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼ã‚ã‚Šã®ãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒã§Minikube on Windowsã™ã‚‹å ´åˆã¯ã€ã¾ãšä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NO_PROXY&lt;/code&gt;: 192.168.99.100&lt;/li&gt;
&lt;li&gt;&lt;code&gt;http_proxy&lt;/code&gt;: username:password@domain.com:port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https_proxy&lt;/code&gt;: username:password@domain.com:port&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;NO_PROXY&lt;/code&gt;ã®å€¤ã¯&lt;code&gt;minikube ip&lt;/code&gt;ã®å€¤ã€‚
ã§ã€&lt;/p&gt;

&lt;p&gt;&lt;code&gt;minikube start --docker-env HTTP_PROXY=http://%http_proxy% --docker-env HTTPS_PROXY=https://%https_proxy% --docker-env NO_PROXY=%NO_PROXY%&lt;/code&gt;ã¿ãŸã„ã«ã™ã‚Œã°ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¯ãšã€‚(å‚è€ƒ: &lt;a href=&#34;https://github.com/kubernetes/minikube/issues/530&#34;&gt;https://github.com/kubernetes/minikube/issues/530&lt;/a&gt;)&lt;/p&gt;
</description>
        </item>
      
    

  </channel>
</rss>
