<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>To Be Decided </title>
    <link>https://www.kaitoy.xyz/tags/skaffold/</link>
    <language>en-us</language>
    <author>Kaito Yamada</author>
    <rights>(C) 2018</rights>
    <updated>2018-04-01 09:59:43 &#43;0900 JST</updated>

    
      
        <item>
          <title>Skaffoldã‚’è§¦ã£ã¦ã¿ãŸ</title>
          <link>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</link>
          <pubDate>Sun, 01 Apr 2018 09:59:43 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold#run-a-deployment-pipeline-once&#34;&gt;Skaffold&lt;/a&gt;ã‚’è©¦ã—ã¦ã¿ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;skaffoldã¨ã¯&#34;&gt;Skaffoldã¨ã¯&lt;/h2&gt;

&lt;p&gt;GoogleãŒé–‹ç™ºã—ã¦ã„ã‚‹ã€Kubernetesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿«é©ã«é–‹ç™ºã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–ã—ã€å¤‰æ›´ãŒå…¥ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;2018/3/16ã«&lt;a href=&#34;https://cloudplatform.googleblog.com/2018/03/introducing-Skaffold-Easy-and-repeatable-Kubernetes-development.html&#34;&gt;ç™ºè¡¨&lt;/a&gt;ã•ã‚ŒãŸæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã€è§¦ã£ãŸæ„Ÿã˜ã§ã¯ã¾ã ã“ã‚Œã‹ã‚‰ã¨ã„ã£ãŸæ„Ÿã˜ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;Goã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€Linuxã€OS Xã€Windowsç”¨ã®ãƒã‚¤ãƒŠãƒªãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¼¼ãŸãƒ„ãƒ¼ãƒ«ã«ã¯Microsoftã®&lt;a href=&#34;https://draft.sh/&#34;&gt;Draft&lt;/a&gt;ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€Gitã®ã‚³ãƒŸãƒƒãƒˆã‚’è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã«ã€&lt;a href=&#34;https://gitkube.sh/&#34;&gt;Gitkube&lt;/a&gt;ã€&lt;a href=&#34;http://jenkins-x.io/&#34;&gt;Jenkins X (ã‚¨ãƒƒã‚¯ã‚¹)&lt;/a&gt;ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;windowsç‰ˆã‚’è©¦ã™&#34;&gt;Windowsç‰ˆã‚’è©¦ã™&lt;/h2&gt;

&lt;p&gt;è‡ªPCãŒWindowsãªã®ã§Windowsç‰ˆã‚’è©¦ã™ã€‚
ä¼šç¤¾ã§ä½¿ã£ã¦ã‚‹ã®ã‚‚Windowsã ã—ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã‚’ä½¿ã†ã«ã¯ã€Skaffoldã®å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã€ãã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã«è¨­å®šã—ãŸkubectlã€DockerãŒå¿…è¦ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšWindowsç‰ˆSkaffoldã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/releases&#34;&gt;GitHubã®ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸&lt;/a&gt;ã‹ã‚‰Windowsãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€skaffold.exeã«ãƒªãƒãƒ¼ãƒ ã—ã¦PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã ã‘ã€‚
Skaffoldã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.3.0ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€Windows 10 Homeä¸Šã«minikube 0.22.2ã§ä½œã£ãŸKubernetes 1.7.0ã®ã‚¯ãƒ©ã‚¹ã‚¿ã€‚
minikubeã¯&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;ä»¥å‰&lt;/a&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã‚’ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;minikubeã‚’èµ·å‹•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; minikube start --kubernetes-version v1.7.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;kubectlã‚‚minikubeã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerã«ã¤ã„ã¦ã¯ã€ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯minikubeä¸Šã®ã‚’ä½¿ãˆã°ã„ã„ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(Docker Client)ã¯skaffoldã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã®ã§Windowsä¸Šã«ãªã„ã¨ã ã‚ã¯ãªãšã€‚&lt;/p&gt;

&lt;p&gt;Windowsã§Dockerã¨è¨€ãˆã°ä»Šãªã‚‰&lt;a href=&#34;https://www.docker.com/docker-windows&#34;&gt;Docker for Windows&lt;/a&gt;ã ã‘ã©ã€ã“ã‚Œã¯Windows 10 Proã˜ã‚ƒãªã„ã¨ä½¿ãˆãªã‹ã£ãŸã¯ãšãªã®ã§ã€&lt;a href=&#34;https://docs.docker.com/toolbox/&#34;&gt;Docker Toolbox&lt;/a&gt;ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã„ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã¦ã‚‹ã®ã§ã€minikubeã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã•ã›ã‚‹ã€‚
ãã®ãŸã‚ã®è¨­å®šã¯minikubeã®ã‚³ãƒãƒ³ãƒ‰ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt;minikube docker-env
SET DOCKER_TLS_VERIFY=1
SET DOCKER_HOST=tcp://192.168.99.100:2376
SET DOCKER_CERT_PATH=C:\Users\kaitoy\.minikube\certs
SET DOCKER_API_VERSION=1.23
REM Run this command to configure your shell:
REM @FOR /f &amp;quot;tokens=*&amp;quot; %i IN (&#39;minikube docker-env&#39;) DO @%i
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã«å¾“ã£ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®šå®Œäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; @FOR /f &amp;quot;tokens=*&amp;quot; %i IN (&#39;minikube docker-env&#39;) DO @%i
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§æº–å‚™å®Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã®&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/tree/10d56cf0fd3c253b0716a084419b5833e53d9870#getting-started-with-local-tooling&#34;&gt;Getting Started&lt;/a&gt;ã‚’ã‚„ã£ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã®ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–‹ã„ã¦ã€&lt;code&gt;examples/getting-started&lt;/code&gt;ã«cdã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; skaffold dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã§çµ‚ã‚ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-txt&#34;&gt;[31mERRO[0m[0047] run: running skaffold steps: starting watch on file C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: adding watch for C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: The parameter is incorrect.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;MinGW(Git Bash)ã§ã‚„ã£ã¦ã‚‚åŒã˜çµæœã€‚
&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/issues/287&#34;&gt;Issuesã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚„ã¤&lt;/a&gt;ã¨åŒã˜å•é¡Œã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¾å¿œã‚’å¾…ã¤ã—ã‹ãªã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;linuxç‰ˆã‚’è©¦ã™&#34;&gt;Linuxç‰ˆã‚’è©¦ã™&lt;/h2&gt;

&lt;p&gt;Linuxç‰ˆã‚‚è©¦ã—ã¦ã¿ã‚‹ã€‚
minikubeã®VMãŒLinux(Boot2Docker)ãªã®ã§ã€ãã“ã§å‹•ã‹ã™ã€‚
&lt;a href=&#34;https://ja.wikipedia.org/wiki/Windows_Subsystem_for_Linux&#34;&gt;WSL&lt;/a&gt;ã¯è©¦ã•ãªã„ã€‚
ä¼šç¤¾ã®PCãŒWindows 7ã§ä½¿ãˆãªã„ã®ã§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Skaffoldã®Linuxç‰ˆãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦skaffoldã«ãƒªãƒãƒ¼ãƒ ã—ã¦ã€minikubeã®Boot2Dockerã«SSHã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã€PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã€‚
å› ã¿ã«minikubeã®Boot2Dockerã¯ã€ãƒ¦ãƒ¼ã‚¶dockerãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰tcuserã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®Linuxç‰ˆãƒã‚¤ãƒŠãƒªã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦PATHã«å…¥ã‚ŒãŸã‚‰æº–å‚™å®Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started&lt;/code&gt;ã«cdã—ã¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ERRO[0001] run: getting skaffold config: getting k8s client: Error creating kubeConfig: invalid configuration: no configuration has been provided
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨èª¿ã¹ãŸã‚‰ã€kubectlã®ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã®ãŒã ã‚ã£ã½ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# kubectl config current-context
error: current-context is not set
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Windowsä¸Šã®kubectlã«è¨­å®šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã‚’å‚è€ƒã«ã€ä»¥ä¸‹ã®å†…å®¹ã‚’&lt;code&gt;~/.kube/config&lt;/code&gt;ã«ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
clusters:
- cluster:
    certificate-authority: /c/Users/kaitoy/.minikube/ca.crt
    server: https://localhost:8443
  name: minikube
contexts:
- context:
    cluster: minikube
    user: minikube
  name: minikube
current-context: minikube
kind: Config
preferences: {}
users:
- name: minikube
  user:
    client-certificate: /c/Users/kaitoy/.minikube/client.crt
    client-key: /c/Users/kaitoy/.minikube/client.key
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å†åº¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰é•ã†ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;WARN[0002] run: build: build step: running build: read auth configs: docker config: opening docker config: open /home/docker/.docker/config.json: no such file or directory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;.docker/config.json&lt;/code&gt;ã¯&lt;code&gt;docker login&lt;/code&gt;ã™ã‚‹ã¨ç”Ÿæˆã•ã‚Œã‚‹ã‚‚ã®ã‚‰ã—ã„ã€‚
Skaffoldã®README.mdã«ã¯minikubeä½¿ã†ãªã‚‰Docker image registryè¦ã‚‰ãªã„ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã‚“ã ã‘ã©â€¦&lt;/p&gt;

&lt;p&gt;è‰²ã€…ã‚ã£ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã„ã„ã ã‘ã£ã½ã„ã®ã§ã€ä»¥ä¸‹ã§è‰¯ã—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# echo {} &amp;gt; ~/.docker/config.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å†åº¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰å‹•ã„ãŸã€‚
Dockerãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚Šã€minikubeã«PodãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;Getting Startedã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€ä¸€ç§’ã”ã¨ã«ã€Œ[getting-started] Hello world!ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started/main.go&lt;/code&gt;ã®&lt;code&gt;fmt.Println(&amp;quot;Hello world!&amp;quot;)&lt;/code&gt;ã®ã¨ã“ã‚’ã„ã˜ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰ãˆãŸã‚‰ã€è‡ªå‹•ã§å†Dockerãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã€æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—å§‹ã‚ãŸã€‚
ä¾¿åˆ©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started/skaffold.yaml&lt;/code&gt;ãŒSkaffoldã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã“ã“ã«å®šç¾©ã•ã‚ŒãŸKubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã£ã½ã„ã€‚
watchã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã©ã†æ±ºã‚ã¦ã„ã‚‹ã‚“ã ã‚ã†ã‹ã€‚
Dockerfileã¨main.goã¯watchã—ã¦ã‚‹ã‘ã©ã€æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã‚‚Dockerãƒ“ãƒ«ãƒ‰èµ°ã‚‰ãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã²ã¨ã¤å•é¡Œã¯ã€Linuxãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã§ç·¨é›†ã—ãªã„ã¨å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;minikubeã®VMã«ã¯&lt;code&gt;C:\Users&lt;/code&gt;ãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã‚‹ã®ã§ã€æœ€åˆã¯Windowsä¸Šã«cloneã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚’Skaffoldã§å®Ÿè¡Œã—ã¤ã¤ã€Windowsä¸Šã§main.goã‚’ç·¨é›†ã—ã¦ã¿ãŸã‚“ã ã‘ã©ã€ãã‚Œã ã¨ãƒ€ãƒ¡ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚„ã¯ã‚ŠWindowsç‰ˆSkaffoldã®ä¿®æ­£ãŒå¾…ãŸã‚Œã‚‹ã€‚&lt;/p&gt;
</description>
        </item>
      
    

  </channel>
</rss>
