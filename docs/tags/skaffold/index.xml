<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>skaffold on To Be Decided</title>
    <link>https://www.kaitoy.xyz/tags/skaffold/</link>
    <description>Recent content in skaffold on To Be Decided</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>© 2015 Kaito Yamada</copyright>
    <lastBuildDate>Sun, 01 Apr 2018 09:59:43 +0900</lastBuildDate>
    
	<atom:link href="https://www.kaitoy.xyz/tags/skaffold/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Skaffoldを触ってみた</title>
      <link>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</link>
      <pubDate>Sun, 01 Apr 2018 09:59:43 +0900</pubDate>
      
      <guid>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</guid>
      <description>Skaffoldを試してみた話。
   (adsbygoogle = window.adsbygoogle || []).push({});  Skaffoldとは Googleが開発している、Kubernetesアプリケーションを快適に開発するためのツール。 アプリケーションのソースを監視し、変更が入ると、自動的にコンテナイメージをビルドしてKubernetesクラスタにデプロイしてくれる。
2018/3/16に発表された新しいツールで、触った感じではまだこれからといった感じだった。
Goで書かれていて、Linux、OS X、Windows用のバイナリが提供されている。
似たツールにはMicrosoftのDraftがある。
また、Gitのコミットを自動デプロイしてくれるものに、Gitkube、Jenkins X (エックス)がある。
Windows版を試す 自PCがWindowsなのでWindows版を試す。 会社で使ってるのもWindowsだし。
Skaffoldを使うには、Skaffoldの実行バイナリ、Kubernetesクラスタ、そのクラスタをコンテクストに設定したkubectl、Dockerが必要。
まずWindows版Skaffoldをインストールする。 GitHubのリリースページからWindowsバイナリをダウンロードして、skaffold.exeにリネームしてPATHの通ったところに置くだけ。 Skaffoldのバージョンは0.3.0。

Kubernetesクラスタは、Windows 10 Home上にminikube 0.22.2で作ったKubernetes 1.7.0のクラスタ。 minikubeは以前インストールしたものを使う。
minikubeを起動。
&amp;gt; minikube start --kubernetes-version v1.7.0 kubectlもminikubeと一緒にインストール済み。

Dockerについては、デーモンはminikube上のを使えばいいとして、クライアント(Docker Client)はskaffoldコマンドから実行するのでWindows上にないとだめはなず。
WindowsでDockerと言えば今ならDocker for Windowsだけど、これはWindows 10 Proじゃないと使えなかったはずなので、Docker Toolboxでクライアントをいれた。
このクライアントはデフォルトではローカルのデーモンを見てるので、minikubeのデーモンを見させる。 そのための設定はminikubeのコマンドで分かるようになっている。
&amp;gt; minikube docker-env SET DOCKER_TLS_VERIFY=1 SET DOCKER_HOST=tcp://192.168.99.100:2376 SET DOCKER_CERT_PATH=C:\Users\kaitoy\.minikube\certs SET DOCKER_API_VERSION=1.23 REM Run this command to configure your shell: REM @FOR /f &amp;#34;tokens=*&amp;#34; %i IN (&amp;#39;minikube docker-env&amp;#39;) DO @%i これに従って以下のコマンドを実行するとクライアントの設定完了。</description>
    </item>
    
  </channel>
</rss>