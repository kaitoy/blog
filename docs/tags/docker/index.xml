<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>To Be Decided </title>
    <link>https://www.kaitoy.xyz/tags/docker/</link>
    <language>en-us</language>
    <author>Kaito Yamada</author>
    <rights>(C) 2018</rights>
    <updated>2018-04-01 09:59:43 &#43;0900 JST</updated>

    
      
        <item>
          <title>Skaffoldã‚’è§¦ã£ã¦ã¿ãŸ</title>
          <link>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</link>
          <pubDate>Sun, 01 Apr 2018 09:59:43 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2018/04/01/hello-skaffold/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold#run-a-deployment-pipeline-once&#34;&gt;Skaffold&lt;/a&gt;ã‚’è©¦ã—ã¦ã¿ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;skaffoldã¨ã¯&#34;&gt;Skaffoldã¨ã¯&lt;/h2&gt;

&lt;p&gt;GoogleãŒé–‹ç™ºã—ã¦ã„ã‚‹ã€Kubernetesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿«é©ã«é–‹ç™ºã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–ã—ã€å¤‰æ›´ãŒå…¥ã‚‹ã¨ã€è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;2018/3/16ã«&lt;a href=&#34;https://cloudplatform.googleblog.com/2018/03/introducing-Skaffold-Easy-and-repeatable-Kubernetes-development.html&#34;&gt;ç™ºè¡¨&lt;/a&gt;ã•ã‚ŒãŸæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã§ã€è§¦ã£ãŸæ„Ÿã˜ã§ã¯ã¾ã ã“ã‚Œã‹ã‚‰ã¨ã„ã£ãŸæ„Ÿã˜ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;Goã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€Linuxã€OS Xã€Windowsç”¨ã®ãƒã‚¤ãƒŠãƒªãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ä¼¼ãŸãƒ„ãƒ¼ãƒ«ã«ã¯Microsoftã®&lt;a href=&#34;https://draft.sh/&#34;&gt;Draft&lt;/a&gt;ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€Gitã®ã‚³ãƒŸãƒƒãƒˆã‚’è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã«ã€&lt;a href=&#34;https://gitkube.sh/&#34;&gt;Gitkube&lt;/a&gt;ã€&lt;a href=&#34;http://jenkins-x.io/&#34;&gt;Jenkins X (ã‚¨ãƒƒã‚¯ã‚¹)&lt;/a&gt;ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;windowsç‰ˆã‚’è©¦ã™&#34;&gt;Windowsç‰ˆã‚’è©¦ã™&lt;/h2&gt;

&lt;p&gt;è‡ªPCãŒWindowsãªã®ã§Windowsç‰ˆã‚’è©¦ã™ã€‚
ä¼šç¤¾ã§ä½¿ã£ã¦ã‚‹ã®ã‚‚Windowsã ã—ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã‚’ä½¿ã†ã«ã¯ã€Skaffoldã®å®Ÿè¡Œãƒã‚¤ãƒŠãƒªã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã€ãã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã«è¨­å®šã—ãŸkubectlã€DockerãŒå¿…è¦ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšWindowsç‰ˆSkaffoldã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/releases&#34;&gt;GitHubã®ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸&lt;/a&gt;ã‹ã‚‰Windowsãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã€skaffold.exeã«ãƒªãƒãƒ¼ãƒ ã—ã¦PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã ã‘ã€‚
Skaffoldã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.3.0ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€Windows 10 Homeä¸Šã«minikube 0.22.2ã§ä½œã£ãŸKubernetes 1.7.0ã®ã‚¯ãƒ©ã‚¹ã‚¿ã€‚
minikubeã¯&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;ä»¥å‰&lt;/a&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ã‚’ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;minikubeã‚’èµ·å‹•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; minikube start --kubernetes-version v1.7.0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;kubectlã‚‚minikubeã¨ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerã«ã¤ã„ã¦ã¯ã€ãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯minikubeä¸Šã®ã‚’ä½¿ãˆã°ã„ã„ã¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(Docker Client)ã¯skaffoldã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰å®Ÿè¡Œã™ã‚‹ã®ã§Windowsä¸Šã«ãªã„ã¨ã ã‚ã¯ãªãšã€‚&lt;/p&gt;

&lt;p&gt;Windowsã§Dockerã¨è¨€ãˆã°ä»Šãªã‚‰&lt;a href=&#34;https://www.docker.com/docker-windows&#34;&gt;Docker for Windows&lt;/a&gt;ã ã‘ã©ã€ã“ã‚Œã¯Windows 10 Proã˜ã‚ƒãªã„ã¨ä½¿ãˆãªã‹ã£ãŸã¯ãšãªã®ã§ã€&lt;a href=&#34;https://docs.docker.com/toolbox/&#34;&gt;Docker Toolbox&lt;/a&gt;ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ã„ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã¦ã‚‹ã®ã§ã€minikubeã®ãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’è¦‹ã•ã›ã‚‹ã€‚
ãã®ãŸã‚ã®è¨­å®šã¯minikubeã®ã‚³ãƒãƒ³ãƒ‰ã§åˆ†ã‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt;minikube docker-env
SET DOCKER_TLS_VERIFY=1
SET DOCKER_HOST=tcp://192.168.99.100:2376
SET DOCKER_CERT_PATH=C:\Users\kaitoy\.minikube\certs
SET DOCKER_API_VERSION=1.23
REM Run this command to configure your shell:
REM @FOR /f &amp;quot;tokens=*&amp;quot; %i IN (&#39;minikube docker-env&#39;) DO @%i
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã«å¾“ã£ã¦ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®è¨­å®šå®Œäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; @FOR /f &amp;quot;tokens=*&amp;quot; %i IN (&#39;minikube docker-env&#39;) DO @%i
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§æº–å‚™å®Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã®&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/tree/10d56cf0fd3c253b0716a084419b5833e53d9870#getting-started-with-local-tooling&#34;&gt;Getting Started&lt;/a&gt;ã‚’ã‚„ã£ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Skaffoldã®ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–‹ã„ã¦ã€&lt;code&gt;examples/getting-started&lt;/code&gt;ã«cdã—ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;&amp;gt; skaffold dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã§çµ‚ã‚ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-txt&#34;&gt;[31mERRO[0m[0047] run: running skaffold steps: starting watch on file C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: adding watch for C:\Users\kaitoy\Desktop\skaffold\examples\getting-started\Dockerfile: The parameter is incorrect.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;MinGW(Git Bash)ã§ã‚„ã£ã¦ã‚‚åŒã˜çµæœã€‚
&lt;a href=&#34;https://github.com/GoogleCloudPlatform/skaffold/issues/287&#34;&gt;Issuesã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚„ã¤&lt;/a&gt;ã¨åŒã˜å•é¡Œã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¾å¿œã‚’å¾…ã¤ã—ã‹ãªã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;linuxç‰ˆã‚’è©¦ã™&#34;&gt;Linuxç‰ˆã‚’è©¦ã™&lt;/h2&gt;

&lt;p&gt;Linuxç‰ˆã‚‚è©¦ã—ã¦ã¿ã‚‹ã€‚
minikubeã®VMãŒLinux(Boot2Docker)ãªã®ã§ã€ãã“ã§å‹•ã‹ã™ã€‚
&lt;a href=&#34;https://ja.wikipedia.org/wiki/Windows_Subsystem_for_Linux&#34;&gt;WSL&lt;/a&gt;ã¯è©¦ã•ãªã„ã€‚
ä¼šç¤¾ã®PCãŒWindows 7ã§ä½¿ãˆãªã„ã®ã§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Skaffoldã®Linuxç‰ˆãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦skaffoldã«ãƒªãƒãƒ¼ãƒ ã—ã¦ã€minikubeã®Boot2Dockerã«SSHã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã€PATHã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã€‚
å› ã¿ã«minikubeã®Boot2Dockerã¯ã€ãƒ¦ãƒ¼ã‚¶dockerãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰tcuserã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®Linuxç‰ˆãƒã‚¤ãƒŠãƒªã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦PATHã«å…¥ã‚ŒãŸã‚‰æº–å‚™å®Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started&lt;/code&gt;ã«cdã—ã¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ ERRO[0001] run: getting skaffold config: getting k8s client: Error creating kubeConfig: invalid configuration: no configuration has been provided
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨èª¿ã¹ãŸã‚‰ã€kubectlã®ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã®ãŒã ã‚ã£ã½ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ kubectl config current-context
error: current-context is not set
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Windowsä¸Šã®kubectlã«è¨­å®šã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆã‚’å‚è€ƒã«ã€ä»¥ä¸‹ã®å†…å®¹ã‚’&lt;code&gt;~/.kube/config&lt;/code&gt;ã«ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: v1
clusters:
- cluster:
    certificate-authority: /c/Users/kaitoy/.minikube/ca.crt
    server: https://localhost:8443
  name: minikube
contexts:
- context:
    cluster: minikube
    user: minikube
  name: minikube
current-context: minikube
kind: Config
preferences: {}
users:
- name: minikube
  user:
    client-certificate: /c/Users/kaitoy/.minikube/client.crt
    client-key: /c/Users/kaitoy/.minikube/client.key
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å†åº¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰é•ã†ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;WARN[0002] run: build: build step: running build: read auth configs: docker config: opening docker config: open /home/docker/.docker/config.json: no such file or directory
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;.docker/config.json&lt;/code&gt;ã¯&lt;code&gt;docker login&lt;/code&gt;ã™ã‚‹ã¨ç”Ÿæˆã•ã‚Œã‚‹ã‚‚ã®ã‚‰ã—ã„ã€‚
Skaffoldã®README.mdã«ã¯minikubeä½¿ã†ãªã‚‰Docker image registryè¦ã‚‰ãªã„ã£ã¦æ›¸ã„ã¦ã‚ã‚‹ã‚“ã ã‘ã©â€¦&lt;/p&gt;

&lt;p&gt;è‰²ã€…ã‚ã£ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ã„ã„ã ã‘ã£ã½ã„ã®ã§ã€ä»¥ä¸‹ã§è‰¯ã—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ echo {} &amp;gt; ~/.docker/config.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å†åº¦&lt;code&gt;skaffold dev&lt;/code&gt;ã—ãŸã‚‰å‹•ã„ãŸã€‚
Dockerãƒ“ãƒ«ãƒ‰ãŒèµ°ã‚Šã€minikubeã«PodãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;Getting Startedã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã€ä¸€ç§’ã”ã¨ã«ã€Œ[getting-started] Hello world!ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started/main.go&lt;/code&gt;ã®&lt;code&gt;fmt.Println(&amp;quot;Hello world!&amp;quot;)&lt;/code&gt;ã®ã¨ã“ã‚’ã„ã˜ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¤‰ãˆãŸã‚‰ã€è‡ªå‹•ã§å†Dockerãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã€æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—å§‹ã‚ãŸã€‚
ä¾¿åˆ©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;examples/getting-started/skaffold.yaml&lt;/code&gt;ãŒSkaffoldã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã“ã“ã«å®šç¾©ã•ã‚ŒãŸKubernetesãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚Œã‚‹ã£ã½ã„ã€‚
watchã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã©ã†æ±ºã‚ã¦ã„ã‚‹ã‚“ã ã‚ã†ã‹ã€‚
Dockerfileã¨main.goã¯watchã—ã¦ã‚‹ã‘ã©ã€æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã‚‚Dockerãƒ“ãƒ«ãƒ‰èµ°ã‚‰ãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã²ã¨ã¤å•é¡Œã¯ã€Linuxãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã§ç·¨é›†ã—ãªã„ã¨å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã¦ãã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;minikubeã®VMã«ã¯&lt;code&gt;C:\Users&lt;/code&gt;ãŒãƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã‚‹ã®ã§ã€æœ€åˆã¯Windowsä¸Šã«cloneã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚’Skaffoldã§å®Ÿè¡Œã—ã¤ã¤ã€Windowsä¸Šã§main.goã‚’ç·¨é›†ã—ã¦ã¿ãŸã‚“ã ã‘ã©ã€ãã‚Œã ã¨ãƒ€ãƒ¡ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚„ã¯ã‚ŠWindowsç‰ˆSkaffoldã®ä¿®æ­£ãŒå¾…ãŸã‚Œã‚‹ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetes 1.8ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦ã€‚ã‚ã¨Dashboardã€‚</title>
          <link>https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/</link>
          <pubDate>Tue, 31 Oct 2017 16:57:04 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/&#34;&gt;Kubernetes1.8ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚kubeadmã§ã€‚&lt;/a&gt;ã€ã§ã€DashboardãŒã†ã¾ãå‹•ã‹ãªã„å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚“ã ã‘ã©ã€ãã‚Œã‚’è§£æ±ºã—ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;å•é¡Œã®ç¾è±¡&#34;&gt;å•é¡Œã®ç¾è±¡&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/kubeadm/&#34;&gt;kubeadm&lt;/a&gt;ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã§ã€è‡ªå‰ã®ã‚¢ãƒ—ãƒª(&lt;a href=&#34;https://www.kaitoy.xyz/2016/12/11/goslings-development-memo0-intro-design/&#34;&gt;Goslings&lt;/a&gt;)ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã¾ã§ã¯ã†ã¾ãã§ããŸã‚“ã ã‘ã©ã€&lt;a href=&#34;https://github.com/kubernetes/dashboard&#34;&gt;Dashboard&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚‰å‹•ã‹ãšã€Web UIã«&lt;code&gt;kubectl proxy&lt;/code&gt;çµŒç”±ã§ã¤ãªã„ã§ã‚‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã—ã¾ã£ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;å¯¾ç­–&#34;&gt;å¯¾ç­–&lt;/h2&gt;

&lt;p&gt;ãªã‚“ã¨ãªãã€ã‚¯ãƒ©ã‚¹ã‚¿å†…éƒ¨ã§ã®åå‰è§£æ±ºã«ã¯&lt;a href=&#34;https://github.com/kubernetes/kubernetes/tree/master/cluster/addons/dns&#34;&gt;kube-dns&lt;/a&gt;ã«ã‚ˆã‚‹DNSã‚µãƒ¼ãƒ“ã‚¹ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã£ã½ã„ã®ã§ã€&lt;code&gt;/etc/hosts&lt;/code&gt;ã«ä½™è¨ˆãªäº‹æ›¸ã„ãŸã®ãŒã„ã‘ãªã‹ã£ãŸã¨æ€ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã®ã§ã€&lt;code&gt;/etc/hosts&lt;/code&gt;ã‹ã‚‰k8s-masterã¨k8s-nodeã®ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€&lt;code&gt;kubeadm init&lt;/code&gt;ã‹ã‚‰ã‚„ã‚Šç›´ã—ã¦ã¿ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;çµæœ&#34;&gt;çµæœ&lt;/h2&gt;

&lt;p&gt;ã—ãŸã‚‰ã¡ã‚ƒã‚“ã¨å‹•ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;VMã®ãƒ›ã‚¹ãƒˆã§&lt;code&gt;kubectl proxy&lt;/code&gt;ã—ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl proxy
Starting to serve on 127.0.0.1:8001
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/&lt;/code&gt;ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¤ãªã„ã ã‚‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/dashboard.png&#34; alt=&#34;dashboard&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dashboardã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³å‡¦ç†ã¯Kubernetes(ã¨ã„ã†ã‹kube-apiserver)ã®ãã‚Œã«ç§»è­²ã—ã¦ã„ã‚‹ã€‚
Dashboardã¯ãã“ã§èªè¨¼ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ã§ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€æƒ…å ±ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹ã€‚å¤šåˆ†ã€‚&lt;/p&gt;

&lt;p&gt;Dashboardã¸ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³æ–¹æ³•ã¯&lt;a href=&#34;https://github.com/kubernetes/dashboard/wiki/Access-control&#34;&gt;ã„ãã¤ã‹ã‚ã‚‹&lt;/a&gt;ãŒã€ãã‚Œã‚‰ã‚’ç†è§£ã™ã‚‹ã«ã¯Kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã«ã¤ã„ã¦å­¦ã¶ã“ã¨ã‚’æ¨å¥¨ã¨ã‚ã£ãŸã®ã§ã¡ã‚‡ã£ã¨&lt;a href=&#34;https://kubernetes.io/docs/admin/accessing-the-api/&#34;&gt;Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã‚’èª­ã‚“ã ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡&#34;&gt;Kubernetesã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯kube-apiserverã§ã‚ã‚Šã€ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒªã‚½ãƒ¼ã‚¹ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚‚kube-apiserverãŒã‚„ã‚‹ã€‚
ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨kube-apiserverã¨ã®TLSã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒç¢ºç«‹ã—ãŸå¾Œã€HTTPå±¤ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã¦ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’ã™ã‚‹ã‚“ã ã‘ã©ã€ãã®å‡¦ç†ã¯&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/&#34;&gt;Authentication&lt;/a&gt;(èªè¨¼)ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/&#34;&gt;Authorization&lt;/a&gt;(èªå¯)ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/admission-controllers/&#34;&gt;Admission&lt;/a&gt;(è¨±å¯)ã®ä¸‰æ®µéšã‹ã‚‰ãªã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;authentication&#34;&gt;Authentication&lt;/h3&gt;

&lt;p&gt;ç¬¬ä¸€æ®µéšãŒAuthenticationã€‚
ã“ã“ã§ã¯ã€kube-apiserverã«ä»•è¾¼ã¾ã‚ŒãŸAuthenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒãƒ¦ãƒ¼ã‚¶èªè¨¼ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;KubernetesãŒèªè¨¼ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã«ã¯ã€KubernetesãŒç®¡ç†ã™ã‚‹Service Accountã¨ã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–éƒ¨ã§ç®¡ç†ã•ã‚Œã‚‹é€šå¸¸ãƒ¦ãƒ¼ã‚¶ã®äºŒé€šã‚ŠãŒã‚ã‚‹ã€‚
Service Accountã¯PodãŒkube-apiserverã¨è©±ã™ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ã§ã€é€šå¸¸ãƒ¦ãƒ¼ã‚¶ã¯ä¸»ã«äººãŒkubectlã¨ã‹ã§kube-apiserverã¨è©±ã™ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶ã€‚(åŒ¿åã§è©±ã™ã“ã¨ã‚‚ã§ãã‚‹ã€‚)
å‰è€…ã¯ServiceAccountã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å®šç¾©ã•ã‚Œã‚‹ã‘ã©ã€å¾Œè€…ç”¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountã¯Namespaceã¨é–¢é€£ä»˜ã(ã¤ã¾ã‚Šnamespaceæ¯ã«ãƒ¦ãƒ‹ãƒ¼ã‚¯)ã€Secretã«ç´ã¥ãã€‚
Secretã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã®ã‚»ãƒƒãƒˆã‚’å®šç¾©ã—ã€Podã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã€‚
ServiceAccountã¨Secretã¯ã€ãµã¤ã†ã¯è‡ªå‹•ã§ä½œã‚‰ã‚Œã€Podã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kube-apiserverã«ã¯ä¸€ã¤ä»¥ä¸Šã®Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¨­å®šã§ãã¦ã€ã©ã‚Œã‹ã§èªè¨¼ã§ãã‚Œã°æ¬¡ã®æ®µéšã«é€²ã‚ã‚‹ã€‚
èªè¨¼å¤±æ•—ã™ã‚‹ã¨HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰401ãŒè¿”ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#x509-client-certs&#34;&gt;ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨¼æ˜æ›¸&lt;/a&gt;: X.509ã®ãƒ‡ã‚£ã‚¸ã‚¿ãƒ«è¨¼æ˜æ›¸ã‚’ä½¿ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--client-ca-file&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¨¼æ˜æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚è¨¼æ˜æ›¸ã®Common NameãŒãƒ¦ãƒ¼ã‚¶åã«ãªã‚Šã€OrganizationãŒã‚°ãƒ«ãƒ¼ãƒ—ã«ãªã‚‹ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãã®è¨¼æ˜æ›¸ã¨å¯¾å¿œã™ã‚‹ç§˜å¯†éµã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#putting-a-bearer-token-in-a-request&#34;&gt;Bearer Token&lt;/a&gt;: ç„¡è¨˜åãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--token-auth-file&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚ãƒˆãƒ¼ã‚¯ãƒ³æƒ…å ±ã¯CSVã§ã€ã€Œ&lt;code&gt;token,user,uid,&amp;quot;group1,group2,group3&amp;quot;&lt;/code&gt;ã€ã¨ã„ã†å½¢å¼ã§æ›¸ãã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³æ–‡å­—åˆ—ã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#static-password-file&#34;&gt;ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼&lt;/a&gt;: ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§èªè¨¼ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--basic-auth-file&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’æ¸¡ã—ã¦ã‚„ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹ã€‚ã“ã®ãƒªã‚¹ãƒˆã¯CSVã§ã€ã€Œ&lt;code&gt;password,user,uid,&amp;quot;group1,group2,group3&amp;quot;&lt;/code&gt;ã€ã¨ã„ã†å½¢å¼ã§æ›¸ãã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã¯ã€ãƒ¦ãƒ¼ã‚¶åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã€‚HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ™‚ã¯Authorizationãƒ˜ãƒƒãƒ€ãŒä½¿ãˆã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authentication/#service-account-tokens&#34;&gt;Service Account Token&lt;/a&gt;: Service Accountã‚’ç½²åä»˜ãBearer Tokenã§èªè¨¼ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ã«ãªã‚‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã®ã‚ãŸã‚Šã€Qiitaã®ã€Œ&lt;a href=&#34;https://qiita.com/hiyosi/items/43465d4fc501c2044d01#x509-client-certs&#34;&gt;kubernetesãŒã‚µãƒãƒ¼ãƒˆã™ã‚‹èªè¨¼æ–¹æ³•ã®å…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å‹•ã‹ã™&lt;/a&gt;ã€ã¨ã„ã†è¨˜äº‹ã‚’ã¿ã‚‹ã¨ç†è§£ãŒæ·±ã¾ã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;authorization&#34;&gt;Authorization&lt;/h3&gt;

&lt;p&gt;Authenticationã‚’ãƒ‘ã‚¹ã™ã‚‹ã¨ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¦ãƒ¼ã‚¶(ã¨ã‚°ãƒ«ãƒ¼ãƒ—)ãŒèªè¨¼ã•ã‚Œã€ç¬¬äºŒæ®µéšã®Authorizationãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡¦ç†ã«ç§»ã‚‹ã€‚
ã“ã“ã§ã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹(æ“ä½œå¯¾è±¡ã€æ“ä½œç¨®åˆ¥(ãƒ¡ã‚½ãƒƒãƒ‰)ç­‰)ã‚’è¦‹ã¦ã€ãã‚ŒãŒãƒ¦ãƒ¼ã‚¶ã«è¨±ã•ã‚ŒãŸã‚‚ã®ãªã‚‰èªå¯ã™ã‚‹ã€‚
ä½•ã‚’è¨±ã™ã‹ã¯äº‹å‰ã«ã‚¯ãƒ©ã‚¹ã‚¿ã«ãƒãƒªã‚·ãƒ¼ã‚’å®šç¾©ã—ã¦ãŠãã€‚&lt;/p&gt;

&lt;p&gt;kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--authorization-mode&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä¸€ã¤ä»¥ä¸Šã®Authenticatorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¦ã€ã©ã‚Œã‹ã§èªå¯ã•ã‚Œã‚Œã°æ¬¡ã®æ®µéšã«é€²ã‚ã‚‹ã€‚
ã•ã‚‚ãªãã°HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰403ãŒè¿”ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Authorizationãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/node/&#34;&gt;Node&lt;/a&gt;: kubeletã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’èªå¯ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/abac/&#34;&gt;ABAC Mode&lt;/a&gt;: Attribute-based Access Controlã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹å±æ€§ã¨Policyã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¯”è¼ƒã—ã¦ã€ãƒãƒƒãƒã™ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°èªå¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/rbac/&#34;&gt;RBAC Mode&lt;/a&gt;: Role-Based Access Controlã€‚Roleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ClusterRoleã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ­ãƒ¼ãƒ«ã‚’ä½œæˆã—ã€ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚„è¨±å¯ã™ã‚‹æ“ä½œã‚’å®šç¾©ã—ã¦ã€RoleBindingã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ClusterRoleBindingã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ¦ãƒ¼ã‚¶åã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã¨ç´ã¥ã‘ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://kubernetes.io/docs/admin/authorization/webhook/&#34;&gt;Webhook Mode&lt;/a&gt;: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹ã‚’ç¤ºã™SubjectAccessReviewã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã—ãŸJSONãƒ‡ãƒ¼ã‚¿ã‚’HTTPã§POSTã—ã¦ã€ãã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã‚ˆã£ã¦èªå¯å¯å¦ã‚’æ±ºã‚ã‚‹ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;admission-control&#34;&gt;Admission Control&lt;/h3&gt;

&lt;p&gt;Authorizationã‚’ãƒ‘ã‚¹ã™ã‚‹ã¨ã€ç¬¬ä¸‰æ®µéšã®Admission Controlãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å‡¦ç†ã«ç§»ã‚‹ã€‚
ã“ã“ã§ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã€å‰Šé™¤ã€æ›´æ–°ãªã©ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ°¸ç¶šåŒ–å‰ã«ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã—ã¦ã€æ°¸ç¶šåŒ–ã‚’è¨±å¯ã™ã‚‹ã‹ã‚’æ±ºã‚ã‚‹ã€‚
ãƒªã‚¯ã‚¨ã‚¹ãƒˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ãã‚Œã«é–¢é€£ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ°¸ç¶šåŒ–å‰ã«ã„ã˜ã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®šã—ãŸã‚Šã‚‚ã§ãã‚‹ã€‚
èª­ã¿å–ã‚Šãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å ´åˆã¯å®Ÿè¡Œã•ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;kube-apiserverèµ·å‹•æ™‚ã«&lt;code&gt;--admission-control&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§è¤‡æ•°ã®Admission Controlãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æŒ‡å®šã§ãã¦ã€å…¨ã¦ãŒè¨±å¯ã—ãªã„ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå´ä¸‹ã•ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Admission Controlãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯è‰²ã€…ã‚ã‚‹ã‚“ã ã‘ã©ã€Kubernetes 1.6ä»¥é™ã§ã¯&lt;code&gt;--admission-control=NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,DefaultStorageClass,ResourceQuota,DefaultTolerationSeconds&lt;/code&gt;ã¨æŒ‡å®šã™ã‚‹ã®ãŒå¼·ãæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹ã€‚
ã“ã“ã§æŒ‡å®šã—ã¦ã„ã‚‹&lt;a href=&#34;https://kubernetes.io/docs/admin/admission-controllers/#serviceaccount&#34;&gt;ServiceAccountãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«&lt;/a&gt;ã¯ã€kube-controller-managerã«å«ã¾ã‚Œã‚‹ServiceAccountControllerã¨TokenControllerã¨å”èª¿ã—ã€Service Accountå‘¨ã‚Šã®å‡¦ç†ã‚’&lt;a href=&#34;https://kubernetes.io/docs/admin/service-accounts-admin/#service-account-automation&#34;&gt;è‡ªå‹•åŒ–&lt;/a&gt;ã—ã¦ãã‚Œã‚‹ã‚‚ã®ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountControllerã¯ã€å„Namespaceã«&lt;code&gt;default&lt;/code&gt;ã¨ã„ã†åå‰ã®Service Accountã‚’ä½œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountãŒä½œæˆã•ã‚Œã‚‹ã¨TokenControllerãŒå‹•ãã€å¯¾å¿œã—ãŸSecretã¨ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆã—ã¦ç´ã¥ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ServiceAccountãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€Podã®ä½œæˆã‚„æ›´æ–°æ™‚ã«å‹•ãã€ä»¥ä¸‹ã®å‡¦ç†ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Podã«ServiceAccountãŒè¨­å®šã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€&lt;code&gt;default&lt;/code&gt;ã‚’è¨­å®šã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;Podã«è¨­å®šã•ã‚ŒãŸServiceAccountãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€å­˜åœ¨ã—ã¦ã„ãªã‘ã‚Œã°ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å´ä¸‹ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;PodãŒImagePullSecretsã‚’å«ã‚“ã§ã„ãªã‘ã‚Œã°ã€ServiceAccountã®ImagePullSecretsã‚’Podã«è¿½åŠ ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å«ã‚“ã Volumeã‚’Podã«è¿½åŠ ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;Podå†…ã®å„ã‚³ãƒ³ãƒ†ãƒŠã®&lt;code&gt;/var/run/secrets/kubernetes.io/serviceaccount&lt;/code&gt;ã«ãã®Volumeã‚’ãƒã‚¦ãƒ³ãƒˆã•ã›ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;dashboardã¸bearer-tokenã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&#34;&gt;Dashboardã¸Bearer Tokenã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&lt;/h2&gt;

&lt;p&gt;Dashboardã®è©±ã«æˆ»ã‚‹ã€‚
ã¨ã‚Šã‚ãˆãš&lt;a href=&#34;https://github.com/kubernetes/dashboard/wiki/Access-control#bearer-token&#34;&gt;Bearer Tokenã§ã®ã‚µã‚¤ãƒ³ã‚¤ãƒ³&lt;/a&gt;ã‚’è©¦ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è‰²ã‚“ãªService AccountãŒä½œã‚‰ã‚Œã¦ã„ã¦ã€ç•°ãªã‚‹æ¨©é™ã‚’æŒã£ã¦ã„ã‚‹ã€‚
ãã®ã„ãšã‚Œã‹ã®Secretã®Tokenã‚’ä½¿ã£ã¦Dashboardã¸ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã§ãã‚‹ã‚‰ã—ã„ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§&lt;code&gt;kube-system&lt;/code&gt;ã¨ã„ã†Namespaceã®Secretã‚’ä¸€è¦§ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl -n kube-system get secret
NAME                                     TYPE                                  DATA      AGE
attachdetach-controller-token-skzmj      kubernetes.io/service-account-token   3         18m
bootstrap-signer-token-mhqfh             kubernetes.io/service-account-token   3         18m
bootstrap-token-2964e0                   bootstrap.kubernetes.io/token         7         18m
certificate-controller-token-fvrgm       kubernetes.io/service-account-token   3         18m
cronjob-controller-token-hmrdm           kubernetes.io/service-account-token   3         18m
daemon-set-controller-token-vqz85        kubernetes.io/service-account-token   3         18m
default-token-h987g                      kubernetes.io/service-account-token   3         18m
deployment-controller-token-86bp9        kubernetes.io/service-account-token   3         18m
disruption-controller-token-6mskg        kubernetes.io/service-account-token   3         18m
endpoint-controller-token-d4wz6          kubernetes.io/service-account-token   3         18m
generic-garbage-collector-token-smfgq    kubernetes.io/service-account-token   3         18m
horizontal-pod-autoscaler-token-wsbn9    kubernetes.io/service-account-token   3         18m
job-controller-token-fttt2               kubernetes.io/service-account-token   3         18m
kube-dns-token-sn5qq                     kubernetes.io/service-account-token   3         18m
kube-proxy-token-w96xd                   kubernetes.io/service-account-token   3         18m
kubernetes-dashboard-certs               Opaque                                2         7m
kubernetes-dashboard-key-holder          Opaque                                2         6m
kubernetes-dashboard-token-gtppc         kubernetes.io/service-account-token   3         7m
namespace-controller-token-5kksd         kubernetes.io/service-account-token   3         18m
node-controller-token-chpwt              kubernetes.io/service-account-token   3         18m
persistent-volume-binder-token-d5x49     kubernetes.io/service-account-token   3         18m
pod-garbage-collector-token-l8sct        kubernetes.io/service-account-token   3         18m
replicaset-controller-token-njjwr        kubernetes.io/service-account-token   3         18m
replication-controller-token-qrr5h       kubernetes.io/service-account-token   3         18m
resourcequota-controller-token-dznjm     kubernetes.io/service-account-token   3         18m
service-account-controller-token-99nh8   kubernetes.io/service-account-token   3         18m
service-controller-token-9cw7k           kubernetes.io/service-account-token   3         18m
statefulset-controller-token-8z8w9       kubernetes.io/service-account-token   3         18m
token-cleaner-token-cxbkc                kubernetes.io/service-account-token   3         18m
ttl-controller-token-k7gh7               kubernetes.io/service-account-token   3         18m
weave-net-token-lqdgm                    kubernetes.io/service-account-token   3         17m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€é©å½“ã«ãã‚Œã£ã½ã„Secretã€&lt;code&gt;deployment-controller-token-86bp9&lt;/code&gt;ã‚’é¸ã‚“ã§ã€&lt;code&gt;kubectl describe&lt;/code&gt;ã—ãŸã‚‰TokenãŒè¦‹ã‚ŒãŸã€‚
(Dataã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®&lt;code&gt;token&lt;/code&gt;ã®ã¨ã“ã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl -n kube-system describe secret deployment-controller-token-86bp9
Name:         deployment-controller-token-86bp9
Namespace:    kube-system
Labels:       &amp;lt;none&amp;gt;
Annotations:  kubernetes.io/service-account.name=deployment-controller
              kubernetes.io/service-account.uid=17fc5207-b627-11e7-9867-000c2938deae

Type:  kubernetes.io/service-account-token

Data
====
ca.crt:     1025 bytes
namespace:  11 bytes
token:      eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZXBsb3ltZW50LWNvbnRyb2xsZXItdG9rZW4tODZicDkiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVwbG95bWVudC1jb250cm9sbGVyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiMTdmYzUyMDctYjYyNy0xMWU3LTk4NjctMDAwYzI5MzhkZWFlIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRlcGxveW1lbnQtY29udHJvbGxlciJ9.ZGV9XDd-GQjAwRuLKpdsWL_dTeF0Mr_2gF117OW4BhEuLwPujnsfOuysAQ-DUtNOp1NHKGitlfxjh6fKo4tFsdwLVJWrRK6i4YH1Mm2No7Sheks7IQn1FnwSmr7yCuvjlHD2e4RpZH0wupOFoY7FHntilhOWbXTJzJzi7TozLX02EKbkVGAsvch3LZ6p8jmUH5hr8DdKc4jbmTRp86SOiFS4_-TJ3RtAHCxiioAuKzXm3-rAWdeGLLcKrM2pAFSAGaBNu8MO5BZlAi6h3Xt4x-8-1ZXs4mudtJiECvjB-XIwiwzhpq8wIPZvvQQ-f1khixOyk1RfIXRJhIE5Gqvi8g
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ã§Tokenã‚’é¸æŠã—ã€
ã“ã®ã€&lt;code&gt;eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkZXBsb3ltZW50LWNvbnRyb2xsZXItdG9rZW4tODZicDkiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVwbG95bWVudC1jb250cm9sbGVyIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiMTdmYzUyMDctYjYyNy0xMWU3LTk4NjctMDAwYzI5MzhkZWFlIiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRlcGxveW1lbnQtY29udHJvbGxlciJ9.ZGV9XDd-GQjAwRuLKpdsWL_dTeF0Mr_2gF117OW4BhEuLwPujnsfOuysAQ-DUtNOp1NHKGitlfxjh6fKo4tFsdwLVJWrRK6i4YH1Mm2No7Sheks7IQn1FnwSmr7yCuvjlHD2e4RpZH0wupOFoY7FHntilhOWbXTJzJzi7TozLX02EKbkVGAsvch3LZ6p8jmUH5hr8DdKc4jbmTRp86SOiFS4_-TJ3RtAHCxiioAuKzXm3-rAWdeGLLcKrM2pAFSAGaBNu8MO5BZlAi6h3Xt4x-8-1ZXs4mudtJiECvjB-XIwiwzhpq8wIPZvvQQ-f1khixOyk1RfIXRJhIE5Gqvi8g&lt;/code&gt;ã‚’å…¥åŠ›ã—ãŸã‚‰ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã§ãã¦ã€Goslingsã®Deploymentã®æƒ…å ±ãŒè¦‹ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/deploy.png&#34; alt=&#34;deploy&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Podã‚‚è¦‹ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/pods.png&#34; alt=&#34;pods&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‘ã©Serviceã¯è¦‹ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/service.png&#34; alt=&#34;service&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å„ç”»é¢ã§ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã®ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ã‚‚å‡ºã¦ã„ã¦ã€&lt;code&gt;deployment-controller&lt;/code&gt;ãƒ¦ãƒ¼ã‚¶ã§è¦‹ã‚Œã‚‹ç¯„å›²ã¯ã‚ã¾ã‚Šåºƒããªã„ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;dashboardã¸adminæ¨©é™ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&#34;&gt;Dashboardã¸Adminæ¨©é™ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³&lt;/h2&gt;

&lt;p&gt;Dashboardã®Podã®Service Accountã§ã‚ã‚‹&lt;code&gt;kubernetes-dashboard&lt;/code&gt;ã«Adminæ¨©é™ã‚’ä»˜ã‘ã¦ã‚„ã£ã¦ã€ã‚µã‚¤ãƒ³ã‚¤ãƒ³ç”»é¢ã§SKIPã‚’æŠ¼ã™ã¨ãªã‚“ã§ã‚‚è¦‹ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ã®ã§æœ¬ç•ªã§ã¯NGè¨­å®šã ã‘ã©ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;cluster-admin&lt;/code&gt;ã¨ã„ã†ClusterRoleãŒã‚ã£ã¦ã€ã“ã‚Œã‚’&lt;code&gt;kubernetes-dashboard&lt;/code&gt;ã«ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ClusterRoleBindingã‚’ä½œã£ã¦ã‚„ã‚Œã°ã„ã„ã€‚&lt;/p&gt;

&lt;p&gt;ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªYAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yml&#34;&gt;apiVersion: rbac.authorization.k8s.io/v1beta1
kind: ClusterRoleBinding
metadata:
  name: kubernetes-dashboard
  labels:
    k8s-app: kubernetes-dashboard
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: kubernetes-dashboard
  namespace: kube-system
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;kubectl&lt;/code&gt;ã§æŠ•ã’ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl create -f dashboard-admin.yml
clusterrolebinding &amp;quot;kubernetes-dashboard&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã—ãŸã‚‰Serviceã‚‚è¦‹ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/service-admin.png&#34; alt=&#34;service-admin&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã¤ã„ã§ã«HWãƒªã‚½ãƒ¼ã‚¹æƒ…å ±ã‚‚è¦‹ã‚ŒãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/retry-dashboard-on-k8s-cluster-by-kubeadm/resources.png&#34; alt=&#34;resources&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æº€è¶³ã—ãŸã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetes1.8ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚kubeadmã§ã€‚</title>
          <link>https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/</link>
          <pubDate>Sat, 21 Oct 2017 10:42:46 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹&lt;/a&gt;ã€ã§Minikubeã‚’ã‚„ã£ãŸã‚“ã ã‘ã©ã€ã‚‚ã†ä¸€æ­©ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ã™ã¹ãã€&lt;a href=&#34;https://kubernetes.io/docs/admin/kubeadm/&#34;&gt;kubeadm&lt;/a&gt;ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’çµ„ã‚“ã§ã¿ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubeadmã¨ã¯&#34;&gt;kubeadmã¨ã¯&lt;/h2&gt;

&lt;p&gt;kubeadm(ã‚­ãƒ¥ãƒ¼ãƒ–ã‚¢ãƒ€ãƒ )ã¯Kubernetesã«å«ã¾ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ç°¡å˜ã«æ§‹ç¯‰ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚
Kubernetes 1.4ã§è¿½åŠ ã•ã‚Œã€Kubernetes 1.8ã®æ™‚ç‚¹ã§ã¾ã ãƒ™ãƒ¼ã‚¿ã§ã€æœ¬ç•ªç’°å¢ƒã«ã¯ä½¿ã‚ãªã„ã§ã¨ãªã£ã¦ã„ã‚‹ã€‚
Qiitaã®ã€Œ&lt;a href=&#34;https://qiita.com/helix_kaz/items/9c4a83532f949d8a94ef&#34;&gt;kubeadmãŒä½•ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã‹ã¿ã¦ã¿ãŸ&lt;/a&gt;ã€ã¨ã„ã†è¨˜äº‹ãŒã€ä¸­ã§ã©ã‚“ãªå‹•ä½œã‚’ã—ã¦ã‚‹ã‹ã‚’è§£èª¬ã—ã¦ã„ã¦å‚è€ƒã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ç”¨æ„Ÿã‹ã‚‰ã™ã‚‹ã¨ã€&lt;a href=&#34;https://docs.docker.com/engine/swarm/&#34;&gt;Dockerã®Swarmãƒ¢ãƒ¼ãƒ‰&lt;/a&gt;ã§ã®ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰ã®å®¹æ˜“ã•ã‚’Kubernetesã«å–ã‚Šè¾¼ã‚€ã“ã¨ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹æ°—ãŒã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãƒãƒƒãƒˆã§è¦‹ã‹ã‘ãŸè©•åˆ¤ã ã¨ã€ç¢ºã‹ã«ç°¡å˜ã«ã‚¯ãƒ©ã‚¹ã‚¿æ§‹ç¯‰ã§ãã¦ç´ æ™´ã‚‰ã—ã„ã‘ã©ã€TLSã®è¨¼æ˜æ›¸ç”Ÿæˆãªã©ã€ç´°ã‹ãåˆ¶å¾¡ã§ããªãã¦å›°ã‚‹ã¨ã“ã‚ãŒã‚ã£ã¦ã€ã‚„ã¯ã‚Šæœ¬ç•ªã«ä½¿ãˆã‚‹ãƒ¬ãƒ™ãƒ«ã§ã¯ãªã„ã¨ã®ã“ã¨ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ã‚ã¨ã«ã‹ãè©¦ã—ã¦ã¿ã‚‹ä¾¡å€¤ã¯ã‚ã‚ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubeadmã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;kubeadmã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/install-kubeadm/&#34;&gt;Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã«å¾“ã£ã¦kubeadmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ç‰ˆã®1.8.1ã€‚&lt;/p&gt;

&lt;h3 id=&#34;vmä½œæˆ&#34;&gt;VMä½œæˆ&lt;/h3&gt;

&lt;p&gt;kubeadmã®ã‚µãƒãƒ¼ãƒˆOSã¯ã€Ubuntu 16.04+ã€Debian 9ã€CentOS 7ã€RHEL 7ã€Fedora 25/26ã€HypriotOS v1.0.1+ã¨ãªã£ã¦ã„ã‚‹ã€‚
æ…£ã‚Œã¦ã„ã‚‹CentOS 7ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚
(HypriotOSã£ã¦ãªã‚“ã ã‚ã†?)&lt;/p&gt;

&lt;p&gt;è‡ªå‰ã®ãƒãƒ¼ãƒˆPCã®Windows 10 x64 Home Editionä¸Šã®VMware Player 12ã®VMã«CentOS 7ã‚’å…¥ã‚ŒãŸã€‚
ãƒ¡ãƒ¢ãƒªã¯1GBä»¥ä¸ŠãŒè¦ä»¶ãªã®ã§ã€å‘³ã‚’ä»˜ã‘ã¦1.4GBã§ã€‚
VMé–“ã§é€šä¿¡ã§ãã‚‹ã“ã¨ã£ã¦è¦ä»¶ãŒã‚ã£ãŸã‘ã©ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚‚å¿…è¦ãªã¯ãšãªã®ã§ã€NICã¯NATã®ã‚„ã¤ã§ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®VMã¯Masterã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;h3 id=&#34;osè¨­å®š&#34;&gt;OSè¨­å®š&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/install-kubeadm/#check-required-ports&#34;&gt;KubernetesãŒä½¿ã†ãƒãƒ¼ãƒˆ&lt;/a&gt;ã‚’ã„ã‚ã„ã‚é–‹ã‘ãªã‘ã‚Œã°ã„ã‘ãªã„ã‚“ã ã‘ã©ã€ã‚ã‚“ã©ã„ã®ã§firewalldã‚’ç„¡åŠ¹ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# systemctl stop firewalld
[root@localhost ~]# systemctl disable firewalld
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãªã‚“ã¨ãªãIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’DHCPã‹ã‚‰é™çš„å‰²ã‚Šå½“ã¦ã«ã€‚(192.168.171.200)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# nmcli c modify ens33 ipv4.method manual
[root@k8s-master ~]# nmcli c modify ens33 ipv4.addresses 192.168.171.200/24
[root@k8s-master ~]# nmcli c modify ens33 ipv4.dns 192.168.171.2
[root@k8s-master ~]# nmcli c modify ens33 ipv4.gateway 192.168.171.2
[root@k8s-master ~]# systemctl restart network
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãƒ›ã‚¹ãƒˆåã‚’localhost.localdomainã‹ã‚‰k8s-masterã«å¤‰æ›´ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# hostnamectl set-hostname k8s-master
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ­ã‚°ã‚¤ãƒ³ã§åæ˜ ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;/etc/hosts&lt;/code&gt;ã‚’ç·¨é›†ã—ã¦ã€k8s-masterã®ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã€‚
ã‚ã¨ã§ä½œã‚‹ã‚‚ã†ä¸€ã¤ã®VMã€k8s-nodeã®ã»ã†ã‚‚ã‚¨ãƒ³ãƒˆãƒªã‚’è¿½åŠ ã€‚
(ã“ã‚Œã¯ã ã‚ã ã£ãŸã£ã½ã„ã€‚è©³ç´°ã¯å¾Œè¿°ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹æˆã™ã‚‹ãƒãƒ¼ãƒ‰ã¯ã€ä¸€æ„ã®MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¨product_uuidã‚’æŒã£ã¦ã„ãªã„ã¨ã„ã‘ãªã„ã€‚
KubernetesãŒãã‚Œã‚‰ã§ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒãƒ¼ãƒ‰ã‚’åŒºåˆ¥ã—ã¦ã‚‹ã®ã§ã€‚&lt;/p&gt;

&lt;p&gt;MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¯&lt;code&gt;ip link&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# ip link
1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT qlen 1
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: ens33: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT qlen 1000
    link/ether 00:0c:29:38:de:ae brd ff:ff:ff:ff:ff:ff
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;product_uuidã¯ã€&lt;a href=&#34;https://ja.wikipedia.org/wiki/SMBIOS&#34;&gt;SMBIOS&lt;/a&gt;ã¨ã„ã†ã€PCå›ºæœ‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ãƒ»å‚ç…§ã™ã‚‹ãŸã‚ã®ä»•æ§˜ãŒã‚ã£ã¦ã€ãã‚Œã«å¾“ã£ã¦ä¿å­˜ã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ ã®è­˜åˆ¥å­ã‚‰ã—ã„ã€‚
product_uuidã¯&lt;code&gt;dmidecode&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ãªã©ã§ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# dmidecode -s system-uuid
58114D56-A744-3610-C3C5-9B15A838DEAE
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;kubeletãŒã¡ã‚ƒã‚“ã¨å‹•ããŸã‚ã«ã¯swapã‚’ç„¡åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# swapoff -a
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã‚ˆããªã‹ã£ãŸã€‚è©³ç´°ã¯å¾Œè¿°ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ebtablesã¨ethtoolã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# yum install -y ebtables ethtool
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerã‚‚å…¥ã‚Œãªã„ã¨ã€‚
v1.12ãŒæ¨å¥¨ã§ã€v1.11ã‹v1.13ã§ã‚‚ã„ã„ã€‚
é©å½“ã«å…¥ã‚ŒãŸã‚‰v1.12.6ã ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# yum install -y docker
[root@k8s-master ~]# systemctl enable docker &amp;amp;&amp;amp; systemctl start docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ãŒæ©Ÿèƒ½ã™ã‚‹è¦ä»¶ã¨ã—ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠãŒãƒ›ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ãã®ãŸã‚ã«ã¯ç¾çŠ¶ã€SELinuxã‚’ç„¡åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# setenforce 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚‚ã‚ˆããªã‹ã£ãŸã€‚è©³ç´°ã¯å¾Œè¿°ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;RHELç³»ã®å ´åˆã€iptablesãŒãƒã‚¤ãƒ‘ã‚¹ã•ã‚Œã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒå¤‰ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã‚‹å•é¡ŒãŒã‚ã‚‹ãŸã‚ã€&lt;code&gt;net.bridge.bridge-nf-call-iptables&lt;/code&gt;ã‚’1ã«ã‚»ãƒƒãƒˆã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# cat &amp;lt;&amp;lt;EOF &amp;gt;  /etc/sysctl.d/k8s.conf
&amp;gt; net.bridge.bridge-nf-call-ip6tables = 1
&amp;gt; net.bridge.bridge-nf-call-iptables = 1
&amp;gt; EOF
[root@k8s-master ~]# sysctl --system
* Applying /usr/lib/sysctl.d/00-system.conf ...
net.bridge.bridge-nf-call-ip6tables = 0
net.bridge.bridge-nf-call-iptables = 0
net.bridge.bridge-nf-call-arptables = 0
* Applying /usr/lib/sysctl.d/10-default-yama-scope.conf ...
kernel.yama.ptrace_scope = 0
* Applying /usr/lib/sysctl.d/50-default.conf ...
kernel.sysrq = 16
kernel.core_uses_pid = 1
net.ipv4.conf.default.rp_filter = 1
net.ipv4.conf.all.rp_filter = 1
net.ipv4.conf.default.accept_source_route = 0
net.ipv4.conf.all.accept_source_route = 0
net.ipv4.conf.default.promote_secondaries = 1
net.ipv4.conf.all.promote_secondaries = 1
fs.protected_hardlinks = 1
fs.protected_symlinks = 1
* Applying /usr/lib/sysctl.d/99-docker.conf ...
fs.may_detach_mounts = 1
* Applying /etc/sysctl.d/99-sysctl.conf ...
* Applying /etc/sysctl.d/k8s.conf ...
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
* Applying /etc/sysctl.conf ...
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Cgroup Driverã‚’ã€Dockerã¨kubeletã¨ã®é–“ã§ä¸€è‡´ã•ã›ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# cat /etc/systemd/system/kubelet.service.d/10-kubeadm.conf | grep KUBELET_CGROUP_ARGS
Environment=&amp;quot;KUBELET_CGROUP_ARGS=--cgroup-driver=systemd&amp;quot;
ExecStart=/usr/bin/kubelet $KUBELET_KUBECONFIG_ARGS $KUBELET_SYSTEM_PODS_ARGS $KUBELET_NETWORK_ARGS $KUBELET_DNS_ARGS $KUBELET_AUTHZ_ARGS $KUBELET_CADVISOR_ARGS $KUBELET_CGROUP_ARGS $KUBELET_CERTIFICATE_ARGS $KUBELET_EXTRA_ARGS
[root@k8s-master ~]# docker info |grep -i cgroup
 WARNING: Usage of loopback devices is strongly discouraged for production use. Use `--storage-opt dm.thinpooldev` to specify a custom block storage device.
Cgroup Driver: systemd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã©ã£ã¡ã‚‚systemdã ã£ãŸã®ã§å•é¡Œãªã—ã€‚
(é•ã£ã¦ãŸã‚‰&lt;a href=&#34;https://kubernetes.io/docs/setup/independent/create-cluster-kubeadm/#troubleshooting&#34;&gt;&lt;code&gt;KUBELET_CGROUP_ARGS&lt;/code&gt;ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹&lt;/a&gt;ã€‚)&lt;/p&gt;

&lt;h3 id=&#34;kubelet-kubeadm-kubectlã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;kubeletã€kubeadmã€kubectlã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;

&lt;p&gt;ã“ã“ã§ã‚„ã£ã¨kubeadmã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
kubeletã¨kubectlã‚‚ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšYUMãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/yum.repos.d/kubernetes.repo
&amp;gt; [kubernetes]
&amp;gt; name=Kubernetes
&amp;gt; baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
&amp;gt; enabled=1
&amp;gt; gpgcheck=1
&amp;gt; repo_gpgcheck=1
&amp;gt; gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg
&amp;gt;         https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
&amp;gt; EOF
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# yum install kubelet kubeadm kubectl
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€kubeletã‚’ã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# systemctl enable kubelet &amp;amp;&amp;amp; systemctl start kubelet
Created symlink from /etc/systemd/system/multi-user.target.wants/kubelet.service to /etc/systemd/system/kubelet.service.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã“ã§VMã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ã¨ã£ã¦ãŠã„ã¦ã€å¾Œã§Nodeã‚’è¿½åŠ ã™ã‚‹ã¨ãã«ä½¿ã†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;masteræ§‹ç¯‰&#34;&gt;Masteræ§‹ç¯‰&lt;/h2&gt;

&lt;p&gt;Masterã¯&lt;code&gt;kubeadm init&lt;/code&gt;ã§æ§‹ç¯‰ã§ãã‚‹ã€‚
&lt;code&gt;--apiserver-advertise-address&lt;/code&gt;ã§kube-apiserverãŒlistenã™ã‚‹IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šã™ã¹ã—ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm init --apiserver-advertise-address=192.168.171.200
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[init] Using Kubernetes version: v1.8.1
[init] Using Authorization modes: [Node RBAC]
[preflight] Running pre-flight checks
[preflight] WARNING: Running with swap on is not supported. Please disable swap or set kubelet&#39;s --fail-swap-on flag to false.
[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)
[certificates] Generated ca certificate and key.
[certificates] Generated apiserver certificate and key.
[certificates] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.171.200]
[certificates] Generated apiserver-kubelet-client certificate and key.
[certificates] Generated sa key and public key.
[certificates] Generated front-proxy-ca certificate and key.
[certificates] Generated front-proxy-client certificate and key.
[certificates] Valid certificates and keys now exist in &amp;quot;/etc/kubernetes/pki&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;admin.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;kubelet.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;controller-manager.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;scheduler.conf&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-apiserver to &amp;quot;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-controller-manager to &amp;quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-scheduler to &amp;quot;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;quot;
[etcd] Wrote Static Pod manifest for a local etcd instance to &amp;quot;/etc/kubernetes/manifests/etcd.yaml&amp;quot;
[init] Waiting for the kubelet to boot up the control plane as Static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;
[init] This often takes around a minute; or longer if the control plane images have to be pulled.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz/syncloop&#39; failed with error: Get http://localhost:10255/healthz/syncloop: dial tcp [::1]:10255: getsockopt: connection refused.
[kubelet-check] It seems like the kubelet isn&#39;t running or healthy.
[kubelet-check] The HTTP call equal to &#39;curl -sSL http://localhost:10255/healthz&#39; failed with error: Get http://localhost:10255/healthz: dial tcp [::1]:10255: getsockopt: connection refused.

Unfortunately, an error has occurred:
        timed out waiting for the condition

This error is likely caused by that:
        - The kubelet is not running
        - The kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)
        - There is no internet connection; so the kubelet can&#39;t pull the following control plane images:
                - gcr.io/google_containers/kube-apiserver-amd64:v1.8.1
                - gcr.io/google_containers/kube-controller-manager-amd64:v1.8.1
                - gcr.io/google_containers/kube-scheduler-amd64:v1.8.1

You can troubleshoot this for example with the following commands if you&#39;re on a systemd-powered system:
        - &#39;systemctl status kubelet&#39;
        - &#39;journalctl -xeu kubelet&#39;
couldn&#39;t initialize a Kubernetes cluster
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªã‚“ã‹å¤±æ•—ã—ãŸã€‚
&lt;code&gt;getsockopt: connection refused.&lt;/code&gt;ã£ã¦ã®ãŒãŸãã•ã‚“å‡ºã¦ã‚‹ã€‚
ã‚°ã‚°ã‚‹ã¨ã€swapãŒã‚ã‚„ã—ã„ã€‚
ç¢ºèªã—ã¦ã¿ãŸã‚‰ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# swapon -s
Filename                                Type            Size    Used    Priority
/dev/dm-1                               partition       2097148 0       -1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¡åŠ¹ã«ãªã£ã¦ãªã„ã€‚
&lt;code&gt;swapoff -a&lt;/code&gt;ã§swapç„¡åŠ¹ã«ã—ã¦ã‚‚ã€OSå†èµ·å‹•ã—ãŸã‚‰ã‚‚ã¨ã«æˆ»ã£ã¦ã—ã¾ã†ã®ã‹ã€‚&lt;/p&gt;

&lt;p&gt;æ°¸ç¶šçš„ã«ç„¡åŠ¹ã«ã™ã‚‹ãŸã‚ã€&lt;code&gt;/etc/fstab&lt;/code&gt;ã‚’ç·¨é›†ã—ã¦ã€ä»¥ä¸‹ã®è¡Œã‚’å‰Šé™¤ã—ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;/dev/mapper/centos-swap swap                    swap    defaults        0 0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€OSãƒªãƒ–ãƒ¼ãƒˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;kubeadm initã‚’ã‚„ã‚Šç›´ã™å‰ã«ã€ã„ã£ãŸã‚“&lt;code&gt;kubeadm reset&lt;/code&gt;ã—ã¦åˆæœŸåŒ–ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm reset
[preflight] Running pre-flight checks
[reset] Stopping the kubelet service
[reset] Unmounting mounted directories in &amp;quot;/var/lib/kubelet&amp;quot;
[reset] Removing kubernetes-managed containers
[reset] Deleting contents of stateful directories: [/var/lib/kubelet /etc/cni/net.d /var/lib/dockershim /var/run/kubernetes /var/lib/etcd]
[reset] Deleting contents of config directories: [/etc/kubernetes/manifests /etc/kubernetes/pki]
[reset] Deleting files: [/etc/kubernetes/admin.conf /etc/kubernetes/kubelet.conf /etc/kubernetes/controller-manager.conf /etc/kubernetes/scheduler.conf]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;2å›ç›®ã®&lt;code&gt;kubeadm init&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm init --apiserver-advertise-address=192.168.171.200
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[init] Using Kubernetes version: v1.8.1
[init] Using Authorization modes: [Node RBAC]
[preflight] Running pre-flight checks
[preflight] Starting the kubelet service
[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)
[certificates] Generated ca certificate and key.
[certificates] Generated apiserver certificate and key.
[certificates] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.171.200]
[certificates] Generated apiserver-kubelet-client certificate and key.
[certificates] Generated sa key and public key.
[certificates] Generated front-proxy-ca certificate and key.
[certificates] Generated front-proxy-client certificate and key.
[certificates] Valid certificates and keys now exist in &amp;quot;/etc/kubernetes/pki&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;admin.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;kubelet.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;controller-manager.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;scheduler.conf&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-apiserver to &amp;quot;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-controller-manager to &amp;quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-scheduler to &amp;quot;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;quot;
[etcd] Wrote Static Pod manifest for a local etcd instance to &amp;quot;/etc/kubernetes/manifests/etcd.yaml&amp;quot;
[init] Waiting for the kubelet to boot up the control plane as Static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;
[init] This often takes around a minute; or longer if the control plane images have to be pulled.

Unfortunately, an error has occurred:
        timed out waiting for the condition

This error is likely caused by that:
        - The kubelet is not running
        - The kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)
        - There is no internet connection; so the kubelet can&#39;t pull the following control plane images:
                - gcr.io/google_containers/kube-apiserver-amd64:v1.8.1
                - gcr.io/google_containers/kube-controller-manager-amd64:v1.8.1
                - gcr.io/google_containers/kube-scheduler-amd64:v1.8.1

You can troubleshoot this for example with the following commands if you&#39;re on a systemd-powered system:
        - &#39;systemctl status kubelet&#39;
        - &#39;journalctl -xeu kubelet&#39;
couldn&#39;t initialize a Kubernetes cluster
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¾ãŸé•ã†æ„Ÿã˜ã®ã‚¨ãƒ©ãƒ¼ã€‚
ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¾“ã£ã¦ã€&lt;code&gt;journalctl -xeu kubelet&lt;/code&gt;ã§ãƒ­ã‚°ã‚’è¦‹ã¦ã¿ãŸã‚‰ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Post https://192.168.171.200:6443/api/v1/nodes: dial tcp 192.168.171.200:6443: getsockopt: connection refused
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/kubeadm/issues/228&#34;&gt;kubeadmã«Issue&lt;/a&gt;ã«ã“ã®ã‚¨ãƒ©ãƒ¼ãŒè¼‰ã£ã¦ã„ã‚‹ã€‚
åŸå› ã¯ã„ã‚ã„ã‚ã‚ã‚‹ã£ã½ã„ã‘ã©ã€ãã®ã²ã¨ã¤ã«SELinuxãŒã‚ã£ãŸã®ã§ç¢ºèªã—ã¦ã¿ãŸã‚‰ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# getenforce
Enforcing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;SELinuxãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ãŸã€‚
&lt;code&gt;setenforce 0&lt;/code&gt;ã‚‚OSå†èµ·å‹•ã§å…ƒã«æˆ»ã£ã¦ã—ã¾ã£ãŸæ¨¡æ§˜ã€‚&lt;/p&gt;

&lt;p&gt;æ°¸ç¶šçš„ã«SELinuxã‚’ç„¡åŠ¹ã«ã™ã‚‹ãŸã‚ã€&lt;code&gt;/etc/selinux/config&lt;/code&gt;ã‚’ç·¨é›†ã—ã¦ã€&lt;code&gt;SELINUX&lt;/code&gt;ã‚’&lt;code&gt;disabled&lt;/code&gt;ã«ã—ã¦ã€OSå†èµ·å‹•ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€&lt;code&gt;kubeadm reset&lt;/code&gt;ã—ãŸã‚‰3å›ç›®ã®&lt;code&gt;kubeadm init&lt;/code&gt;ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubeadm init --apiserver-advertise-address=192.168.171.200
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[init] Using Kubernetes version: v1.8.1
[init] Using Authorization modes: [Node RBAC]
[preflight] Running pre-flight checks
[kubeadm] WARNING: starting in 1.8, tokens expire after 24 hours by default (if you require a non-expiring token use --token-ttl 0)
[certificates] Generated ca certificate and key.
[certificates] Generated apiserver certificate and key.
[certificates] apiserver serving cert is signed for DNS names [k8s-master kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.171.200]
[certificates] Generated apiserver-kubelet-client certificate and key.
[certificates] Generated sa key and public key.
[certificates] Generated front-proxy-ca certificate and key.
[certificates] Generated front-proxy-client certificate and key.
[certificates] Valid certificates and keys now exist in &amp;quot;/etc/kubernetes/pki&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;admin.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;kubelet.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;controller-manager.conf&amp;quot;
[kubeconfig] Wrote KubeConfig file to disk: &amp;quot;scheduler.conf&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-apiserver to &amp;quot;/etc/kubernetes/manifests/kube-apiserver.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-controller-manager to &amp;quot;/etc/kubernetes/manifests/kube-controller-manager.yaml&amp;quot;
[controlplane] Wrote Static Pod manifest for component kube-scheduler to &amp;quot;/etc/kubernetes/manifests/kube-scheduler.yaml&amp;quot;
[etcd] Wrote Static Pod manifest for a local etcd instance to &amp;quot;/etc/kubernetes/manifests/etcd.yaml&amp;quot;
[init] Waiting for the kubelet to boot up the control plane as Static Pods from directory &amp;quot;/etc/kubernetes/manifests&amp;quot;
[init] This often takes around a minute; or longer if the control plane images have to be pulled.
[apiclient] All control plane components are healthy after 99.510003 seconds
[uploadconfig]?Storing the configuration used in ConfigMap &amp;quot;kubeadm-config&amp;quot; in the &amp;quot;kube-system&amp;quot; Namespace
[markmaster] Will mark node k8s-master as master by adding a label and a taint
[markmaster] Master k8s-master tainted and labelled with key/value: node-role.kubernetes.io/master=&amp;quot;&amp;quot;
[bootstraptoken] Using token: 957b7b.eaaf0cb656edba7b
[bootstraptoken] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstraptoken] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstraptoken] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstraptoken] Creating the &amp;quot;cluster-info&amp;quot; ConfigMap in the &amp;quot;kube-public&amp;quot; namespace
[addons] Applied essential addon: kube-dns
[addons] Applied essential addon: kube-proxy

Your Kubernetes master has initialized successfully!

To start using your cluster, you need to run (as a regular user):

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run &amp;quot;kubectl apply -f [podnetwork].yaml&amp;quot; with one of the options listed at:
  http://kubernetes.io/docs/admin/addons/

You can now join any number of machines by running the following on each node
as root:

  kubeadm join --token 957b7b.eaaf0cb656edba7b 192.168.171.200:6443 --discovery-token-ca-cert-hash sha256:7d16ade2b651ebac573368b1b4db5c0f1236979584e61833efe90a96ff34ae2e
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚
ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€å¾Œã«æ›¸ã‹ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’ã€å¾Œã§Nodeã‚’è¿½åŠ ã™ã‚‹ã¨ãã«ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;kubectlãŒã“ã®VMä¸Šã®kube-apiserverã¨è©±ã›ã‚‹ã‚ˆã†ã«ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®šã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# mkdir -p $HOME/.kube
[root@k8s-master ~]# cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
[root@k8s-master ~]# chown $(id -u):$(id -g) $HOME/.kube/config
[root@k8s-master ~]# kubectl get nodes
NAME         STATUS     ROLES     AGE       VERSION
k8s-master   NotReady   master    16m       v1.8.1
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ã‚ªãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ã‚ªãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h3&gt;

&lt;p&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯ã‚¢ãƒ—ãƒªã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®å‰ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;å¤šãã®é¸æŠè‚¢ãŒã‚ã‚‹ãªã‹ã€æœ‰åãª&lt;a href=&#34;https://github.com/coreos/flannel&#34;&gt;Flannel&lt;/a&gt;ã«ã—ã‚ˆã†ã¨æ€ã£ãŸã‘ã©ã€Flannelã‚’ä½¿ã†ã«ã¯
&lt;code&gt;kubeadm init&lt;/code&gt;æ™‚ã«&lt;code&gt;--pod-network-cidr=10.244.0.0/16&lt;/code&gt;ã‚’æ¸¡ã•ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã€‚
ã‚„ã‚Šç›´ã™ã®ã¯é¢å€’ãªã®ã§ä»£ã‚ã‚Šã«&lt;a href=&#34;https://www.weave.works/docs/net/latest/kube-addon/&#34;&gt;Weave Net&lt;/a&gt;ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# export kubever=$(kubectl version | base64 | tr -d &#39;\n&#39;)
[root@k8s-master ~]# kubectl apply -f &amp;quot;https://cloud.weave.works/k8s/net?k8s-version=$kubever&amp;quot;
serviceaccount &amp;quot;weave-net&amp;quot; created
clusterrole &amp;quot;weave-net&amp;quot; created
clusterrolebinding &amp;quot;weave-net&amp;quot; created
daemonset &amp;quot;weave-net&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ã‚ªãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚
ã—ã°ã‚‰ãã—ã¦ã€&lt;code&gt;kube-dns&lt;/code&gt;ã®PodãŒèµ·å‹•ã—ã¦ã„ã‚Œã°(i.e. STATUSãŒRunningã«ãªã£ã¦ã‚Œã°)OKã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubectl get pods --all-namespaces
NAMESPACE     NAME                                 READY     STATUS    RESTARTS   AGE
kube-system   etcd-k8s-master                      1/1       Running   0          1m
kube-system   kube-apiserver-k8s-master            1/1       Running   0          1m
kube-system   kube-controller-manager-k8s-master   1/1       Running   0          1m
kube-system   kube-dns-545bc4bfd4-xtlnh            3/3       Running   0          6m
kube-system   kube-proxy-922wk                     1/1       Running   0          6m
kube-system   kube-scheduler-k8s-master            1/1       Running   0          1m
kube-system   weave-net-s2kkw                      2/2       Running   0          2m
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;masterã«podã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã›ã‚‹è¨­å®š&#34;&gt;Masterã«Podã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã›ã‚‹è¨­å®š&lt;/h3&gt;

&lt;p&gt;ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®éƒ½åˆã§Masterã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå‹•ãNodeã«ã¯PodãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œãªã„ã€‚
ã‘ã©ã€VM2å€‹ã§Podã‚’åˆ†æ•£ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ãŸã„ã®ã§ã€ã“ã®ç¸›ã‚Šã‚’å¤–ã—ã¦ãŠãã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubectl taint nodes --all node-role.kubernetes.io/master-
node &amp;quot;k8s-master&amp;quot; untainted
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šã§Masterã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯å®Œäº†ã€‚&lt;/p&gt;

&lt;h2 id=&#34;nodeè¿½åŠ &#34;&gt;Nodeè¿½åŠ &lt;/h2&gt;

&lt;p&gt;æ¬¡ã«Nodeã‚’ã²ã¨ã¤è¿½åŠ ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;k8s-masterã§&lt;code&gt;kubeadm init&lt;/code&gt;ã™ã‚‹ã¾ãˆã«æ’®ã£ãŸã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã€ãƒ›ã‚¹ãƒˆåã¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¤‰æ›´ã—ã€ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹Nodeã®ãƒã‚·ãƒ³(k8s-node)ã«ã™ã‚‹ã€‚
ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸã‚‰MACã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚product_uuidã‚‚å¤‰ã‚ã£ãŸã®ã§ã€å•é¡Œãªãä½¿ãˆãã†ã€‚&lt;/p&gt;

&lt;p&gt;k8s-nodeã‚’ã‚¯ãƒ©ã‚¹ã‚¿ã«è¿½åŠ ã™ã‚‹ã«ã¯ã€ã“ã®VMä¸Šã§ã€&lt;code&gt;kubeadm init&lt;/code&gt;æˆåŠŸæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æœ€å¾Œã«è¡¨ç¤ºã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰(i.e. &lt;code&gt;kubeadm join&lt;/code&gt;)ã‚’å®Ÿè¡Œã™ã‚‹ã ã‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-node ~]# kubeadm join --token 957b7b.eaaf0cb656edba7b 192.168.171.200:6443 --discovery-token-ca-cert-hash sha256:7d16ade2b651ebac573368b1b4db5c0f1236979584e61833efe90a96ff34ae2e
[kubeadm] WARNING: kubeadm is in beta, please do not use it for production clusters.
[preflight] Running pre-flight checks
[discovery] Trying to connect to API Server &amp;quot;192.168.171.200:6443&amp;quot;
[discovery] Created cluster-info discovery client, requesting info from &amp;quot;https://192.168.171.200:6443&amp;quot;
[discovery] Requesting info from &amp;quot;https://192.168.171.200:6443&amp;quot; again to validate TLS against the pinned public key
[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server &amp;quot;192.168.171.200:6443&amp;quot;
[discovery] Successfully established connection with API Server &amp;quot;192.168.171.200:6443&amp;quot;
[bootstrap] Detected server version: v1.8.1
[bootstrap] The server supports the Certificates API (certificates.k8s.io/v1beta1)

Node join complete:
* Certificate signing request sent to master and response
  received.
* Kubelet informed of new secure connection details.

Run &#39;kubectl get nodes&#39; on the master to see this machine join.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚
k8s-masterã§Nodeã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@k8s-master ~]# kubectl get nodes
NAME         STATUS    ROLES     AGE       VERSION
k8s-master   Ready     master    42m       v1.8.1
k8s-node     Ready     &amp;lt;none&amp;gt;    45s       v1.8.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;k8s-masterã‚‚k8s-nodeã‚‚Readyã€‚&lt;/p&gt;

&lt;h2 id=&#34;vmãƒ›ã‚¹ãƒˆã®kubectlã®è¨­å®š&#34;&gt;VMãƒ›ã‚¹ãƒˆã®kubectlã®è¨­å®š&lt;/h2&gt;

&lt;p&gt;kubectlã¯kube-apiserverã®Web APIã‚’å‘¼ã¶ã‚³ãƒãƒ³ãƒ‰ãªã®ã§ã€æ¥ç¶šå…ˆã•ãˆã¡ã‚ƒã‚“ã¨è¨­å®šã™ã‚Œã°Masterã®ãƒã‚·ãƒ³ä¸Šã§ãªãã¦ã‚‚ä½¿ãˆã‚‹ã€‚
VMã®ãƒ›ã‚¹ãƒˆ(i.e. Windows 10 PC)ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®æ¥ç¶šå…ˆæƒ…å ±ã¯ã€&lt;code&gt;kubeadm init&lt;/code&gt;æ™‚ã«ç”Ÿæˆã•ã‚ŒãŸ&lt;code&gt;/etc/kubernetes/admin.conf&lt;/code&gt;ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ãƒ›ã‚¹ãƒˆã«æŒã£ã¦ãã¦kubectlã«æ¸¡ã—ã¦ã‚„ã‚Œã°ã„ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get nodes
NAME         STATUS    ROLES     AGE       VERSION
k8s-master   Ready     master    51m       v1.8.1
k8s-node     Ready     &amp;lt;none&amp;gt;    10m       v1.8.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;admin.confã‚’&lt;code&gt;%UserProfile%\.kube\&lt;/code&gt;ã®ä¸‹ã«&lt;code&gt;config&lt;/code&gt;ã¨ã„ã†åå‰ã§ç½®ã„ã¦ã‚„ã‚‹ã¨ã€&lt;code&gt;--kubeconfig&lt;/code&gt;ã§æŒ‡å®šã—ãªãã¦ã‚‚èª­ã‚“ã§ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;goslingsãƒ‡ãƒ—ãƒ­ã‚¤&#34;&gt;Goslingsãƒ‡ãƒ—ãƒ­ã‚¤&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/#%E7%95%AA%E5%A4%96%E7%B7%A82-%E5%91%BD%E4%BB%A4%E7%9A%84%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E8%A8%AD%E5%AE%9A&#34;&gt;ã€ŒKubernetesã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚‹ã€ã®ç•ªå¤–ç·¨&lt;/a&gt;ã§ä½œã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ã€ä»Šå›ä½œã£ãŸã‚¯ãƒ©ã‚¹ã‚¿ã«&lt;a href=&#34;https://www.kaitoy.xyz/2016/12/11/goslings-development-memo0-intro-design/&#34;&gt;Goslings&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf create -f deploy_goslings.yml
deployment &amp;quot;goslings-sample&amp;quot; created

C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf create -f service_goslings.yml
service &amp;quot;goslings-sample&amp;quot; created

C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get po -o wide
NAME                              READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-sample-dfd84c69c-4mgh9   1/1       Running   0          12m       10.244.1.3   k8s-node
goslings-sample-dfd84c69c-cd5mm   1/1       Running   0          12m       10.244.0.3   k8s-master
goslings-sample-dfd84c69c-nwwh7   1/1       Running   0          12m       10.244.1.2   k8s-node

C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get svc
NAME              TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
goslings-sample   NodePort    10.109.174.204   &amp;lt;none&amp;gt;        8080:30004/TCP   7m
kubernetes        ClusterIP   10.96.0.1        &amp;lt;none&amp;gt;        443/TCP          1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ™®é€šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããŸã€‚
ãƒ¬ãƒ—ãƒªã‚«3ã¤ãŒã¡ã‚ƒã‚“ã¨2ã¤ã®Nodeã«åˆ†æ•£ã•ã‚Œã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;k8s-masterã®IPã‚¢ãƒ‰ãƒ¬ã‚¹( &lt;a href=&#34;http://192.168.171.200:30004/&#34;&gt;http://192.168.171.200:30004/&lt;/a&gt; )ã§ã‚‚k8s-nodeã®IPã‚¢ãƒ‰ãƒ¬ã‚¹( &lt;a href=&#34;http://192.168.171.201:30004/&#34;&gt;http://192.168.171.201:30004/&lt;/a&gt; )ã§ã‚‚Goslingsã«ã¤ãªã’ãŸã€‚
æ™®é€šã¯Masterã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ã†ã‚‰ã—ã„ã€‚
ãã‚Šã‚ƒãã†ã‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/build-kubernetes-cluster-by-kubeadm/goslings.png&#34; alt=&#34;goslings&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;è©¦ã—ã«k8s-nodeã®VMã‚’è½ã¨ã—ã¦ã¿ã‚‹ã€‚
k8s-nodeä¸Šã®PodãŒk8s-masterã«ç§»å‹•ã—ã¦ãã‚Œã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ãŸã‘ã©ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf get po -o wide
NAME                              READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-sample-dfd84c69c-4mgh9   1/1       Running   0          55m       10.244.1.3   k8s-node
goslings-sample-dfd84c69c-cd5mm   1/1       Running   0          55m       10.244.0.3   k8s-master
goslings-sample-dfd84c69c-nwwh7   1/1       Running   0          55m       10.244.1.2   k8s-node
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãªã‚“ã‹k8s-nodeã§å‹•ãç¶šã‘ã¦ã„ã‚‹ã“ã¨ã«ãªã£ã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã†ã¾ãå‹•ã„ã¦ã„ãªã„ã‚“ã ã‚ã†ã‹â€¦&lt;/p&gt;

&lt;h2 id=&#34;ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤&#34;&gt;ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’Web UIã§ç¢ºèªã§ãã‚‹ã€&lt;a href=&#34;https://github.com/kubernetes/dashboard&#34;&gt;Dashboard&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop&amp;gt;kubectl --kubeconfig admin.conf apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml
secret &amp;quot;kubernetes-dashboard-certs&amp;quot; created
serviceaccount &amp;quot;kubernetes-dashboard&amp;quot; created
role &amp;quot;kubernetes-dashboard-minimal&amp;quot; created
rolebinding &amp;quot;kubernetes-dashboard-minimal&amp;quot; created
deployment &amp;quot;kubernetes-dashboard&amp;quot; created
service &amp;quot;kubernetes-dashboard&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;DashboardãŒèµ·å‹•ã™ã‚‹ã¾ã§ã—ã°ã‚‰ãã¾ã£ã¦ã‹ã‚‰ã€&lt;code&gt;kubectl proxy&lt;/code&gt;ã—ã¦ã€
&lt;code&gt;http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/&lt;/code&gt;ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¤ãªã’ã°GUIãŒé–‹ãã¯ãšãªã‚“ã ã‘ã©ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ã¤ãªãŒã‚‰ãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚¯ãƒ©ã‚¹ã‚¿ã†ã¾ãå‹•ã„ã¦ã„ãªã„ã‚“ã ã‚ã†ã‹â€¦&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;NICãŒNATãªã®ãŒã ã‚ã ã£ãŸã‹ã‚‚ã¨æ€ã„ã€ãƒ–ãƒªãƒƒã‚¸ã«ã—ã¦ã¿ãŸã‘ã©åŒã˜çµæœã ã£ãŸã€‚
Podã®ãƒ•ã‚§ãƒ¼ãƒ«ã‚ªãƒ¼ãƒãƒ¼ã‚‚ã—ãªã„ã—Dashboardã‚‚é–‹ã‘ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ã¡ã‚ƒã‚“ã¨ä¸€ã¤ä¸€ã¤è‡ªåˆ†ã§æ§‹ç¯‰ã—ãªã„ã¨ã‚ˆãåˆ†ã‹ã‚‰ãªã„ãªã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã§ãµã¨æ€ã„ç«‹ã£ã¦ã€&lt;code&gt;/etd/hosts&lt;/code&gt;ã‚’ã„ã˜ã£ãŸã‚‰Dashboardã¯å‹•ã„ãŸã€‚
ãã‚Œã«ã¤ã„ã¦ã¯ã¾ãŸ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/&#34;&gt;åˆ¥ã®è¨˜äº‹&lt;/a&gt;ã§ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetesã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚‹</title>
          <link>https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/</link>
          <pubDate>Wed, 11 Oct 2017 23:48:40 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹&lt;/a&gt;ã€ã®ç¶šãã€‚
Minikubeã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¾ã§ã¯ã§ããŸã®ã§ã€&lt;a href=&#34;https://kubernetes.io/docs/tutorials/kubernetes-basics/&#34;&gt;Kubernetes Basics&lt;/a&gt;ã¨ã„ã†ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚ŠãªãŒã‚‰ã€&lt;a href=&#34;https://kaitoy.github.io/goslings/&#34;&gt;Goslings&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-æ¦‚è¦&#34;&gt;Kubernetes Basics - æ¦‚è¦&lt;/h2&gt;

&lt;p&gt;Kubernetes Basicsã¯ã€å…¬å¼ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬ã‚’å­¦ã¶ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã€‚
ä»¥ä¸‹ã®6ã¤ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ãªã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹&lt;/li&gt;
&lt;li&gt;ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½¿ã†ã®ã¯&lt;a href=&#34;https://github.com/kubernetes/minikube&#34;&gt;Minikube&lt;/a&gt;ã ã‘ã©ã€è‡ªåˆ†ã§ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚
&lt;a href=&#34;https://www.katacoda.com/&#34;&gt;Katacoda&lt;/a&gt;ã¨ã„ã†ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ITæŠ€è¡“ã‚’å­¦ã¹ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚Šã€Kubernetes Basicsã¯ãã‚Œã‚’åˆ©ç”¨ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ãƒ›ã‚¹ãƒ†ãƒƒãƒ‰Minikubeã‚’æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ãŒã€&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;å‰å›ã®è¨˜äº‹&lt;/a&gt;ã§è‡ªPCä¸Šã«Minikubeã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã®ã§ã€ãã¡ã‚‰ã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-1-kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 1: Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œã‚‹&lt;/h2&gt;

&lt;p&gt;Minikubeã‚’èµ·å‹•ã—ã¦kubectlã§ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã‚’ã¿ã‚‹ã ã‘ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/&#34;&gt;å‰å›ã®è¨˜äº‹&lt;/a&gt;ã§ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-2-ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 2: ã‚¢ãƒ—ãƒªã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ã‚¢ãƒ—ãƒª(i.e. ã‚³ãƒ³ãƒ†ãƒŠ)ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯Deploymentã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã€‚
Masterã¯Deploymentã®specã«å¾“ã£ã¦å„ãƒãƒ¼ãƒ‰ã«ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã€‚
Deploymentã¯ã€ã‚¢ãƒ—ãƒªãŒè½ã¡ãŸã‚‰å†èµ·å‹•ã—ã¦ãã‚Œã‚‹ã€ã¤ã¾ã‚Šself-healingã‚‚å®Ÿç¾ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Deploymentã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯&lt;code&gt;kubectl run &amp;lt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå&amp;gt; --image=&amp;lt;Dockerã‚¤ãƒ¡ãƒ¼ã‚¸å&amp;gt;&lt;/code&gt;ã€‚
Goslingsã‚’ã“ã‚Œã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Goslingsã‚³ãƒ³ãƒ†ãƒŠã¯3ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€æŒ‡å®šã—ãŸãƒãƒ¼ãƒˆã§Webã‚µãƒ¼ãƒã‚’èµ·å‹•ã™ã‚‹ã€‚
&lt;code&gt;--port&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãã®ãƒãƒ¼ãƒˆã‚’exposeã™ã‚‹ã‚ˆã†ã«ã—ã¦ã€&lt;code&gt;--&lt;/code&gt;ã®å¾Œã«ã‚³ãƒ³ãƒ†ãƒŠã«æ¸¡ã™å¼•æ•°ã‚’è¨˜è¿°ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl run goslings --image=kaitoy/goslings:latest --port 8080 -- 8080 /tmp https://github.com/kaitoy/
deployment &amp;quot;goslings&amp;quot; created

C:\Users\kaitoy&amp;gt;kubectl get deployment
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   1         1         1            1           27s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããŸã€‚
è£ã§Podã‚‚ä½œã‚‰ã‚Œã¦ã„ã¦ã€ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get pods
NAME                        READY     STATUS              RESTARTS   AGE
goslings-1210510689-6w5tf   0/1       ContainerCreating   0          1m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(&lt;code&gt;kubectl get&lt;/code&gt;ã«æŒ‡å®šã™ã‚‹ã®ã¯ã€çœç•¥å½¢ã®&lt;code&gt;deploy&lt;/code&gt;ã¨ã‹&lt;code&gt;po&lt;/code&gt;ã§ã‚‚ã„ã„ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Podã¯éš”é›¢ã•ã‚ŒãŸãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§å‹•ãã®ã§ã€ãã®ã¾ã¾ã§ã¯PodåŒå£«ã¯é€šä¿¡ã§ãã‚‹ã‘ã©ã€å¤–ã‹ã‚‰ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã€‚
kubectlã§ãƒ—ãƒ­ã‚­ã‚·ã‚’ä½œã£ã¦ã‚„ã‚‹ã“ã¨ã§ã€å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl proxy
Starting to serve on 127.0.0.1:8001
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã§ã€kube-apiserverã¸ã®ãƒ—ãƒ­ã‚­ã‚·ãŒãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆã§èµ·å‹•ã—ãŸã€‚
ã“ã®çŠ¶æ…‹ã§&lt;code&gt;http://localhost:8001&lt;/code&gt;ã‚’é–‹ãã¨ã€kube-apiserverã®APIä¸€è¦§ãŒè¦‹ã‚Œã‚‹ã€‚
ä¾‹ãˆã°ã€&lt;code&gt;http://localhost:8001/version&lt;/code&gt;ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®JSONãƒ‡ãƒ¼ã‚¿ãŒè¿”ã£ã¦ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;major&amp;quot;: &amp;quot;1&amp;quot;,
  &amp;quot;minor&amp;quot;: &amp;quot;7&amp;quot;,
  &amp;quot;gitVersion&amp;quot;: &amp;quot;v1.7.0&amp;quot;,
  &amp;quot;gitCommit&amp;quot;: &amp;quot;d3ada0119e776222f11ec7945e6d860061339aad&amp;quot;,
  &amp;quot;gitTreeState&amp;quot;: &amp;quot;dirty&amp;quot;,
  &amp;quot;buildDate&amp;quot;: &amp;quot;2017-10-04T09:25:40Z&amp;quot;,
  &amp;quot;goVersion&amp;quot;: &amp;quot;go1.8.3&amp;quot;,
  &amp;quot;compiler&amp;quot;: &amp;quot;gc&amp;quot;,
  &amp;quot;platform&amp;quot;: &amp;quot;linux/amd64&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å„Podã¸ã‚‚ä»¥ä¸‹ã®URLã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;http://localhost:8001/api/v1/proxy/namespaces/default/pods/&amp;lt;Podå&amp;gt;/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Podåã®éƒ¨åˆ†ã¯&lt;code&gt;kubectl get&lt;/code&gt;ã§ç¢ºèªã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get po
NAME                        READY     STATUS    RESTARTS   AGE
goslings-1210510689-6w5tf   1/1       Running   0          24m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Ÿéš›ã«ã€&lt;code&gt;http://localhost:8001/api/v1/proxy/namespaces/default/pods/goslings-1210510689-6w5tf/&lt;/code&gt;ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ãŸã‚‰ã€Goslingsã®GUIãŒå‡ºãŸã€‚
ãƒ’ãƒ¥ãƒ¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes-cont/goslings-proxy.png&#34; alt=&#34;goslings-proxy&#34; /&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-3-ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 3: ã‚¢ãƒ—ãƒªã‚’èª¿æŸ»ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’èª¿æŸ»ã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;kubectl get: ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒªã‚¹ãƒˆè¡¨ç¤ºã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;kubectl describe: ãƒªã‚½ãƒ¼ã‚¹ã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;kubectl logs: ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚&lt;code&gt;docker logs&lt;/code&gt;çš„ãªã€‚&lt;/li&gt;
&lt;li&gt;kubectl exec: ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚&lt;code&gt;docker exec&lt;/code&gt;çš„ãªã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;kubectl get&lt;/code&gt;ã¯ã•ã‚“ã–ã‚“ã‚„ã£ãŸã®ã§é£›ã°ã—ã¦ã€&lt;code&gt;kubectl describe&lt;/code&gt;ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl describe po
Name:           goslings-1210510689-6w5tf
Namespace:      default
Node:           minikube/192.168.99.100
Start Time:     Tue, 10 Oct 2017 21:51:48 +0900
Labels:         pod-template-hash=1210510689
                run=goslings
Annotations:    kubernetes.io/created-by={&amp;quot;kind&amp;quot;:&amp;quot;SerializedReference&amp;quot;,&amp;quot;apiVersion&amp;quot;:&amp;quot;v1&amp;quot;,&amp;quot;reference&amp;quot;:{&amp;quot;kind&amp;quot;:&amp;quot;ReplicaSet&amp;quot;,&amp;quot;namespace&amp;quot;:&amp;quot;default&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;goslings-1210510689&amp;quot;,&amp;quot;uid&amp;quot;:&amp;quot;c74b6518-adb9-11e7-88a0-08002798178d...
Status:         Running
IP:             172.17.0.2
Created By:     ReplicaSet/goslings-1210510689
Controlled By:  ReplicaSet/goslings-1210510689
Containers:
  goslings:
    Container ID:       docker://ce90460886c9555f7748bf59e8d9892f05c05020e7841154ee85713d6d9b0c2d
    Image:              kaitoy/goslings:latest
    Image ID:           docker-pullable://kaitoy/goslings@sha256:a587e3c5f202cdaa6d4d5a9c4f6a01ba6f4782e00277c3a18c77dd034daa0109
    Port:               8080/TCP
    Args:
      8080
      C:/Users/kaitoy/AppData/Local/Temp
    State:              Running
      Started:          Tue, 10 Oct 2017 21:55:54 +0900
    Ready:              True
    Restart Count:      0
    Environment:        &amp;lt;none&amp;gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-cqq59 (ro)
Conditions:
  Type          Status
  Initialized   True
  Ready         True
  PodScheduled  True
Volumes:
  default-token-cqq59:
    Type:       Secret (a volume populated by a Secret)
    SecretName: default-token-cqq59
    Optional:   false
QoS Class:      BestEffort
Node-Selectors: &amp;lt;none&amp;gt;
Tolerations:    &amp;lt;none&amp;gt;
Events:
  FirstSeen     LastSeen        Count   From                    SubObjectPath                   Type            Reason
                Message
  ---------     --------        -----   ----                    -------------                   --------        ------
                -------
  45m           45m             1       default-scheduler                                       Normal          Scheduled               Successfully assigned goslings-1210510689-6w5tf to minikube
  45m           45m             1       kubelet, minikube                                       Normal          SuccessfulMountVolume   MountVolume.SetUp succeeded for volume &amp;quot;default-token-cqq59&amp;quot;
  45m           45m             1       kubelet, minikube       spec.containers{goslings}       Normal          Pulling
                pulling image &amp;quot;kaitoy/goslings:latest&amp;quot;
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Pulled
                Successfully pulled image &amp;quot;kaitoy/goslings:latest&amp;quot;
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Created
                Created container
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Started
                Started container
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Podã®è©³ç´°ãªæƒ…å ±ãŒå‡ºãŸã€‚
Eventsã®ã¨ã“ã«Kubernetesã®é ‘å¼µã‚ŠãŒè¦‹ãˆã¦é¢ç™½ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã¯&lt;code&gt;kubectl logs&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl logs goslings-1210510689-6w5tf

  .   ____          _            __ _ _
 /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  &#39;  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.4.3.RELEASE)

2017-10-10 12:56:02.498  INFO 6 --- [           main] c.g.kaitoy.goslings.server.Application   : Starting Application on goslings-1210510689-6w5tf with PID 6 (/usr/local/src/goslings/goslings-server/build/libs/goslings-server-0.0.1.jar started by root in /usr/local/src/goslings)
(snip)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Goslingsã¯&lt;a href=&#34;https://projects.spring.io/spring-boot/&#34;&gt;Spring Boot&lt;/a&gt;ã§ã§ãã¦ã‚‹ã®ã§ã€ãã®ãƒ­ã‚°ãŒå‡ºã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã¯&lt;code&gt;kubectl exec&lt;/code&gt;ã‚’è©¦ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl exec goslings-1210510689-6w5tf env
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=goslings-1210510689-6w5tf
KUBERNETES_PORT_443_TCP=tcp://10.0.0.1:443
KUBERNETES_PORT_443_TCP_PROTO=tcp
KUBERNETES_PORT_443_TCP_PORT=443
KUBERNETES_PORT_443_TCP_ADDR=10.0.0.1
KUBERNETES_SERVICE_HOST=10.0.0.1
KUBERNETES_SERVICE_PORT=443
KUBERNETES_SERVICE_PORT_HTTPS=443
KUBERNETES_PORT=tcp://10.0.0.1:443
LANG=C.UTF-8
JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
JAVA_VERSION=8u111
JAVA_DEBIAN_VERSION=8u111-b14-2~bpo8+1
CA_CERTIFICATES_JAVA_VERSION=20140324
HOME=/root
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;env&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ç’°å¢ƒå¤‰æ•°ä¸€è¦§ã‚’å‡ºã›ãŸã€‚
Kubernetesé–¢ä¿‚ã®å¤‰æ•°ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;docker exec&lt;/code&gt;ã¨åŒæ§˜ã«ã€&lt;code&gt;-it&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚Œã°ã€ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã€Œå…¥ã‚‹ã€ã“ã¨ã‚‚ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl exec -it goslings-1210510689-6w5tf sh
# ls
Dockerfile  _config.yml  build.log     goslings-server  gradle.properties  gradlew.bat
# exit

C:\Users\kaitoy&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-4-ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 4: ã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;Serviceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ‰±ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ³ã«ã‚ã‚‹ã¨ã™ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;PodãŒã‚ã‚‹Nodeã§å‹•ã„ã¦ã„ãŸã‚“ã ã‘ã©ã€ãã®NodeãŒæ­»ã‚“ã ã®ã§ã€KubernetesãŒåˆ¥ã®Nodeã«Podã‚’èµ·å‹•ã—ãªãŠã—ã¦ãã‚ŒãŸã€‚&lt;/li&gt;
&lt;li&gt;åŒã˜ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’3ã¤ã®Podã§å‹•ã‹ã—ã¦ã€è² è·åˆ†æ•£ã•ã›ãŸã„ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã†ã„ã†å ´åˆã€Kubernetesã¯Podæ¯ã«å›ºæœ‰ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã®ã§ã€Podã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ã¯ã‚¢ã‚¯ã‚»ã‚¹å…ˆãŒä¸å®‰å®šã§ã‚ã‚“ã©ã„ã“ã¨ã«ãªã‚‹ã€‚
ã“ã®å•é¡Œã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ã®ãŒServiceã§ã€ã“ã„ã¤ã¯ã€Podã‚’æŠ½è±¡åŒ–ã—ã¦ã€å®‰å®šã—ãŸIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¬é–‹ã—ã¦ãã‚Œã‚‹ã€‚
ã—ã‹ã‚‚ãã‚Œã¯ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Podã¨Serviceã®ç´ã¥ã‘ã«ã¯ã€&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/&#34;&gt;ãƒ©ãƒ™ãƒ«ã¨ã‚»ãƒ¬ã‚¯ã‚¿&lt;/a&gt;ã¨ã„ã†ã‚‚ã®ãŒä½¿ã‚ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Serviceã®æƒ…å ±ã¯Deploymentã¨ã‹ã¨åŒæ§˜ã«&lt;code&gt;kubectl get&lt;/code&gt;ã§è¦‹ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get svc
NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
kubernetes   10.0.0.1     &amp;lt;none&amp;gt;        443/TCP   1d
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã§å‡ºã¦ã„ã‚‹kubernetesã¨ã„ã†ã®ã¯ã€MinikubeãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½œã‚‹Serviceã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Serviceã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€&lt;code&gt;kubectl expose&lt;/code&gt;ã§ä½œã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;goslings&lt;/code&gt;ã¨ã„ã†åã®Deploymentã«å¯¾ã—ã€NodePortã®Serviceã‚’ä½œã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠã®8080ãƒãƒ¼ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl expose deploy/goslings --type=NodePort --port 8080
service &amp;quot;goslings&amp;quot; exposed

C:\Users\kaitoy&amp;gt;kubectl get services
NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
goslings     10.0.0.69    &amp;lt;nodes&amp;gt;       8080:32406/TCP   11s
kubernetes   10.0.0.1     &amp;lt;none&amp;gt;        443/TCP          1d

C:\Users\kaitoy&amp;gt;kubectl describe services/goslings
Name:                   goslings
Namespace:              default
Labels:                 run=goslings
Annotations:            &amp;lt;none&amp;gt;
Selector:               run=goslings
Type:                   NodePort
IP:                     10.0.0.69
Port:                   &amp;lt;unset&amp;gt; 8080/TCP
NodePort:               &amp;lt;unset&amp;gt; 32406/TCP
Endpoints:              172.17.0.2:8080
Session Affinity:       None
Events:                 &amp;lt;none&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;goslingsã¨ã„ã†åå‰ã®ServiceãŒã§ããŸã€‚
ä¸Šè¨˜&lt;code&gt;kubectl describe&lt;/code&gt;ã®å‡ºåŠ›ã®NodePortã®ã¨ã“ã«æ›¸ã„ã¦ã‚ã‚‹ã®ãŒå¤–éƒ¨ã«ã•ã‚‰ã•ã‚ŒãŸãƒãƒ¼ãƒˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;minikube ip&lt;/code&gt;ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube ip
192.168.99.100
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Minikubeã®VMã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚‚åˆ†ã‹ã‚‹ã®ã§ã€NodePortã®ãƒãƒ¼ãƒˆã¨åˆã‚ã›ã¦ã€&lt;code&gt;http://192.168.99.100:32406&lt;/code&gt;ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã‚‰ã€Goslingsã®GUIè¦‹ã‚ŒãŸã€‚
ãƒ’ãƒ¥ãƒ¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes-cont/goslings-service.png&#34; alt=&#34;goslings-service&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã¨ã“ã‚ã§ã€ä¸Šè¨˜&lt;code&gt;kubectl describe&lt;/code&gt;ã®å‡ºåŠ›ã‚’è¦‹ã‚‹ã¨ã€ç‰¹ã«æŒ‡å®šã¯ã—ãªã‹ã£ãŸãŒã€Podã«&lt;code&gt;run=goslings&lt;/code&gt;ã¨ã„ã†LabelãŒä»˜ã„ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚
Serviceã®describeã‚’è¦‹ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl describe svc goslings
Name:                   goslings
Namespace:              default
Labels:                 run=goslings
Annotations:            &amp;lt;none&amp;gt;
Selector:               run=goslings
Type:                   NodePort
IP:                     10.0.0.69
Port:                   &amp;lt;unset&amp;gt; 8080/TCP
NodePort:               &amp;lt;unset&amp;gt; 32406/TCP
Endpoints:              172.17.0.2:8080
Session Affinity:       None
Events:                 &amp;lt;none&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;run=goslings&lt;/code&gt;ã¨ã„ã†SelectorãŒServiceã«ç´ã¥ã„ã¦ã„ã‚‹ã€‚
ã¤ã¾ã‚Šã€Serviceã¨PodãŒã€&lt;code&gt;run=goslings&lt;/code&gt;ã§ç´ã¥ã„ã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Labelã¯ã‚¯ã‚¨ãƒªæ™‚ã®ãƒ•ã‚£ãƒ«ã‚¿ã¨ã‹ã«ã‚‚ä½¿ãˆã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get po -l run=goslings
NAME                        READY     STATUS    RESTARTS   AGE
goslings-1210510689-6w5tf   1/1       Running   0          1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¾Œã‹ã‚‰ãƒ©ãƒ™ãƒ«ä»˜ã‘ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl label pod goslings-1210510689-6w5tf ver=1.2.3
pod &amp;quot;goslings-1210510689-6w5tf&amp;quot; labeled
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-5-ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 5: ã‚¢ãƒ—ãƒªã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ã‚¢ãƒ—ãƒªã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆãƒ»ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³ã‚’å­¦ã¶ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;Deploymentã®å®šç¾©ã§Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’å¤‰ãˆã‚‹ã¨ã€ãã®æ•°ã«åˆã‚ã›ã¦KubernetesãŒPodã‚’èµ·å‹•ã—ãŸã‚Šæ­¢ã‚ãŸã‚Šã—ã¦ãã‚Œã¦ã‚¹ã‚±ãƒ¼ãƒ«ã§ãã‚‹ä»•çµ„ã¿ã€‚
ãƒ¬ãƒ—ãƒªã‚«ã‚’ä½œã£ã¦ãŠãã¨ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãã‚‹ã®ã‚‚åˆ©ç‚¹ã€‚
&lt;a href=&#34;http://kubernetes.io/docs/user-guide/horizontal-pod-autoscaling/&#34;&gt;ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒ«æ©Ÿèƒ½&lt;/a&gt;ã‚‚ã‚ã‚‹ã‘ã©ã€ãã‚Œã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯æ‰±ã‚ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;è¤‡æ•°ã®Podã§è² è·åˆ†æ•£ã™ã‚‹ã¨ã„ã†ã“ã¨ãªã®ã§ã€Serviceã§ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã™ã‚‹ã®ãŒå‰æã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ç¾åœ¨ã®Deploymentã®çŠ¶æ…‹ã‚’ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get deploy
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   1         1         1            1           1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Podã®ãƒ¬ãƒ—ãƒªã‚«æ•°ã¯ã€æœŸå¾…ã—ã¦ã‚‹(DESIRED)ã®ãŒ1ã§ã€ä»Š(CURRENT)ã‚‚1ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆã™ã‚‹ã«ã¯ã€&lt;code&gt;kubectl scale&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã§ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’å¢—ã‚„ã—ã¦ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl scale deploy/goslings --replicas=3
deployment &amp;quot;goslings&amp;quot; scaled

C:\Users\kaitoy&amp;gt;kubectl get deploy
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   3         3         3            3           1h

C:\Users\kaitoy&amp;gt;kubectl get po -o wide
NAME                       READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-442066424-jn1lw   1/1       Running   0          1h        172.17.0.2   minikube
goslings-442066424-rdw4k   1/1       Running   0          1m        172.17.0.3   minikube
goslings-442066424-rwwjw   1/1       Running   0          1m        172.17.0.4   minikube
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ¬ãƒ—ãƒªã‚«ãŒ3å€‹ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚¹ã‚±ãƒ¼ãƒ«ã‚¤ãƒ³ã™ã‚‹ã«ã¯ã€&lt;code&gt;kubectl scale&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã§ãƒ¬ãƒ—ãƒªã‚«æ•°ã‚’æ¸›ã‚‰ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl scale deploy/goslings --replicas=2
deployment &amp;quot;goslings&amp;quot; scaled

C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS        RESTARTS   AGE
goslings-442066424-0mv4x   1/1       Terminating   0          1m
goslings-442066424-34h1f   1/1       Running       0          1m
goslings-442066424-kmn3p   1/1       Running       0          17m

C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS    RESTARTS   AGE
goslings-442066424-34h1f   1/1       Running   0          1m
goslings-442066424-kmn3p   1/1       Running   0          17m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;kubectl scale&lt;/code&gt;ç›´å¾Œã®&lt;code&gt;kubectl get po&lt;/code&gt;ã§ã¯ã€ä¸€ã¤ã®Podã‚’åœæ­¢ã—ã¦ã„ã‚‹æœ€ä¸­ã®æ§˜å­ãŒè¦‹ãˆã¦ã„ã¦ã€å†åº¦ã®&lt;code&gt;kubectl get po&lt;/code&gt;ã§ã¯ãƒ¬ãƒ—ãƒªã‚«ãŒ2å€‹ã«ãªã£ãŸã®ãŒç¢ºèªã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®çŠ¶æ…‹ãŒKubernetes Basicsã§ä½œã‚‹ã‚¯ãƒ©ã‚¹ã‚¿ã®æœ€çµ‚å½¢ã§ã€å›³ã«ã™ã‚‹ã¨ä»¥ä¸‹ã®æ„Ÿã˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes-cont/objects.png&#34; alt=&#34;objects&#34; /&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetes-basics-ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«-6-ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹&#34;&gt;Kubernetes Basics - ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« 6: ã‚¢ãƒ—ãƒªã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹&lt;/h2&gt;

&lt;p&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚¢ãƒ—ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ(i.e. ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®å¤‰æ›´)ã‚’å­¦ã¶ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;Deploymentã®å®šç¾©ã‚’ã„ã˜ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¤‰ãˆã¦ã‚„ã‚‹ã¨ã€ãã®ä¸­ã®Podã‚’æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã§é †æ¬¡(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ä¸€ã¤ä¸€ã¤)èµ·å‹•ã—ãªãŠã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¢ãƒ—ãƒªã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚‚ã•ã‚Œã¦ã€ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚‚ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€&lt;code&gt;kubectl set image&lt;/code&gt;ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã€‚
&lt;code&gt;goslings&lt;/code&gt;ã¨ã„ã†åã®Deploymentå†…ã®ã€&lt;code&gt;goslings&lt;/code&gt;ã¨ã„ã†åã®Containerã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’&lt;code&gt;kaitoy/goslings:hoge&lt;/code&gt;ã«å¤‰æ›´ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl set image deploy/goslings goslings=kaitoy/goslings:hoge
deployment &amp;quot;goslings&amp;quot; image updated
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å®Ÿéš›ã«ã¯&lt;code&gt;kaitoy/goslings:hoge&lt;/code&gt;ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ãªã„ã®ã§ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã®Pullã«å¤±æ•—ã—ãŸã¨ã„ã†ã‚¨ãƒ©ãƒ¼(ErrImagePull)ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS         RESTARTS   AGE
goslings-274047280-jxmmh   0/1       ErrImagePull   0          9s
goslings-274047280-rgg2v   0/1       ErrImagePull   0          8s
goslings-442066424-34h1f   1/1       Terminating    0          1h
goslings-442066424-kmn3p   1/1       Running        0          1h
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚¤ãƒ¡ãƒ¼ã‚¸å¤‰æ›´å‰ã«æˆ»ã™ã«ã¯ã€&lt;code&gt;kubectl rollout undo&lt;/code&gt;ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl rollout undo deploy/goslings
deployment &amp;quot;goslings&amp;quot; rolled back

C:\Users\kaitoy&amp;gt;kubectl rollout status deploy/goslings
deployment &amp;quot;goslings&amp;quot; successfully rolled out

C:\Users\kaitoy&amp;gt;kubectl get po
NAME                       READY     STATUS    RESTARTS   AGE
goslings-442066424-kmn3p   1/1       Running   0          1h
goslings-442066424-m3873   1/1       Running   0          5s
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¡äº‹ã«æˆ»ã£ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ç•ªå¤–ç·¨1-3ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ‰‹æ³•&#34;&gt;ç•ªå¤–ç·¨1 - 3ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†æ‰‹æ³•&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç®¡ç†ã™ã‚‹æ‰‹æ³•ã¯&lt;a href=&#34;https://kubernetes.io/docs/tutorials/object-management-kubectl/object-management/&#34;&gt;å¤§ãã3ã¤ã‚ã‚‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç®¡ç†æ‰‹æ³•&lt;/th&gt;
&lt;th&gt;ã„ã˜ã‚‹å¯¾è±¡&lt;/th&gt;
&lt;th&gt;é›£æ˜“åº¦&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;å‘½ä»¤çš„ã‚³ãƒãƒ³ãƒ‰&lt;/td&gt;
&lt;td&gt;ç”Ÿã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ&lt;/td&gt;
&lt;td&gt;ç°¡å˜&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/td&gt;
&lt;td&gt;å€‹ã€…ã®ãƒ•ã‚¡ã‚¤ãƒ«&lt;/td&gt;
&lt;td&gt;æ™®é€š&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;å®£è¨€çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/td&gt;
&lt;td&gt;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å…¥ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ç¾¤&lt;/td&gt;
&lt;td&gt;é›£ã—ã„&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Kubernetes Basicsã§ã‚„ã£ã¦ãŸæ‰‹æ³•ã¯ä¸€ç•ªä¸Šã®å‘½ä»¤çš„ã‚³ãƒãƒ³ãƒ‰ã€‚
ã“ã‚Œã¯ç°¡å˜ã§åˆ†ã‹ã‚Šã‚„ã™ã„ã€‚
ã‘ã©ã€ä½•åº¦ã‚‚åŒã˜ã‚ˆã†ãªãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãªã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’æ¯å›æ‰“ã¤ã®ãŒé¢å€’ã ã—ã€ä½œæˆã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯æ˜ç¤ºçš„ã˜ã‚ƒãªã„ã—ã€å¤‰æ›´ç®¡ç†ã‚‚ã§ããªã„ã€‚
ã“ã®æ‰‹æ³•ã¯ä¸»ã«é–‹ç™ºä¸­ã«ä½¿ã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;äºŒã¤ç›®ã®æ‰‹æ³•ã®å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§ã¯ã€YAML(ã‹JSON)ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ã‚’æ›¸ã„ã¦ãŠã„ã¦ã€kubectlã«æ¸¡ã™ã€‚
ã“ã®æ‰‹æ³•ã ã¨ã€å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ä½¿ãˆã‚‹ã—ã€Gitã¨ã‹ã®ãƒªãƒã‚¸ãƒˆãƒªã«å…¥ã‚Œã‚‹ã“ã¨ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»å¤‰æ›´ç®¡ç†ã§ãã‚‹ã€‚
ã‘ã©ã€Kubernetesã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ¢ãƒ‡ãƒ«ã‚’ç†è§£ã—ãªã„ã¨ä½¿ãˆãªã„ã€‚
(ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ã®è©³ç´°ã¯&lt;a href=&#34;https://kubernetes.io/docs/api-reference/v1.8/&#34;&gt;APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹&lt;/a&gt;ã‚’å‚ç…§ã€‚)&lt;/p&gt;

&lt;p&gt;å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ kubectl create -f nginx.yaml
$ kubectl delete -f nginx.yaml -f redis.yaml
$ kubectl replace -f nginx.yaml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä¸‰ã¤ç›®ã®æ‰‹æ³•ã®å®£è¨€çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§ã¯ã€è¨­å®šãƒ•ã‚©ãƒ«ãƒ€ã«å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ç½®ãã€‚
ãƒ¦ãƒ¼ã‚¶ã¯æ˜ç¤ºçš„ã«createã¨ã‹updateã¨ã‹æŒ‡ç¤ºã™ã‚‹å¿…è¦ãŒç„¡ãã€kubectlãŒå‹æ‰‹ã«åˆ¤æ–­ã—ã¦ãã‚Œã‚‹ã€‚
ç”Ÿã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç›´æ¥ã„ã˜ã£ãŸå¾Œã€åŒã˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å¤‰æ›´ã—ã¦ã‚‚ã€
ä¸¡è€…ã®å¤‰æ›´ãŒä¸Šæ‰‹ããƒãƒ¼ã‚¸ã•ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ãªã‚“ã‹ã™ã”ã„ã‘ã©ã€ä¸Šæ‰‹ãã„ã‹ãªã‹ã£ãŸã¨ãã®ãƒ‡ãƒãƒƒã‚°ãŒã‚€ãšã„ã€‚&lt;/p&gt;

&lt;p&gt;å®£è¨€çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã§ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;$ kubectl apply -R -f configs/
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ç•ªå¤–ç·¨2-å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&#34;&gt;ç•ªå¤–ç·¨2 - å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š&lt;/h2&gt;

&lt;p&gt;3ã¤ã®æ‰‹æ³•ã®å†…ã€å‘½ä»¤çš„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§Goslingsã‚’Minikubeã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€Kubernetes Basicsã§ä½œã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¶ˆã™ãŸã‚ã€Minikubeã®VMã‚’ä½œã‚Šç›´ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&amp;gt;minikube delete
Deleting local Kubernetes cluster...
Machine deleted.

C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã«å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ã„ã¦ã„ãã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://v1-7.docs.kubernetes.io/docs/api-reference/v1.7/#deployment-v1beta1-apps&#34;&gt;APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®Deploymentã®ã¨ã“&lt;/a&gt;ã‚’ã¿ã‚‹ã¨ã€Kubernetes Basicsã®æœ€çµ‚å½¢ã¨åŒã˜ã‚ˆã†ãªDeploymentã‚’ä½œã‚‹å®šç¾©ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: goslings-sample
spec:
  replicas: 2
  template:
    metadata:
      labels:
        app: goslings
        ver: latest
    spec:
      containers:
        - name: goslings
          image: kaitoy/goslings:latest
          ports:
            - name: http
              containerPort: 8080
          args:
            - &#39;8080&#39;
            - /tmp
            - https://github.com/kaitoy/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åŒæ§˜ã«ã€Serviceã¯ã€&lt;a href=&#34;https://v1-7.docs.kubernetes.io/docs/api-reference/v1.7/#service-v1-core&#34;&gt;APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã®Serviceã®ã¨ã“&lt;/a&gt;ã¿ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-yaml&#34;&gt;kind: Service
apiVersion: v1
metadata:
  name: goslings-sample
spec:
  ports:
    - name: http
      port: 8080
      targetPort: 8080
  selector:
    app: goslings
  type: NodePort
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€ãã‚Œãã‚Œã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’&lt;code&gt;kubectl create&lt;/code&gt;ã«æ¸¡ã—ã¦ã‚„ã‚‹ã¨ã€Goslingsãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\kubeTest&amp;gt;kubectl create -f deploy_goslings.yml
deployment &amp;quot;goslings-sample&amp;quot; created

C:\Users\kaitoy\kubeTest&amp;gt;kubectl create -f service_goslings.yml
service &amp;quot;goslings-sample&amp;quot; created
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç¨®é¡ã‚‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚‚å¤§é‡ã«ã‚ã‚‹ã®ã§ã€ä½¿ã„ã“ãªã™ã®ã¯é›£ã—ãã†ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Kubernetes 1.8ãŒå‡ºãŸã®ã§ã€Minikubeã‚’è§¦ã£ã¦ã¿ã‚‹</title>
          <link>https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/</link>
          <pubDate>Tue, 10 Oct 2017 00:10:59 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/&#34;&gt;Kubernetes&lt;/a&gt;1.8ã®ãƒªãƒªãƒ¼ã‚¹ãŒè©±é¡Œã«ãªã£ã¦ã„ãŸã®ã§ã€ã¡ã‚‡ã£ã¨è§¦ã£ã¦è¦‹ãŸã¨ã„ã†è©±ã€‚
(1.8ã‚’è§¦ã£ãŸã¨ã¯è¨€ã£ã¦ã„ãªã„ã€‚)&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ã«ã¯ã€&lt;a href=&#34;https://kubernetes.io/docs/tutorials/kubernetes-basics/&#34;&gt;Kubernetes Basics&lt;/a&gt;ã¨ã„ã†ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚„ã‚ŠãªãŒã‚‰ã€&lt;a href=&#34;https://github.com/kubernetes/minikube&#34;&gt;Minikube&lt;/a&gt;ã«&lt;a href=&#34;https://kaitoy.github.io/goslings/&#34;&gt;Goslings&lt;/a&gt;ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚“ã ã‘ã©ã€ã“ã®è¨˜äº‹ã§ã¯Minikubeã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ãŸã¨ã“ã‚ã¾ã§ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;kubernetesã¨ã¯&#34;&gt;Kubernetesã¨ã¯&lt;/h2&gt;

&lt;p&gt;Kubernetesã¯OSSã®ã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã€‚
è‹±èªã ã¨ã‚¯ãƒ¼ãƒãƒãƒ†ã‚£ã‚¹ã¿ãŸã„ã«ç™ºéŸ³ã™ã‚‹ã€‚
GoogleãŒè‡ªèº«ã®ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã§ã‚ã‚‹&lt;a href=&#34;https://research.google.com/pubs/pub43438.html&#34;&gt;Borg&lt;/a&gt;ã®é‹ç”¨ã§åŸ¹ã£ãŸãƒã‚¦ãƒã‚¦ã‚’æ´»ã‹ã—ã¦é–‹ç™ºã—ãŸã‚‚ã®ã€‚
2014å¹´ã“ã‚ã«é–‹ç™ºãŒå§‹ã¾ã‚Šã€2015å¹´å¤ã«v1ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã¨ã„ã†ã“ã¨ã§ã€ã‹ãªã‚Šæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã€‚
ã‚ˆãæ¯”ã¹ã‚‰ã‚Œã‚‹ã‚‚ã®ã«ã¯&lt;a href=&#34;https://docs.docker.com/engine/swarm/&#34;&gt;Dockerã®Swarmãƒ¢ãƒ¼ãƒ‰&lt;/a&gt;ã‚„&lt;a href=&#34;http://mesos.apache.org/&#34;&gt;Apache Mesos&lt;/a&gt;ãŒã‚ã‚‹ãŒã€ä½•ãŒé•ã†ã®ã‹ã¯èª¿ã¹ã¦ãªã„ã®ã§çŸ¥ã‚‰ãªã„ã€‚
ãŸã ã€Dockerã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã¯KubernetesãŒä¸€ç•ªå‹¢ã„ãŒã‚ã‚‹é›°å›²æ°—ã‚’æ„Ÿã˜ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;(2017/10/18è¿½è¨˜: &lt;a href=&#34;http://www.publickey1.jp/blog/17/dockerkubernetesdockercon_eu_2017.html&#34;&gt;DockerãŒKubernetesã¨ã®çµ±åˆã‚’ç™ºè¡¨&lt;/a&gt;ã—ãŸã€‚Kubernetesã¯Dockerãƒã‚¤ãƒ†ã‚£ãƒ–ãªãƒ„ãƒ¼ãƒ«ã«ãªã‚Šã€Dockerã¨ã¨ã‚‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€Docker Composeã®Conposeãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‚Šã™ã‚‹ã€‚Kubernetesã®å¤§å‹åˆ©ã£ã½ã„ã€‚)&lt;/p&gt;

&lt;p&gt;Kubernetesã‚’ä½¿ã†ã¨ã€è¤‡æ•°ã®ç‰©ç†ãƒã‚·ãƒ³ã‹ã‚‰ãªã‚‹HAã‚¯ãƒ©ã‚¹ã‚¿(Kubernetesã‚¯ãƒ©ã‚¹ã‚¿)ã‚’æ§‹æˆã—ã€ãã®ä¸Šã«ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ç®¡ç†ã§ãã‚‹ã€‚
Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€ä¸€çµ„ã®Masterã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¾¤(a.k.a. Kubernetes Control Planeã€ã¾ãŸã¯å˜ã«Master)ã¨ä¸€ã¤ä»¥ä¸Šã®Node(æ˜”ã¯Minionã¨å‘¼ã°ã‚Œã¦ãŸã‚‚ã®)ã§æ§‹æˆã•ã‚Œã‚‹ã€‚
Nodeã¯ã€Masterã®ç®¡ç†ä¸‹ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹æ©Ÿèƒ½ã‚’å‚™ãˆãŸã€ä¸€å°ã®VMã‚„ç‰©ç†ãƒã‚·ãƒ³ã€‚
Masterã¯Nodeä¸Šã§å‹•ãã€ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ç®¡ç†ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã€çŠ¶æ…‹ç®¡ç†ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãªã©ã‚’æ‹…ã†ã€‚&lt;/p&gt;

&lt;p&gt;Kubernetesã®&lt;a href=&#34;https://github.com/kubernetes/community/blob/master/contributors/design-proposals/architecture/architecture.md&#34;&gt;ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£&lt;/a&gt;ã‚’å›³ã«ã™ã‚‹ã¨ä»¥ä¸‹ã®æ„Ÿã˜ã€‚
çŸ¢å°ã®å‘ãã¨ã‹ã¯ã¡ã‚‡ã£ã¨é–“é•ã£ã¦ã‚‹ã‹ã‚‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/goslings-on-kubernetes/architecture.png&#34; alt=&#34;architecture&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;ã”ã¡ã‚ƒã”ã¡ã‚ƒã™ã‚‹ã®ã§çœã„ãŸã‘ã©ã€å›³ã®ä¸‹éƒ¨ã®Nodeå†…ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ã€ä»–ã®Nodeå†…ã§ã‚‚å‹•ã„ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Masterã«ã¯&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-apiserver/&#34;&gt;kube-apiserver&lt;/a&gt;ãŒå«ã¾ã‚Œã¦ã„ã¦ã€&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/kubernetes-api/&#34;&gt;Kubernetes API&lt;/a&gt;ã¨ã„ã†REST APIã‚’å…¬é–‹ã™ã‚‹ã€‚
ã“ã®APIã‚’é€šã—ã¦&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/&#34;&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ&lt;/a&gt;ã‚’å®šç¾©ã—ãŸã‚Šã™ã‚‹ã“ã¨ã§ã€å®£è¨€çš„ã«ã‚³ãƒ³ãƒ†ãƒŠã®ç®¡ç†ãŒã§ãã‚‹ä»•çµ„ã¿ã€‚
ãƒ¦ãƒ¼ã‚¶ã¯æ™®é€šã€&lt;a href=&#34;https://kubernetes.io/docs/user-guide/kubectl/&#34;&gt;kubectl&lt;/a&gt;(ã‚­ãƒ¥ãƒ¼ãƒ–ã‚·ãƒ¼ãƒ†ã‚£ãƒ¼ã‚¨ãƒ«)ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§kube-apiserverã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯Masterã®&lt;a href=&#34;https://github.com/coreos/etcd&#34;&gt;etcd&lt;/a&gt;ã«ã‚ˆã£ã¦åˆ†æ•£ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆã‚¢ã«æ°¸ç¶šåŒ–ã•ã‚Œã€ãã®ã‚¹ãƒˆã‚¢ã‚’&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-controller-manager/&#34;&gt;kube-controller-manager&lt;/a&gt;ã¨&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-scheduler/&#34;&gt;kube-scheduler&lt;/a&gt;ãŒwatchã—ã¦ã¦ã€å¤‰æ›´ã«å¿œã˜ãŸå‡¦ç†ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kube-controller-managerã¯ã€ãƒãƒ¼ãƒ‰ã®ç®¡ç†ã‚„ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã®ç®¡ç†ã‚„ã€ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãªã©ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¬ãƒ™ãƒ«ã®æ©Ÿèƒ½ã‚’å®Ÿè¡Œã™ã‚‹ã€‚
(ã‚ˆãã‚ã‹ã‚‰ãªã„ã€‚)&lt;/p&gt;

&lt;p&gt;kube-schedulerã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹ãƒ›ã‚¹ãƒˆã‚’é¸å‡ºã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã‚’ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã€å›³ã«ã¯ãªã„ã‘ã©ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/cloud-controller-manager/&#34;&gt;cloud-controller-manager&lt;/a&gt;ã¨ã„ã†ã®ãŒMasterã§å‹•ãã“ã¨ã‚‚ã‚ã£ã¦ã€ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã‚„ã‚Šå–ã‚Šã—ã¦ã‚¯ãƒ©ã‚¦ãƒ‰å›ºæœ‰ã®ä»•äº‹ã‚’ã™ã‚‹ã‚‰ã—ã„ã€‚
ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ™ãƒ³ãƒ€ã˜ã‚ƒãªã‘ã‚Œã°æ°—ã«ã—ãªãã¦è‰¯ã•ãã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä¸€æ–¹ã€å„Nodeã§ã¯ã€&lt;a href=&#34;https://kubernetes.io/docs/admin/kubelet/&#34;&gt;kubelet&lt;/a&gt;(ã‚­ãƒ¥ãƒ¼ãƒ–ãƒ¬ãƒƒãƒˆ)ã¨ã„ã†Masterã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ãªã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãŒå‹•ãã€‚&lt;/p&gt;

&lt;p&gt;kubeletã¯kube-apiserverã‹ã‚‰ã®æŒ‡ç¤ºã§ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ãŸã‚Šç›£è¦–ã—ãŸã‚Šæ­¢ã‚ãŸã‚Šã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubeletãŒã‚³ãƒ³ãƒ†ãƒŠã‚’æ‰±ã†ãŸã‚ã®ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯ã€æ™®é€šã¯&lt;a href=&#34;https://www.docker.com/&#34;&gt;Docker&lt;/a&gt;ã ã‘ã©ã€&lt;a href=&#34;https://coreos.com/rkt/&#34;&gt;rkt&lt;/a&gt;ã¨ã‹&lt;a href=&#34;https://github.com/kubernetes-incubator/cri-o&#34;&gt;cri-o&lt;/a&gt;ã¨ã‹&lt;a href=&#34;https://github.com/kubernetes/frakti&#34;&gt;frakti&lt;/a&gt;ã¨ã‹ã‚‚ä½¿ãˆã‚‹ã€‚&lt;a href=&#34;https://github.com/opencontainers/runc&#34;&gt;runc&lt;/a&gt;ã‚„&lt;a href=&#34;https://github.com/oracle/railcar&#34;&gt;RailCar&lt;/a&gt;ã¯ã©ã†ãªã‚“ã ã‚ã†ã€‚&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã‚¯ãƒ©ã‚¹ã‚¿å†…ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã¤ãªãŒã‚‹ã®ã§ã€ãã“ã§å‹•ã„ã¦ã„ã‚‹ã‚¢ãƒ—ãƒªã«ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€ä½•ã‚‰ã‹ã®å½¢ã§ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ä¸­ç¶™ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
ã“ã‚Œã‚’ã™ã‚‹ã®ãŒ&lt;a href=&#34;https://kubernetes.io/docs/admin/kube-proxy/&#34;&gt;kube-proxy&lt;/a&gt;ã€‚
ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚‚ã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯&#34;&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã¯&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ä¸Šã§æ©Ÿèƒ½ã™ã‚‹æ§‹æˆè¦ç´ ã‚’è¡¨ç¾ã™ã‚‹ã‚‚ã®ã€‚
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/#object-spec-and-status&#34;&gt;specã¨status&lt;/a&gt;ã‚’æŒã¡ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æœŸå¾…ã™ã‚‹çŠ¶æ…‹ã‚„ãµã‚‹ã¾ã„(spec)ã‚’å®šç¾©ã—ã¦ãŠãã¨ã€KubernetesãŒå®Ÿéš›ã®çŠ¶æ…‹(status)ã‚’ãã‚Œã«åˆã‚ã›ã¦ãã‚Œã‚‹ã€‚
å®£è¨€çš„ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/&#34;&gt;Pod&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ãƒ‡ãƒ—ãƒ­ã‚¤ã®æœ€å°å˜ä½ã€‚
ä¸€ã¤(ã¾ãŸã¯ãƒªã‚½ãƒ¼ã‚¹ã‚’å…±æœ‰ã™ã‚‹è¤‡æ•°)ã®ã‚³ãƒ³ãƒ†ãƒŠã¨ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã©ã‚’å†…åŒ…ã™ã‚‹ã€‚
ä¸€ã¤ã®Podã«ã¯ä¸€ã¤ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒä»˜ãã€‚&lt;/p&gt;

&lt;p&gt;kubeletã¯Podã®å®šç¾©ã«å¾“ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;å› ã¿ã«ã€etcdä»¥å¤–ã®Masterã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚Podã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/service/&#34;&gt;Service&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Podã®è«–ç†ã‚°ãƒ«ãƒ¼ãƒ—ã€‚
Podã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¤–éƒ¨ã«å…¬é–‹ã•ã‚Œãªã„ã®ã§ã€å¤–ã¨ã®ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹ãŸã‚ã«ServiceãŒã‚ã‚‹ã€‚
kube-proxyã¯ã“ã„ã¤ã®å®šç¾©ã«å¾“ã£ã¦åƒãã€‚&lt;/p&gt;

&lt;p&gt;Serviceã«ã¯è¤‡æ•°ã®Endpoint(i.e. Podç­‰)ãŒç´ã¥ãã€å¤–éƒ¨ã‹ã‚‰ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã®ã§ã€å†—é•·åŒ–ã‚„ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µçš„ãªåƒãã‚‚ã™ã‚‹ã€‚
Serviceã¯Podã‚’æŠ½è±¡åŒ–ã™ã‚‹ã®ã§ã€PodãŒæ­»ã‚“ã ã‚Šå…¥ã‚Œæ›¿ã‚ã£ãŸã‚Šã—ã¦ã‚‚å¤–ã«å½±éŸ¿ãŒè¦‹ãˆã«ãããªã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Serviceã«ã¯ä»¥ä¸‹ã®typeãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;ClusterIP (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ): Kubernetesã‚¯ãƒ©ã‚¹ã‚¿å†…ã‹ã‚‰ã ã‘ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã ã‘ã‚’ã‚‚ã¤ã€‚&lt;/li&gt;
&lt;li&gt;NodePort: ClusterIPã®æ‹¡å¼µã€‚å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«åŠ ãˆã€ã‚¯ãƒ©ã‚¹ã‚¿å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒãƒ¼ãƒˆã‚’ä¸€ã¤æŒã¤ã€‚&lt;/li&gt;
&lt;li&gt;LoadBalancer: NodePortã®æ‹¡å¼µã€‚å¤–éƒ¨ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µã‚’ä½œã£ã¦ã€å›ºå®šã®å¤–éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä»˜ã‘ã¦ã€å†…éƒ¨IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;ExternalName: æŠ½è±¡åã‚’ã‚‚ã¤ã‚µãƒ¼ãƒ“ã‚¹ã€‚Kubernetes DNS serverã§åå‰è§£æ±ºã™ã‚‹ã€‚&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/dns-pod-service/&#34;&gt;è©³ç´°&lt;/a&gt;ã¯èª­ã‚“ã§ãªã„ã®ã§çŸ¥ã‚‰ãªã„ã€‚&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/storage/volumes/&#34;&gt;Volume&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æ°¸ç¶šåŒ–ã‚„Podå†…ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«å…±æœ‰ã®ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
Podã¨ã¨ã‚‚ã«ä½œã‚‰ã‚Œã€Podã¨ã¨ã‚‚ã«ç ´æ£„ã•ã‚Œã‚‹ã€‚
å®Ÿæ…‹ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚
hostPathã¨ã‹ã€nfsã¨ã‹ã€awsElasticBlockStoreã¨ã‹ã®ç¨®é¡ãŒã‚ã‚‹ã‚‰ã—ã„ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/&#34;&gt;Namespace&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ä»®æƒ³ã‚¯ãƒ©ã‚¹ã‚¿ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
ã“ã‚Œã‚’å®šç¾©ã™ã‚‹ã¨ã€ã²ã¨ã¤ã®ç‰©ç†ã‚¯ãƒ©ã‚¹ã‚¿ã‚’è¤‡æ•°ã®ä»®æƒ³ã‚¯ãƒ©ã‚¹ã‚¿ã«åˆ†å‰²ã§ãã‚‹ã€‚
å¤§è¦æ¨¡ãƒ¦ãƒ¼ã‚¶ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘æ©Ÿèƒ½ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Controller&lt;/p&gt;

&lt;p&gt;Podã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸã‚Šã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚„è‡ªå‹•å†èµ·å‹•ã—ãŸã‚Šã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/deployment/&#34;&gt;Deployment&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Podã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
Podã¨ReplicaSetã®å®£è¨€çš„ãªç”Ÿæˆãƒ»æ›´æ–°ã‚’å®Ÿç¾ã™ã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/&#34;&gt;ReplicaSet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;æŒ‡å®šã—ãŸæ•°ã®Podã®ãƒ¬ãƒ—ãƒªã‚«ã‚’ç¶­æŒã—ã¦ãã‚Œã‚‹ã€‚
åŸºæœ¬ã¯Deploymentã‹ã‚‰ä½œã‚‰ã‚Œã¦ã€Podã®ä½œæˆãƒ»å‰Šé™¤ãƒ»æ›´æ–°ã‚’ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ã‚¤ãƒˆã™ã‚‹ã€‚
&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/replicationcontroller/&#34;&gt;ReplicationController&lt;/a&gt;ã¨ã„ã†ã®ã‚‚ã‚ã‚‹ã‘ã©ã€ä»Šã¯ReplicaSetãŒæ¨å¥¨ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/&#34;&gt;StatefulSet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªã‚¢ãƒ—ãƒªã‚’ç®¡ç†ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
ç¾æ™‚ç‚¹ã§ã®Kubernetesæœ€æ–°ç‰ˆã®1.8ã§ã¾ã ãƒ™ãƒ¼ã‚¿ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/&#34;&gt;DaemonSet&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å…¨ã¦ã®ãƒãƒ¼ãƒ‰ã§å‹•ãã‚¢ãƒ—ãƒªã‚’å®Ÿç¾ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/controllers/jobs-run-to-completion/&#34;&gt;Job&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚¸ãƒ§ãƒ–ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
æŒ‡å®šã•ã‚ŒãŸå›æ•°ã€Podã‚’æˆåŠŸã§å®Œäº†ã•ã›ã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/&#34;&gt;ãƒ©ãƒ™ãƒ«&lt;/a&gt;ã¨ã„ã†ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ãªå±æ€§ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã€Podã¨Serviceã®ç´ã¥ã‘ã‚„ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ¤œç´¢æ™‚ã®ãƒ•ã‚£ãƒ«ã‚¿ã¨ã‹ã«ä½¿ãˆã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»Šå›Goslingsã‚’å‹•ã‹ã™ã®ã«ä½¿ã£ãŸã®ã¯ã€Podã€Deploymentã€ReplicaSetã€Service (NodePort)ã€‚&lt;/p&gt;

&lt;h2 id=&#34;podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&#34;&gt;Podãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&lt;/h2&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨ç´°ã‹ã„è©±ã ã‘ã©ã€Podé–“ã®é€šä¿¡ã¯ã©ã†ãªã£ã¦ã„ã‚‹ã‹ã¨ã„ã†è©±ã«ã¤ã„ã¦ã¡ã‚‡ã£ã¨èª¿ã¹ãŸã®ã§ã–ã£ãã‚Šæ›¸ã„ã¦ãŠãã€‚&lt;/p&gt;

&lt;p&gt;æ™®é€šã®&lt;a href=&#34;https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/#docker-network&#34;&gt;Dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&lt;/a&gt;ã ã¨ã€ã‚³ãƒ³ãƒ†ãƒŠã¯docker0ã¨ã„ã†ä»®æƒ³ãƒ–ãƒªãƒƒã‚¸ä¸Šã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§å‹•ããŸã‚ã€åŒã˜ãƒ›ã‚¹ãƒˆä¸Šã®ã‚³ãƒ³ãƒ†ãƒŠé–“ã¯é€šä¿¡ã§ãã‚‹ã‘ã©ã€åˆ¥ã®ãƒ›ã‚¹ãƒˆä¸Šã®ã‚³ãƒ³ãƒ†ãƒŠé€šä¿¡ã•ã›ãŸã„å ´åˆã¯ã€ãƒ›ã‚¹ãƒˆã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒ¼ãƒˆã‚’å‰²ã‚Šå½“ã¦ã¦ã‚„ã‚‰ãªã‘ã‚Œã°ã„ã‘ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯ã‚ã‚“ã©ã„ã®ã§ã€Kubernetesã¯ã€å„Podã«ä¸€æ„ãªIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¸ãˆã€PodãŒã©ã®ãƒ›ã‚¹ãƒˆã«ã„ã‚‹ã‹ã«ã‹ã‹ã‚ã‚‰ãšã€NATç„¡ã—ã§ç›¸äº’ã«é€šä¿¡ã§ãã‚‹&lt;a href=&#34;https://kubernetes.io/docs/concepts/cluster-administration/networking/&#34;&gt;ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯&lt;/a&gt;ã‚’æä¾›ã™ã‚‹ã€‚
ã“ã‚ŒãŒPodãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ã‹å‘¼ã°ã‚Œã€ãã®ä»•æ§˜ã¯&lt;a href=&#34;https://github.com/containernetworking/cni&#34;&gt;CNI&lt;/a&gt;ã§ã‚ªãƒ¼ãƒ—ãƒ³ã«å®šã‚ã‚‰ã‚Œã¦ã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.projectcalico.org/v2.6/getting-started/kubernetes/installation/hosted/kubeadm/&#34;&gt;Calico&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/projectcalico/canal/tree/master/k8s-install&#34;&gt;Canal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/coreos/flannel&#34;&gt;Flannel&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cloudnativelabs/kube-router/blob/master/Documentation/kubeadm.md&#34;&gt;Kube-router&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/romana/romana/tree/master/containerize#using-kubeadm&#34;&gt;Romana&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.weave.works/docs/net/latest/kube-addon/&#34;&gt;Weave Net&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;minikubeã¨ã¯&#34;&gt;Minikubeã¨ã¯&lt;/h2&gt;

&lt;p&gt;Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã¯&lt;a href=&#34;https://kubernetes.io/docs/setup/pick-right-solution/&#34;&gt;ã„ãã¤ã‹ã‚ã‚‹&lt;/a&gt;ãŒã€ä¸­ã§ã‚‚ã‚‚ã£ã¨ã‚‚ç°¡å˜ãªæ–¹æ³•ãŒMinikubeã€‚&lt;/p&gt;

&lt;p&gt;Minikubeã¯ã€å˜ä¸€Nodeã®Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’è©°ã‚ãŸVMã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦èµ·å‹•ã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®kubectlã‹ã‚‰ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã€‚
Linuxã€Windowsã€OS Xã§å‹•ãã€é–‹ç™ºã‚„ãƒ†ã‚¹ãƒˆç”¨é€”ã®Kubernetesç’°å¢ƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨&lt;a href=&#34;https://www.vagrantup.com/&#34;&gt;Vagrant&lt;/a&gt;ã£ã½ã„æ„Ÿã˜ã€‚Kuberneteså°‚ç”¨ã®ã€‚&lt;/p&gt;

&lt;h2 id=&#34;minikubeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Minikubeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/tasks/tools/install-minikube/&#34;&gt;Kubernetesã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã«ã—ãŸãŒã£ã¦ã€Minikubeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
ç’°å¢ƒã¯Windows 10 Home x64ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€Minikubeã®VMã‚’å‹•ã‹ã™ä»®æƒ³åŒ–ãƒ„ãƒ¼ãƒ«ã‚’å…¥ã‚Œã‚‹ã€‚
ä»Šã®ã¨ã“ã‚MinikubeãŒã‚µãƒãƒ¼ãƒˆã—ã¦ã‚‹ã®ã¯ã€Windowsã ã¨&lt;a href=&#34;https://www.virtualbox.org/&#34;&gt;VirtualBox&lt;/a&gt;ã‹&lt;a href=&#34;https://docs.microsoft.com/ja-jp/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v&#34;&gt;Hyper-V&lt;/a&gt;ã€‚
Windows 10 Homeã ã¨Hyper-VãŒä½¿ãˆãªã„ã®ã§ã€VirtualBoxä¸€æŠã€‚
VirtualBoxã¯ã€é©å½“ã«VT-xã‚’æœ‰åŠ¹ã«ã—ã¦(ã—ã¦ã‚ã£ãŸ)ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã ã‘ã€‚
ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯5.1.28ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€minikubeã‚³ãƒãƒ³ãƒ‰ã‚’å…¥ã‚Œã‚‹ã€‚
ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯Goã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ç”¨ã«ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸãƒã‚¤ãƒŠãƒªãŒGitHubã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸ã®&lt;a href=&#34;https://github.com/kubernetes/minikube/releases&#34;&gt;Releases&lt;/a&gt;ã«ä¸ŠãŒã£ã¦ã‚‹ã®ã§ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦Pathã®é€šã£ãŸã¨ã“ã«ç½®ãã ã‘ã€‚
ä»Šå›ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã®ã¯v0.22.2ã®minikube-windows-amd64ã§ã€ã“ã‚Œã‚’minikube.exeã«ãƒªãƒãƒ¼ãƒ ã—ã¦é…ç½®ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€minikubeãŒã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹Kubernetesã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’èª¿ã¹ã‚‹ã¨ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube get-k8s-versions
The following Kubernetes versions are available:
        - v1.7.5
        - v1.7.4
        - v1.7.3
        - v1.7.2
        - v1.7.0
        (snip)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1.8ã¯ã¾ã ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„â€¦&lt;/p&gt;

&lt;p&gt;1.7.5ãŒæœ€æ–°ãªã®ã§ãã‚Œã§ã‚„ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ã“ã¨ã§ã€kubectlã®1.7.5ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
kubectlã‚‚Goã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‹ã‚‰Windowsãƒã‚¤ãƒŠãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦Pathã®é€šã£ãŸã¨ã“ã‚ã«ç½®ãã ã‘ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;https://storage.googleapis.com/kubernetes-release/release/v1.7.5/bin/windows/amd64/kubectl.exe
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šã§Minikubeã®ç’°å¢ƒãŒã§ããŸã€‚
ç°¡å˜ã€‚&lt;/p&gt;

&lt;h2 id=&#34;minikubeèµ·å‹•&#34;&gt;Minikubeèµ·å‹•&lt;/h2&gt;

&lt;p&gt;Minikubeã¯ã€&lt;code&gt;minikube start&lt;/code&gt;ã§èµ·å‹•ã™ã‚‹ã“ã¨ãŒã§ãã€MinikubeãŒèµ·å‹•ã—ãŸã‚‰ã™ãã«Kubernetesã‚’ã„ã˜ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.5
Starting local Kubernetes v1.7.5 cluster...
Starting VM...
Downloading Minikube ISO
 106.37 MB / 106.37 MB [============================================] 100.00% 0s
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.

C:\Users\kaitoy&amp;gt;minikube status
minikube: Running
cluster: Running
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;èµ·å‹•ã—ãŸã€‚
VirtualBoxã®GUIã‚’è¦‹ã‚‹ã¨ã€minikubeã¨ã„ã†VMãŒèµ·å‹•ã—ã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚‹ã€‚
ã“ã®ä¸­ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãŒå‹•ã„ã¦ã„ã‚‹ã¯ãšã ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®VMã«ã¯ã€&lt;code&gt;minikube ssh&lt;/code&gt;ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube ssh
                         _             _
            _         _ ( )           ( )
  ___ ___  (_)  ___  (_)| |/&#39;)  _   _ | |_      __
/&#39; _ ` _ `\| |/&#39; _ `\| || , &amp;lt;  ( ) ( )| &#39;_`\  /&#39;__`\
| ( ) ( ) || || ( ) || || |\`\ | (_) || |_) )(  ___/
(_) (_) (_)(_)(_) (_)(_)(_) (_)`\___/&#39;(_,__/&#39;`\____)

$ uname -a
Linux minikube 4.9.13 #1 SMP Fri Sep 15 23:35:16 UTC 2017 x86_64 GNU/Linux
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã™ã”ãVagrantã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Minikubeã‚’èµ·å‹•ã™ã‚‹ã¨ã€kubectlã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒminikubeã¨ã„ã†ã‚‚ã®ã«è¨­å®šã•ã‚Œã€kubectlã‚³ãƒãƒ³ãƒ‰ã®æ¥ç¶šå…ˆãŒMinikubeã®Kubernetesã«ãªã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl config current-context
minikube
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€kubectlã§ã‚¯ãƒ©ã‚¹ã‚¿ã®çŠ¶æ…‹ã¨ã‹ã‚’è¦‹ã¦ã¿ã‚ˆã†ã¨æ€ã£ãŸã‚‰ã€ãªã‚“ã‹æ§˜å­ãŒå¤‰ã€‚
ãªã—ã®ã¤ã¶ã¦ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;kubectl get nodes
Unable to connect to the server: dial tcp 192.168.99.100:8443: connectex: No connection could be made because the target machine actively refused it.

C:\Users\kaitoy&amp;gt;kubectl cluster-info dump
Unable to connect to the server: dial tcp 192.168.99.100:8443: connectex: No connection could be made because the target machine actively refused it.

C:\Users\kaitoy&amp;gt;minikube dashboard
Could not find finalized endpoint being pointed to by kubernetes-dashboard: Error validating service: Error getting service kubernetes-dashboard: Get https://192.168.99.100:8443/api/v1/namespaces/kube-system/services/kubernetes-dashboard: dial tcp 192.168.99.100:8443: connectex: No connection could be made because the target machine actively refused it.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å†åº¦&lt;code&gt;minikube status&lt;/code&gt;ã—ã¦ã¿ãŸã‚‰ã€ã‚¯ãƒ©ã‚¹ã‚¿ãŒè½ã¡ã¦ã„ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube status
minikube: Running
cluster: Stopped
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;minikube logs&lt;/code&gt;ã§ãƒ­ã‚°ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ãŒãŸãã•ã‚“å‡ºã¦ã„ãŸã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ­ã‚°ãŒæœ€åˆã®ã»ã†ã«å‡ºã¦ãŸã®ã§ã€èªè¨¼ç³»ãŒã ã‚ã§ã€ã‚µãƒ¼ãƒ“ã‚¹é–“ã§ã‚„ã‚Šå–ã‚ŠãŒã§ããªã‹ã£ãŸã‚“ã˜ã‚ƒãªã„ã‹ã¨ã„ã†æ„Ÿã˜ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Oct 04 23:08:43 minikube localkube[2783]: W1004 23:08:43.599396    2783 authentication.go:368] AnonymousAuth is not allowed with the AllowAll authorizer.  Resetting AnonymousAuth to false. You should use a different authorizer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§ã€Kubernetesã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã¡ã‚‡ã£ã¨å¤ã„ã®(1.7.0)å¤‰ãˆã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;kubectlã®1.7.0ã‚’Pathã«ç½®ã„ã¦ã€Minikubeã‚’1.7.0ã§å†èµ·å‹•ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Kubernetes version downgrade is not supported. Using version: v1.7.5
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Kubernetesã®ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãªã„ã¨è¨€ã‚ã‚ŒãŸã€‚
ã®ã§ä¸€å›VMã‚’æ¶ˆã—ã¦ã‹ã‚‰ã‚„ã‚ŠãªãŠã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&amp;gt;minikube delete
Deleting local Kubernetes cluster...
Machine deleted.

C:\Users\kaitoy&amp;gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1.7.0ã§å‹•ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æ§˜å­ã¯ã©ã†ã‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy\Desktop\bin\pleiades\workspace\blog&amp;gt;minikube status
minikube: Running
cluster: Running
kubectl: Correctly Configured: pointing to minikube-vm at 192.168.99.100

C:\Users\kaitoy\Desktop\bin\pleiades\workspace\blog&amp;gt;kubectl get nodes
NAME       STATUS    AGE       VERSION
minikube   Ready     22s       v1.7.0

C:\Users\kaitoy\Desktop\bin\pleiades\workspace\blog&amp;gt;kubectl version
Client Version: version.Info{Major:&amp;quot;1&amp;quot;, Minor:&amp;quot;7&amp;quot;, GitVersion:&amp;quot;v1.7.0&amp;quot;, GitCommit:&amp;quot;d3ada0119e776222f11ec7945e6d860061339aad&amp;quot;, GitTreeState:&amp;quot;clean&amp;quot;, BuildDate:&amp;quot;2017-06-29T23:15:59Z&amp;quot;, GoVersion:&amp;quot;go1.8.3&amp;quot;, Compiler:&amp;quot;gc&amp;quot;, Platform:&amp;quot;windows/amd64&amp;quot;}
Server Version: version.Info{Major:&amp;quot;1&amp;quot;, Minor:&amp;quot;7&amp;quot;, GitVersion:&amp;quot;v1.7.0&amp;quot;, GitCommit:&amp;quot;d3ada0119e776222f11ec7945e6d860061339aad&amp;quot;, GitTreeState:&amp;quot;dirty&amp;quot;, BuildDate:&amp;quot;2017-10-04T09:25:40Z&amp;quot;, GoVersion:&amp;quot;go1.8.3&amp;quot;, Compiler:&amp;quot;gc&amp;quot;, Platform:&amp;quot;linux/amd64&amp;quot;}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã„ã‚‹ã£ã½ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã ã‘ã¯ãªãœã‹ç›¸å¤‰ã‚ã‚‰ãšé–‹ã‘ãªã„ã‘ã©ã¾ã‚ã„ã„ã‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\kaitoy&amp;gt;minikube dashboard
Could not find finalized endpoint being pointed to by kubernetes-dashboard: Error validating service: Error getting service kubernetes-dashboard: services &amp;quot;kubernetes-dashboard&amp;quot; not found
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ç¶šãã¯ã¾ãŸ&lt;a href=&#34;https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/&#34;&gt;åˆ¥ã®è¨˜äº‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å› ã¿ã«ã€ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼ã‚ã‚Šã®ãƒ—ãƒ­ã‚­ã‚·ç’°å¢ƒã§Minikube on Windowsã™ã‚‹å ´åˆã¯ã€ã¾ãšä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NO_PROXY&lt;/code&gt;: 192.168.99.100&lt;/li&gt;
&lt;li&gt;&lt;code&gt;http_proxy&lt;/code&gt;: username:password@domain.com:port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;https_proxy&lt;/code&gt;: username:password@domain.com:port&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;NO_PROXY&lt;/code&gt;ã®å€¤ã¯&lt;code&gt;minikube ip&lt;/code&gt;ã®å€¤ã€‚
ã§ã€&lt;/p&gt;

&lt;p&gt;&lt;code&gt;minikube start --docker-env HTTP_PROXY=http://%http_proxy% --docker-env HTTPS_PROXY=https://%https_proxy% --docker-env NO_PROXY=%NO_PROXY%&lt;/code&gt;ã¿ãŸã„ã«ã™ã‚Œã°ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¯ãšã€‚(å‚è€ƒ: &lt;a href=&#34;https://github.com/kubernetes/minikube/issues/530&#34;&gt;https://github.com/kubernetes/minikube/issues/530&lt;/a&gt;)&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>WebdriverIOã¨Chromeã®ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§è‡ªå‹•ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆã™ã‚‹Dockerã‚¤ãƒ¡ãƒ¼ã‚¸: webdriverio-chrome</title>
          <link>https://www.kaitoy.xyz/2017/08/14/webdriverio-chrome/</link>
          <pubDate>Mon, 14 Aug 2017 10:53:17 JST</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2017/08/14/webdriverio-chrome/</guid>
          <description>

&lt;p&gt;ã€Œ&lt;a href=&#34;https://www.kaitoy.xyz/2017/08/04/browser-test-framework/&#34;&gt;2017å¹´å¤ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯&lt;/a&gt;ã€ã®ç¶šãã€‚
&lt;a href=&#34;https://www.servicenow.com/ja&#34;&gt;ServiceNow&lt;/a&gt;ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆã‚’ã—ãŸãã¦è‰²ã€…èª¿ã¹ã¦ã„ã‚‹ã€‚
å‰å›ã¯ã€ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«&lt;a href=&#34;http://webdriver.io/&#34;&gt;WebdriverIO&lt;/a&gt;ã‚’ä½¿ã†ã¨æ±ºã‚ãŸã¨ã“ã‚ã¾ã§æ›¸ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ã€æœ€çµ‚çš„ã«ã€&lt;a href=&#34;http://webdriver.io/&#34;&gt;WebdriverIO&lt;/a&gt;ã€&lt;a href=&#34;http://webdriver.io/guide/testrunner/gettingstarted.html&#34;&gt;WDIO&lt;/a&gt;ã€&lt;a href=&#34;https://github.com/vvo/selenium-standalone&#34;&gt;selenium-standalone&lt;/a&gt;ã€&lt;a href=&#34;https://jasmine.github.io/&#34;&gt;Jasmine&lt;/a&gt;ã¨ã€Chromeã®ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã€Dockerã‚³ãƒ³ãƒ†ãƒŠ(&lt;a href=&#34;https://alpinelinux.org/&#34;&gt;Alpine Linux&lt;/a&gt;)ä¸Šã§ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¦ã€ServiceNowã®ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒå–ã‚Œã‚‹ã¨ã“ã‚ã¾ã§ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;ãã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®Dockerfileã¯&lt;a href=&#34;https://github.com/kaitoy/webdriverio-chrome&#34;&gt;GitHubã«ç½®ã„ãŸ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;ã¨ã‚Šã‚ãˆãšalpine-linux&#34;&gt;ã¨ã‚Šã‚ãˆãšAlpine Linux&lt;/h2&gt;

&lt;p&gt;ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ä½œæˆã¯è‡ªå®…ã§ã‚„ã£ã¦ã‚‹ã‘ã©ã€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã—ã¦Docker Hubã¨ã‹ã«ä¸Šã’ã¦ãŠã‘ã°ã€ç¤¾å†…ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã®ã¾ã¾å†ç¾ã§ãã‚‹ã€‚
ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«ä¿‚ã‚‹ç¤¾å†…æ‰‹ç¶šãã‚‚ã€Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã ã‘ã«å¯¾ã—ã¦ã‚„ã‚Œã°ã„ã„ã®ã§ã€ä¸­ã«ä½•ã‚’è©°ã‚è¾¼ã‚“ã§ã‚‚ã€å¾Œã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã‹è¿½åŠ ã—ã¦ã‚‚ã€ä¸€å›ã“ã£ãã‚Šã§æ¸ˆã‚€ã€‚&lt;/p&gt;

&lt;p&gt;ã¨ã„ã†ã‚ã‘ã§WebdriverIOç’°å¢ƒã‚’Dockerã‚³ãƒ³ãƒ†ãƒŠã¨ã—ã¦ã¤ãã‚‹ã“ã¨ã«ã™ã‚‹ã€‚
ã¨ã‚Šã‚ãˆãšã€è‡ªPC(Windows 10 Home x64)ã«å…¥ã£ã¦ã‚‹VMware Workstation Player 12.5.5ã§CentOS 7 x64ã®VMã‚’ä½œã‚Šã€ãã“ã«Dockerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã€ãã®Dockerã‚’ä½¿ã£ã¦ã€WebdriverIOç’°å¢ƒã®ãƒ™ãƒ¼ã‚¹ã«ã™ã‚‹Alpine Linuxã‚’pullã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;$ docker pull alpine:edge
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Alpine Linuxã¯&lt;a href=&#34;https://busybox.net/&#34;&gt;BusyBox&lt;/a&gt;ã¨&lt;a href=&#34;https://www.musl-libc.org/&#34;&gt;musl libc&lt;/a&gt;ã§æ§‹æˆã•ã‚ŒãŸè»½é‡ãª Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã€‚
2016å¹´2æœˆã«&lt;a href=&#34;https://www.brianchristner.io/docker-is-moving-to-alpine-linux/&#34;&gt;ã™ã¹ã¦ã®ã‚ªãƒ•ã‚£ã‚·ãƒ£ãƒ«Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒAlpine Linuxãƒ™ãƒ¼ã‚¹ã«ãªã‚‹&lt;/a&gt;ã¨ã„ã†ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãŒã‚ã£ãŸã—ã€ä»–ã«ãã‚Œã£ã½ã„ã‚‚ã®ã‚‚ãªã‹ã£ãŸã®ã§ã€ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ç’°å¢ƒã‚’ä½œã‚‹ã“ã¨ã«ã—ãŸã€‚
&lt;a href=&#34;https://www.gnu.org/software/libc/&#34;&gt;glibc&lt;/a&gt;ã˜ã‚ƒãªã„ã®ãŒã¡ã‚‡ã£ã¨æ°—ã«ãªã‚‹ã‘ã©ã€ã¾ã‚å•é¡Œãªã„ã‹ã€‚&lt;/p&gt;

&lt;p&gt;ç¾åœ¨ã€&lt;a href=&#34;https://pkgs.alpinelinux.org/package/edge/community/x86_64/chromium&#34;&gt;Chrome 59&lt;/a&gt;ã®Alpine Linuxãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯edgeãƒ–ãƒ©ãƒ³ãƒ(i.e. é–‹ç™ºãƒ–ãƒ©ãƒ³ãƒ)ã§ã—ã‹ä½œã‚‰ã‚Œã¦ã„ãªã„ã€‚
pullã™ã‚‹ã‚¿ã‚°ã‚’edgeã«ã—ãŸã®ã¯ãã®ãŸã‚ã€‚
(å› ã¿ã«ç¾æ™‚ç‚¹ã§Alpine Linuxã®latestã¯3.6ã€‚)&lt;/p&gt;

&lt;p&gt;ã§ã€èµ·å‹•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;$ docker run -it alpine:edge sh
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;chrome-chromium-ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Chrome(Chromium)ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;ã¾ãšã¯Chrome(ãŒAlpine Linuxãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯ãªã„ã®ã§ã€å®Ÿéš›ã«ã¯Chromium)ã¨ã€ã¤ã„ã§ã«ChromeDriverã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
Alpine Linuxç‹¬è‡ªã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§ã‚ã‚‹&lt;a href=&#34;https://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management&#34;&gt;apk&lt;/a&gt;ã‚’ä½¿ã†ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/ # apk add --update chromium chromium-chromedriver
/ # chromium-browser -version
Chromium 59.0.3071.115
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç„¡äº‹ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://bufferings.hatenablog.com/entry/2017/05/03/181713&#34;&gt;ã“ã®è¨˜äº‹&lt;/a&gt;ã‚’å‚è€ƒã«ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚
ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã«ã™ã‚‹ãŸã‚ã«&lt;code&gt;--headless&lt;/code&gt;ã‚’ä»˜ã‘ã¦ã€ä¸€æ™‚çš„ãªåˆ¶é™äº‹é …ã§&lt;code&gt;--disable-gpu&lt;/code&gt;ã‚’ä»˜ã‘ã‚‹å¿…è¦ãŒã‚ã£ã¦ã€ã‚³ãƒ³ãƒ†ãƒŠã®æ¨©é™ä¸è¶³ã‚’å›é¿ã™ã‚‹ãŸã‚ã«&lt;code&gt;--no-sandbox&lt;/code&gt;ã‚’ä»˜ã‘ã‚‹ã€‚
(ã‚³ãƒ³ãƒ†ãƒŠã®æ¨©é™ä¸è¶³å›é¿ã«ã¯ä»–ã«ã€&lt;code&gt;docker run&lt;/code&gt;ã«&lt;code&gt;--privileged&lt;/code&gt;ã‚„&lt;code&gt;--cap-add=SYS_ADMIN&lt;/code&gt;ä»˜ã‘ã‚‹&lt;a href=&#34;https://github.com/yukinying/chrome-headless-browser-docker&#34;&gt;æ–¹æ³•ãŒã‚ã‚‹&lt;/a&gt;ã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/ # chromium-browser --headless --no-sandbox --disable-gpu https://example.com/
[0811/145902.894023:WARNING:dns_config_service_posix.cc(326)] Failed to read DnsConfig.
[0811/145902.906137:FATAL:udev_loader.cc(38)] Check failed: false.
Received signal 6
  r8: 0000000000000061  r9: 00007fe3fe01c066 r10: 0000000000000008 r11: 0000000000000246
 r12: 00007fe3fe01bed0 r13: 00007fe3fe01be80 r14: 0000000000000000 r15: 0000000000000000
  di: 0000000000000002  si: 00007fe3fe01bda0  bp: 00007fe3fe01bda0  bx: 0000000000000006
  dx: 0000000000000000  ax: 0000000000000000  cx: ffffffffffffffff  sp: 00007fe3fe01bd88
  ip: 00007fe412a2f769 efl: 0000000000000246 cgf: 0000000000000033 erf: 0000000000000000
 trp: 0000000000000000 msk: 0000000000000000 cr2: 0000000000000000
[end of stack trace]
Calling _exit(1). Core file will not be generated.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;æœ€åˆã®WARNINGã¯ç½®ã„ã¨ã„ã¦ã€FATALã®ã»ã†ã¯ã€udev_loader.ccã¨ã„ã†ã®ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚°ã‚°ã£ãŸã‚‰ã€&lt;a href=&#34;http://qiita.com/dd511805/items/dfe03c5486bf1421875a&#34;&gt;Qiitaã«åŒã˜ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã¦ã„ã‚‹è¨˜äº‹&lt;/a&gt;ãŒã€‚
ã‚ˆãã‚ã‹ã‚‰ãªã„ãŒã€&lt;a href=&#34;https://pkgs.alpinelinux.org/package/v3.5/main/x86_64/udev&#34;&gt;udev&lt;/a&gt;ã¨&lt;a href=&#34;https://pkgs.alpinelinux.org/package/v3.6/main/x86_64/ttf-freefont&#34;&gt;ttf-freefont&lt;/a&gt;ã‚’å…¥ã‚Œã‚Œã°ã„ã„ã‚‰ã—ã„ã€‚
æ·±ãè€ƒãˆãšã«ãã‚Œã«å¾“ã†ã“ã¨ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/ # apk add udev ttf-freefont
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€å†åº¦å®Ÿè¡Œã€‚
(ã¡ã‚ƒã‚“ã¨å‹•ã„ã¦ã‚‹ã‹åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã«&lt;code&gt;--dump-dom&lt;/code&gt;ã‚‚ä»˜ã‘ãŸã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/ # chromium-browser --headless --no-sandbox --disable-gpu --dump-dom https://example.com/
[0811/151303.698629:WARNING:dns_config_service_posix.cc(326)] Failed to read DnsConfig.
&amp;lt;body&amp;gt;
&amp;lt;div&amp;gt;
    &amp;lt;h1&amp;gt;Example Domain&amp;lt;/h1&amp;gt;
    &amp;lt;p&amp;gt;This domain is established to be used for illustrative examples in documents. You may use this
    domain in examples without prior coordination or asking for permission.&amp;lt;/p&amp;gt;
    &amp;lt;p&amp;gt;&amp;lt;a href=&amp;quot;http://www.iana.org/domains/example&amp;quot;&amp;gt;More information...&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/div&amp;gt;


&amp;lt;/body&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å‹•ã„ãŸ!&lt;/p&gt;

&lt;h2 id=&#34;ãƒ•ã‚©ãƒ³ãƒˆè¿½åŠ &#34;&gt;ãƒ•ã‚©ãƒ³ãƒˆè¿½åŠ &lt;/h2&gt;

&lt;p&gt;å‰ç¯€ã§å‚è€ƒã«ã—ãŸ&lt;a href=&#34;http://qiita.com/dd511805/items/dfe03c5486bf1421875a&#34;&gt;Qiitaã®è¨˜äº‹&lt;/a&gt;ã«ã€æ–‡å­—åŒ–ã‘å¯¾ç­–ã¨ã—ã¦ãƒ•ã‚©ãƒ³ãƒˆã‚’è¿½åŠ ã™ã‚‹æ‰‹é †ã‚‚æ›¸ã„ã¦ã‚ã£ãŸã®ã§ãã‚Œã‚‚ã‚„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšè©¦ã—ã«ã€ä½•ã‚‚ã—ãªã„ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã£ã¦ã¿ã‚‹ã€‚
&lt;code&gt;--screenshot&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/ # chromium-browser --headless --no-sandbox --disable-gpu --screenshot https://www.google.co.jp/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã™ã‚‹ã¨ã‚„ã¯ã‚Šæ–‡å­—åŒ–ã‘ã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/webdriverio-chrome/garblings.png&#34; alt=&#34;garblings.png&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.google.com/get/noto/&#34;&gt;Google Noto Fonts&lt;/a&gt;ã‚’å…¥ã‚Œã¦å¯¾å¿œã™ã‚‹ã€‚
(å› ã¿ã«Notoã¯No Tofuã®ç•¥ã§ã€æ–‡å­—åŒ–ã‘ã—ãŸæ™‚ã«å‡ºã‚‹ã€ã‚¯ã‚¨ã‚¹ãƒãƒ§ãƒ³ãƒãƒ¼ã‚¯ãŒä¹—ã£ãŸè±†è…ã®æ’²æ»…ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚ŒãŸãƒ•ã‚©ãƒ³ãƒˆã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/ # apk add curl
/ # cd /tmp/
/tmp # curl https://noto-website.storage.googleapis.com/pkgs/NotoSansCJKjp-hinte
/tmp # unzip NotoSansCJKjp-hinted.zip
/tmp # mkdir -p /usr/share/fonts/noto
/tmp # cp *.otf /usr/share/fonts/noto
/tmp # chmod 644 -R /usr/share/fonts/noto/
/tmp # fc-cache -fv
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å¾ŒåŠã«å®Ÿè¡Œã—ã¦ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®è©³ç´°ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„ãŒã€æ–‡å­—åŒ–ã‘ã¯ç›´ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/webdriverio-chrome/garblings_fixed.png&#34; alt=&#34;garblings_fixed.png&#34; /&gt;
&lt;/p&gt;

&lt;h2 id=&#34;webdriverioã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;WebdriverIOã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;æ¬¡ã«WebdriverIOã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚
&lt;a href=&#34;https://yarnpkg.com/lang/en/&#34;&gt;Yarn&lt;/a&gt;ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦&lt;a href=&#34;https://nodejs.org/ja/&#34;&gt;Node.js&lt;/a&gt;ã§å‹•ã‹ã™ã®ã§ã€ã¾ãšãã‚Œã‚‰ã‚’apkã§å…¥ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/tmp # apk add nodejs yarn
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦WebdriverIOã‚’è¿½åŠ ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;/tmp # mkdir /root/webdriverio-chrome
/tmp # cd /root/webdriverio-chrome
~/webdriverio-chrome # yarn init
~/webdriverio-chrome # yarn add webdriverio --dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;package.jsonã®scriptsã‚’ç·¨é›†ã—ã¦ã€WebdriverIOä»˜å±ã®ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠã§ã‚ã‚‹WDIOã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;package.json:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;name&amp;quot;: &amp;quot;webdriverio-chrome&amp;quot;,
  &amp;quot;version&amp;quot;: &amp;quot;0.0.1&amp;quot;,
  &amp;quot;description&amp;quot;: &amp;quot;Browser test stack with WebdriverIO and headless Chrome&amp;quot;,
  &amp;quot;scripts&amp;quot;: {
    &amp;quot;test&amp;quot;: &amp;quot;wdio&amp;quot;
  },
  &amp;quot;author&amp;quot;: &amp;quot;Kaito Yamada&amp;quot;,
  &amp;quot;license&amp;quot;: &amp;quot;MIT&amp;quot;,
  &amp;quot;devDependencies&amp;quot;: {
    &amp;quot;webdriverio&amp;quot;: &amp;quot;^4.8.0&amp;quot;
  }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;wdioã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ&#34;&gt;WDIOã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;http://webdriver.io/guide/testrunner/gettingstarted.html&#34;&gt;WDIOã®configã‚³ãƒãƒ³ãƒ‰&lt;/a&gt;ã§WDIO Configuration Helperã‚’èµ·å‹•ã—ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«wdio.conf.jsã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«ç”Ÿæˆã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # yarn test -- config
yarn test v0.27.5
$ wdio &amp;quot;config&amp;quot;

=========================
WDIO Configuration Helper
=========================

? Where do you want to execute your tests? On my local machine
? Which framework do you want to use? jasmine
? Shall I install the framework adapter for you? No
? Where are your test specs located? ./test/specs/**/*.js
? Which reporter do you want to use?  spec - https://github.com/webdriverio/wdio-spec-reporter
? Shall I install the reporter library for you? No
? Do you want to add a service to your test setup?  selenium-standalone - https://github.com/webdriverio/wdio-selenium-standalone-service
? Shall I install the services for you? No
? Level of logging verbosity verbose
? In which directory should screenshots gets saved if a command fails? ./errorShots/
? What is the base url? http://localhost

Configuration file was created successfully!
To run your tests, execute:

$ wdio wdio.conf.js

Done in 53.58s.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;WDIO Configuration Helperã§ã€ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯&lt;a href=&#34;https://mochajs.org/&#34;&gt;Mocha&lt;/a&gt;ã‹&lt;a href=&#34;https://jasmine.github.io/&#34;&gt;Jasmine&lt;/a&gt;ã‹&lt;a href=&#34;https://cucumber.io/&#34;&gt;Cucumber&lt;/a&gt;ã‹ã‚‰&lt;a href=&#34;http://webdriver.io/guide/testrunner/frameworks.html&#34;&gt;é¸æŠã§ãã‚‹&lt;/a&gt;ã€‚
ServiceNowã®ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯(ATF)ãŒJasmineä½¿ã£ã¦ã‚‹ã®ã§ã€ä¸€å¿œãã‚Œã«åˆã‚ã›ã¦Jasmineã«ã—ãŸã€‚
ATFã¯ä»Šã®ã¨ã“ã‚ä½¿ã†ã¤ã‚‚ã‚Šã¯ãªã„ã‘ã©ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ¬ãƒãƒ¼ã‚¿(æ¨™æº–å‡ºåŠ›ã¸ãƒ†ã‚¹ãƒˆçµæœã‚’å‡ºåŠ›ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)ã¯å¦™ã«è‰²ã€…ã‚ã‚‹ä¸­ã‹ã‚‰ã€é›°å›²æ°—ã§&lt;a href=&#34;http://webdriver.io/guide/reporters/spec.html&#34;&gt;spec&lt;/a&gt;ã‚’é¸æŠã€‚&lt;/p&gt;

&lt;p&gt;ã‚µãƒ¼ãƒ“ã‚¹(ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã«å¿…è¦ãªæº–å‚™ãªã©ã‚’ã—ã¦ãã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)ã«ã¯&lt;a href=&#34;http://webdriver.io/guide/services/selenium-standalone.html&#34;&gt;selenium-standalone&lt;/a&gt;ã‚’é¸æŠã€‚
ã“ã„ã¤ã¯ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ã€npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®&lt;a href=&#34;https://www.npmjs.com/package/selenium-standalone&#34;&gt;selenium-standalone&lt;/a&gt;ã‚’ä½¿ã£ã¦&lt;a href=&#34;http://docs.seleniumhq.org/download/&#34;&gt;Selenium Server&lt;/a&gt;ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦èµ·å‹•ã—ãŸã‚Šã€WebDriverã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã‚ŒãŸã‚Šã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;å› ã¿ã«ã‚µãƒ¼ãƒ“ã‚¹ã«ã¯ä»–ã«ã€&lt;a href=&#34;http://webdriver.io/guide/services/browserstack.html&#34;&gt;browserstack&lt;/a&gt;ã¨ã‹&lt;a href=&#34;http://webdriver.io/guide/services/appium.html&#34;&gt;appium&lt;/a&gt;ã¨ã‹&lt;a href=&#34;http://webdriver.io/guide/services/phantomjs.html&#34;&gt;phantomjs&lt;/a&gt;ã¨ã‹ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Shall I install â€¦&lt;/code&gt;ã¨ã„ã†è³ªå•ã«ã¯å…¨ã¦noã§å›ç­”ã—ãŸã€‚
ã§ãªã„ã¨WDIOãŒnpm installã—ã‚ˆã†ã¨ã—ã¦ã€npmãŒç„¡ãã¦ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ã€‚
(apkã§ã¯ã€npmã¯&lt;a href=&#34;https://pkgs.alpinelinux.org/package/edge/main/x86_64/nodejs&#34;&gt;nodejs&lt;/a&gt;ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å…¥ã£ã¦ãªãã¦ã€&lt;a href=&#34;https://pkgs.alpinelinux.org/package/edge/main/x86_64/nodejs-npm&#34;&gt;nodejs-npm&lt;/a&gt;ã«å…¥ã£ã¦ã‚‹ã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Installing wdio packages:
/root/webdriverio-chrome/node_modules/webdriverio/build/lib/cli.js:278
                    throw err;
                    ^

Error: Command failed: npm i -D wdio-jasmine-framework
/bin/sh: npm: not found

    at ChildProcess.exithandler (child_process.js:204:12)
    at emitTwo (events.js:106:13)
    at ChildProcess.emit (events.js:191:7)
    at maybeClose (internal/child_process.js:891:16)
    at Socket.&amp;lt;anonymous&amp;gt; (internal/child_process.js:342:11)
    at emitOne (events.js:96:13)
    at Socket.emit (events.js:188:7)
    at Pipe._handle.close [as _onclose] (net.js:497:12)
error Command failed with exit code 1.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ç”Ÿæˆã•ã‚ŒãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®æ„Ÿã˜ã€‚(ã‚³ãƒ¡ãƒ³ãƒˆã¯çœç•¥ã—ã¦ã‚‹ã€‚)&lt;/p&gt;

&lt;p&gt;wdio.conf.js:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;exports.config = {
    specs: [
        &#39;./test/specs/**/*.js&#39;
    ],
    exclude: [
        // &#39;path/to/excluded/files&#39;
    ],
    maxInstances: 10,
    capabilities: [{
        maxInstances: 5,
        browserName: &#39;firefox&#39;,
    }],

    sync: true,
    logLevel: &#39;verbose&#39;,
    coloredLogs: true,
    bail: 0,
    screenshotPath: &#39;./errorShots/&#39;,
    baseUrl: &#39;http://localhost&#39;,
    waitforTimeout: 10000,
    connectionRetryTimeout: 90000,
    connectionRetryCount: 3,

    services: [&#39;selenium-standalone&#39;],

    framework: &#39;jasmine&#39;,
    reporters: [&#39;spec&#39;],
    jasmineNodeOpts: {
        defaultTimeoutInterval: 50000,
        expectationResultHandler: function(passed, assertion) {
            // do something
        }
    },
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;h2 id=&#34;npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨javaè¿½åŠ &#34;&gt;npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨Javaè¿½åŠ &lt;/h2&gt;

&lt;p&gt;WDIO Configuration Helperã®&lt;code&gt;Shall I install â€¦&lt;/code&gt;ã§noã—ãŸåˆ†ã¯è‡ªåˆ†ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # yarn add wdio-jasmine-framework wdio-spec-reporter wdio-selenium-standalone-service selenium-standalone --dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;error /root/webdriverio-chrome/node_modules/fibers: Command failed.
Exit code: 127
Command: sh
Arguments: -c node build.js || nodejs build.js
Directory: /root/webdriverio-chrome/node_modules/fibers
Output:
`linux-x64-48` exists; testing
Problem with the binary; manual build incoming
node-gyp not found! Please ensure node-gyp is in your PATH--
Try running: `sudo npm install -g node-gyp`
sh: nodejs: not found
spawn node-gyp ENOENT
info Visit https://yarnpkg.com/en/docs/cli/add for documentation about this command.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/nodejs/node-gyp&#34;&gt;node-gyp&lt;/a&gt;ãŒç„¡ã„ã¨ã€‚
ã§ã¯è¿½åŠ ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # yarn global add node-gyp
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;node-gypã®README.mdèª­ã‚€ã¨ã€Pythonã¨makeã¨C/C++ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè¦ã‚‹ã¨ã‚ã‚‹ã®ã§ã€ãã‚Œã‚‚å…¥ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # apk add python make gcc g++
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã§ã€å†åº¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # yarn add wdio-jasmine-framework wdio-spec-reporter wdio-selenium-standalone-service selenium-standalone --dev
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã—ãŸã‚‰å…¥ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚ã¨ã€Selenium ServerãŒJavaã§å‹•ãã®ã§ã€Javaã‚‚å…¥ã‚Œã¦ãŠãã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # apk add openjdk8
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;wdio-conf-jsã®ä¿®æ­£&#34;&gt;wdio.conf.jsã®ä¿®æ­£&lt;/h2&gt;

&lt;p&gt;ç”Ÿæˆã•ã‚ŒãŸwdio.conf.jsã¯Firefoxã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ãªã©ã®å•é¡ŒãŒã‚ã‚‹ã®ã§ä¿®æ­£ã™ã‚‹ã€‚
å‚è€ƒã«ã—ãŸã®ã¯&lt;a href=&#34;https://stackoverflow.com/questions/42303119/selenium-webdriverio-chrome-headless&#34;&gt;Stack Overflowã®å›ç­”&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;     capabilities: [{
     maxInstances: 5,
-        browserName: &#39;firefox&#39;
+        browserName: &#39;chrome&#39;,
+        chromeOptions: {
+            binary: &#39;/usr/bin/chromium-browser&#39;,
+            args: [
+                &#39;headless&#39;,
+                &#39;disable-gpu&#39;,
+                &#39;no-sandbox&#39;,
+            ],
+        },
     }],
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;browserName&lt;/code&gt;ã‚’&lt;code&gt;firefox&lt;/code&gt;ã‹ã‚‰&lt;code&gt;chrome&lt;/code&gt;ã«å¤‰ãˆã¦ã€ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§å‹•ã‹ã™ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚
ã¾ãŸã€æ™®é€šã®Chromeã¨ã¯å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ãŒé•ã†ã®ã§ã€&lt;code&gt;binary&lt;/code&gt;ã§æŒ‡å®šã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;h2 id=&#34;ãƒ†ã‚¹ãƒˆä½œæˆã¨å®Ÿè¡Œ&#34;&gt;ãƒ†ã‚¹ãƒˆä½œæˆã¨å®Ÿè¡Œ&lt;/h2&gt;

&lt;p&gt;ãƒ†ã‚¹ãƒˆã¯ã¨ã‚Šã‚ãˆãš&lt;a href=&#34;http://blog.asial.co.jp/1484&#34;&gt;ã“ã®è¨˜äº‹&lt;/a&gt;ã‚’å‚è€ƒã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ã‚’æ›¸ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;test-sample.js:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;describe(&#39;Sample&#39;, function() {
    it(&amp;quot;takes a screenshot of www.google.co.jp&amp;quot;, function() {
        browser.url(&#39;https://www.google.co.jp/&#39;);
        browser.saveScreenshot(&#39;./screenshots/google.png&#39;);
    });
});
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€&lt;code&gt;https://www.google.co.jp/&lt;/code&gt;ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã‚’&lt;code&gt;~/webdriverio-chrome/test/specs/&lt;/code&gt;ã«ãŠã„ã¦ã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # yarn test
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã€‚
ã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # yarn test
yarn test v0.27.5
$ wdio
[06:43:04]  COMMAND     POST     &amp;quot;/wd/hub/session&amp;quot;
[06:43:04]  DATA                {&amp;quot;desiredCapabilities&amp;quot;:{&amp;quot;javascriptEnabled&amp;quot;:true,&amp;quot;locationContextEnabled&amp;quot;:true,&amp;quot;handlesAlerts&amp;quot;:true,&amp;quot;rotatable&amp;quot;:true,&amp;quot;maxInstances&amp;quot;:5,&amp;quot;browserName&amp;quot;:&amp;quot;chrome&amp;quot;,&amp;quot;chromeOptions&amp;quot;:{&amp;quot;binary&amp;quot;:&amp;quot;/usr/bin/chromium-browser&amp;quot;,&amp;quot;args&amp;quot;:[&amp;quot;headless&amp;quot;,&amp;quot;disable-gpu&amp;quot;,&amp;quot;no-sandbox&amp;quot;]},&amp;quot;loggingPrefs&amp;quot;:{&amp;quot;browser&amp;quot;:&amp;quot;ALL&amp;quot;,&amp;quot;driver&amp;quot;:&amp;quot;ALL&amp;quot;},&amp;quot;requestOrigins&amp;quot;:{&amp;quot;url&amp;quot;:&amp;quot;http://webdriver.io&amp;quot;,&amp;quot;version&amp;quot;:&amp;quot;4.6.2&amp;quot;,&amp;quot;name&amp;quot;:&amp;quot;webdriverio&amp;quot;}}}
ERROR: An unknown server-side error occurred while processing the command. (UnknownError:13)
chrome
Error: An unknown server-side error occurred while processing the command. (UnknownError:13)

error Command failed with exit code 1.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰ã§ã‚ˆãã‚ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸã¨ã®ã“ã¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;è©¦ã—ã«æ‰‹å‹•ã§Selenium Serverã‚’èµ·å‹•ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # node ./node_modules/.bin/selenium-standalone start
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ­£å¸¸ã«èµ·å‹•ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ChromeDriverã¯ã©ã†ã‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # /usr/bin/chromedriver
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚‚èµ·å‹•ã™ã‚‹ã€‚ã¯ã¦ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/webdriverio/wdio-selenium-standalone-service/blob/v0.0.9/lib/launcher.js&#34;&gt;wdio-selenium-standalone-serviceã®ã‚½ãƒ¼ã‚¹&lt;/a&gt;ã‚’è¦‹ã¦ã¿ãŸã‚‰ã€selenium-standaloneã®&lt;code&gt;install&lt;/code&gt;ã‚’å‘¼ã‚“ã§ã„ãŸã€‚
ã“ã‚Œã¯Selenium Serverã¨ChromeDriverã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ©Ÿèƒ½ã ã€‚
ã‚³ãƒ³ãƒ†ãƒŠå†…ã‚’ç¢ºèªã—ãŸã‚‰ã€&lt;code&gt;node_modules/selenium-standalone/.selenium/chromedrive
r/2.31-x64-chromedriver&lt;/code&gt;ã¨ã„ã†ã®ãŒå‡ºæ¥ã¦ãŸã€‚
ã“ã‚ŒãŒselenium-standaloneãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸChromeDriverã ã‚ã†ãŒã€Apline Linuxç”¨ã§ã¯ãªã„ã®ã§ã€&lt;code&gt;ldd&lt;/code&gt;ã—ã¦ã‚„ã‚‹ã¨ãŸãã•ã‚“ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚
selenium-standaloneãŒã“ã‚Œã‚’å®Ÿè¡Œã—ã‚ˆã†ã¨ã—ãŸã›ã„ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã‚“ã ã‚ã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://medium.com/@jlchereau/how-to-configure-webdrivier-io-with-selenium-standalone-and-additional-browsers-9369d38bc4d1&#34;&gt;Mediumã®è¨˜äº‹&lt;/a&gt;ãªã©ã‚’å‚è€ƒã«ã—ã¦ã€wdio.conf.jsã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¦ã€ChromeDriverã®ãƒã‚¤ãƒŠãƒªã‚’æŒ‡å®šã—ã¦ã‚„ã£ãŸã‚‰å‹•ã„ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;     services: [&#39;selenium-standalone&#39;],
+    seleniumArgs: {
+        javaArgs: [
+            &#39;-Dwebdriver.chrome.driver=/usr/bin/chromedriver&#39;
+        ]
+    },
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ãƒ—ãƒ­ã‚­ã‚·å¯¾ç­–&#34;&gt;ãƒ—ãƒ­ã‚­ã‚·å¯¾ç­–&lt;/h2&gt;

&lt;p&gt;ç¤¾å†…ã§ä½¿ã†ã«ã¯ã€ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼ä»˜ãã®ãƒ—ãƒ­ã‚­ã‚·ã‚’çªç ´ã—ãªã„ã¨ã„ã‘ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ä»Šå›ä½œã£ãŸç’°å¢ƒã‚’ã‚¯ãƒ¼ãƒ«ãªå›³ã«ã™ã‚‹ã¨ã“ã‚“ãªâ†“æ„Ÿã˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/webdriverio-chrome/internet_accesses.png&#34; alt=&#34;internet_accesses.png&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãªã®ã§ã€äºŒã‹æ‰€ã‚ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒ„ã‚¢ã‚¯ã‚»ã‚¹ã‚’ãƒ—ãƒ­ã‚­ã‚·å¯¾å¿œã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
å›³ã®å·¦ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã¤ã„ã¦ã¯ã€&lt;a href=&#34;https://github.com/webdriverio/wdio-selenium-standalone-service/blob/master/lib/launcher.js&#34;&gt;wdio-selenium-standalone-serviceã®ã‚½ãƒ¼ã‚¹&lt;/a&gt;ã‚’è¦‹ãŸã‚Šã—ã¦ã€wdio.conf.jsã‚’æ¬¡ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚Œã°ã„ã„ã“ã¨ãŒåˆ†ã‹ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;     services: [&#39;selenium-standalone&#39;],
     seleniumArgs: {
         javaArgs: [
             &#39;-Dwebdriver.chrome.driver=/usr/bin/chromedriver&#39;,
         ],
     },
+    seleniumInstallArgs: {
+        proxy: &#39;http://userId:password@proxy.com:8080&#39;,
+    },
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å›³ã®å³ã®ã‚¢ã‚¯ã‚»ã‚¹ã«ã¤ã„ã¦ã¯ã€ãƒ—ãƒ­ã‚­ã‚·ã®ãƒ™ãƒ¼ã‚·ãƒƒã‚¯èªè¨¼ã®ã‚¯ãƒ¬ãƒ‡ãƒ³ã‚·ãƒ£ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒChromeã«ãªã„ã®ã§ã€&lt;a href=&#34;https://github.com/sjitech/proxy-login-automator&#34;&gt;proxy-login-automator&lt;/a&gt;ã‚’ä½¿ã†ã“ã¨ã«ã—ã¦ã€wdio.conf.jsã«ã¯æ¬¡ã®ã‚ˆã†ã«è¿½è¨˜ã—ã¦ãŠãã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;         chromeOptions: {
             binary: &#39;/usr/bin/chromium-browser&#39;,
             args: [
                 &#39;headless&#39;,
                 &#39;disable-gpu&#39;,
                 &#39;no-sandbox&#39;,
+                &#39;proxy-server=localhost:18080&#39;,
             ],
         },
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå‰ã«ã€ä»¥ä¸‹ã¿ãŸã„ã«proxy-login-automatorã‚’èµ·å‹•ã—ã¦ãŠã‘ã°ã„ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;~/webdriverio-chrome # node node_modules/.bin/proxy-login-automator.js -local_port 18080 -remote_host proxy.com -remote_port 8080 -usr userId -pwd password`
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã¾ã¨ã‚&#34;&gt;ã¾ã¨ã‚&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸Šã®æ“ä½œã‚’ã¾ã¨ã‚ãŸDockerfileãŒä»¥ä¸‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-dockerfile&#34;&gt;From alpine:edge

ADD package.json wdio.conf.js yarn.lock test-sample.js /root/webdriverio-chrome/

RUN apk add --update --no-cache \
            udev \
            ttf-freefont \
            chromium \
            chromium-chromedriver \
            openjdk8 \
            nodejs \
            yarn \
            make gcc g++ python \
            curl &amp;amp;&amp;amp; \
    cd /tmp &amp;amp;&amp;amp; \
    curl https://noto-website.storage.googleapis.com/pkgs/NotoSansCJKjp-hinted.zip -O &amp;amp;&amp;amp; \
    unzip NotoSansCJKjp-hinted.zip &amp;amp;&amp;amp; \
    mkdir -p /usr/share/fonts/noto &amp;amp;&amp;amp; \
    cp *.otf /usr/share/fonts/noto &amp;amp;&amp;amp; \
    chmod 644 -R /usr/share/fonts/noto/ &amp;amp;&amp;amp; \
    fc-cache -fv &amp;amp;&amp;amp; \
    cd /root/webdriverio-chrome/ &amp;amp;&amp;amp; \
    yarn global add node-gyp &amp;amp;&amp;amp; \
    yarn &amp;amp;&amp;amp; \
    mkdir -p test/specs &amp;amp;&amp;amp; \
    mv test-sample.js test/specs/ &amp;amp;&amp;amp; \
    mkdir screenshots &amp;amp;&amp;amp; \
    yarn global remove node-gyp &amp;amp;&amp;amp; \
    rm -rf /root/.node-gyp &amp;amp;&amp;amp; \
    rm -rf /tmp/* &amp;amp;&amp;amp; \
    yarn cache clean &amp;amp;&amp;amp; \
    apk del --purge make gcc g++ python curl

WORKDIR /root/webdriverio-chrome
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ãã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å°ã•ãã™ã‚‹ãŸã‚ã€ãƒ¬ã‚¤ãƒ¤ã‚’æ¸›ã‚‰ã—ãŸã‚Šã€ãƒ“ãƒ«ãƒ‰ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¶ˆã—ãŸã‚Šã—ã¦ã‚‹ã€‚
&lt;a href=&#34;http://qiita.com/minamijoyo/items/711704e85b45ff5d6405&#34;&gt;Multi-Stage build&lt;/a&gt;ãŒ&lt;a href=&#34;https://hub.docker.com/&#34;&gt;Docker Hub&lt;/a&gt;ã®Automated Buildã§&lt;a href=&#34;https://github.com/docker/hub-feedback/issues/1039&#34;&gt;ã‚‚ã†ã™ãã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹&lt;/a&gt;ã®ã§ã€ãã—ãŸã‚‰ã‚‚ã†å°‘ã—ãã‚Œã„ã«æ›¸ãç›´ã›ã‚‹ã¯ãšã€‚&lt;/p&gt;

&lt;p&gt;(å¾Œæ—¥æ›¸ãç›´ã—ã¦&lt;a href=&#34;https://github.com/kaitoy/webdriverio-chrome/blob/master/Dockerfile&#34;&gt;ãã‚Œã„ã«ãªã£ãŸ&lt;/a&gt;ã€‚)&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;æœ€çµ‚çš„ãªpackage.jsonã¯&lt;a href=&#34;https://github.com/kaitoy/webdriverio-chrome/blob/v0.0.3/package.json&#34;&gt;ã“ã‚Œ&lt;/a&gt;ã€‚
wdio.conf.jsã¯&lt;a href=&#34;https://github.com/kaitoy/webdriverio-chrome/blob/v0.0.3/wdio.conf.js&#34;&gt;ã“ã‚Œ&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Pcap4J on Nano Server on Hyper-V Containers on Windows 10 on VMware Playerã«ãƒˆãƒ©ã‚¤</title>
          <link>https://www.kaitoy.xyz/2016/09/15/pcap4j-on-hyper-v-container-on-win10/</link>
          <pubDate>Thu, 15 Sep 2016 13:56:35 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2016/09/15/pcap4j-on-hyper-v-container-on-win10/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://github.com/kaitoy/pcap4j&#34;&gt;Pcap4J&lt;/a&gt;ãŒå‹•ãHyper-Vã‚³ãƒ³ãƒ†ãƒŠã‚’Windows 10ä¸Šã§ãƒ“ãƒ«ãƒ‰ã—ã‚ˆã†ã¨ã—ãŸã‘ã©3åˆç›®ã‚ãŸã‚Šã§æ¯çµ¶ãˆãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;hyper-v-containersã¨ã¯&#34;&gt;Hyper-V Containersã¨ã¯&lt;/h2&gt;

&lt;p&gt;Hyper-V Containersã¯ã€Microsoftã«ã‚ˆã‚‹Windowsãƒã‚¤ãƒ†ã‚£ãƒ–ãªã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“ã§ã‚ã‚‹&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/about/about_overview&#34;&gt;Windows Containers&lt;/a&gt;ã®ä¸€ç¨®ã§ã€ã“ã‚Œã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¯ã€åŒã˜ãWindows Containersã®ä¸€ç¨®ã§ã‚ã‚‹Windows Server Containersã®ã‚‚ã®ã«æ¯”ã¹ã¦ã€ã‚ˆã‚Šå³å¯†ã«éš”é›¢ã•ã‚Œã¦ã„ã‚‹åˆ†ã€èµ·å‹•ã‚³ã‚¹ãƒˆãŒé«˜ã„ã€‚&lt;/p&gt;

&lt;p&gt;å®Ÿä½“ã¯&lt;a href=&#34;https://www.docker.com/&#34;&gt;Docker&lt;/a&gt;ãã®ã‚‚ã®ã§ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯&lt;a href=&#34;https://hub.docker.com/&#34;&gt;Docker Hub&lt;/a&gt;ã‹ã‚‰pullã§ãã‚‹ã—ã€ã‚³ãƒ³ãƒ†ãƒŠã®æ“ä½œã‚„ç®¡ç†ã¯dockerã‚³ãƒãƒ³ãƒ‰ã§ã‚„ã‚‹ã€‚(æ˜”ã¯ã‚³ãƒ³ãƒ†ãƒŠæ“ä½œç”¨PowerShellã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚‚ã‚ã£ãŸãŒã€ä¸è©•ã ã£ãŸã®ã§å»ƒæ­¢ã—ãŸã‚ˆã†ã ã€‚)
&lt;a href=&#34;https://github.com/docker/docker&#34;&gt;ã‚½ãƒ¼ã‚¹&lt;/a&gt;ã‚‚Linuxã¨Windowsã§ä¸€æœ¬åŒ–ã•ã‚Œã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Windows 10ã®&lt;a href=&#34;https://blogs.windows.com/japan/2016/08/03/how-to-get-the-windows-10-anniversary-update/#eFCYhK68sDp1V0F7.97&#34;&gt;Anniversary Update&lt;/a&gt;ã§æ­£å¼ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸãŒã€ãªã‚“ã ã‹ã‚ã¾ã‚Šæ³¨ç›®ã•ã‚Œã¦ã„ãªã„æ°—ãŒã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://www.kaitoy.xyz/2016/07/31/docker-for-windows/#docker-for-windows%E3%81%A8%E3%81%AF&#34;&gt;Docker for Windows&lt;/a&gt;ã¨ã¯å…¨ãåˆ¥ç‰©ãªã®ã§æ³¨æ„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;hyper-v-containersã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«-on-vmware-player&#34;&gt;Hyper-V Containersã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (on VMware Player)&lt;/h2&gt;

&lt;p&gt;è‡ªå‰ã®PCãŒ5å¹´å‰ã«è²·ã£ãŸ&lt;a href=&#34;https://dynabook.com/&#34;&gt;dynabook&lt;/a&gt;ã§Windows 10ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã®ã§ã€VMware Playerã®VMä¸Šã®Windows 10ã«Hyper-V Containersã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;VMã¯ã€Windows 7ã«å…¥ã‚ŒãŸVMware Workstation 11.1.0 build-2496824ã«ä»˜å±ã® VMware Player 7.1.0 build-2496824ã§ä½œã£ãŸã‚‚ã®ã€‚
VMã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯11.0ã€‚
2CPUã§ãƒ¡ãƒ¢ãƒªã¯2.5GBã€‚
ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯NATã€‚
ã“ã®VMã‚’ã€&lt;a href=&#34;https://www.kaitoy.xyz/2016/07/31/docker-for-windows/#vmware-player%E3%81%AEvm%E3%81%A7hyper-v%E3%82%92%E4%BD%BF%E3%81%86%E3%81%9F%E3%82%81%E3%81%AE%E8%A8%AD%E5%AE%9A&#34;&gt;Hyper-VãŒä½¿ãˆã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠã&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://ascii.jp/elem/000/001/216/1216220/&#34;&gt;ã“ã®è¨˜äº‹&lt;/a&gt;ã«ã—ãŸãŒã„ã€Windows 10ã®è©•ä¾¡ç‰ˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚
ä»Šå…¬é–‹ã•ã‚Œã¦ã„ã‚‹è©•ä¾¡ç‰ˆã¯Anniversary Updateé©ç”¨æ¸ˆã¿ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³1607ã§ã€Hyper-V Containersã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã‚’ã•ã£ãä½œã£ãŸVMã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;p&gt;Windows 10ã‚’èµ·å‹•ã—ã€ä»¥ä¸‹ã€&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/quick_start/quick_start_windows_10&#34;&gt;Windows Containers on Windows 10&lt;/a&gt;ã«å¾“ã£ã¦é€²ã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;containersæ©Ÿèƒ½æœ‰åŠ¹åŒ–&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.thewindowsclub.com/how-to-open-an-elevated-powershell-prompt-in-windows-10&#34;&gt;PowerShellãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç®¡ç†è€…æ¨©é™ã§ã²ã‚‰ã&lt;/a&gt;ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§&lt;code&gt;containers&lt;/code&gt;æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;Enable-WindowsOptionalFeature -Online -FeatureName containers -All
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1åˆ†ç¨‹åº¦çµŒã¤ã¨å†èµ·å‹•ã‚’ä¿ƒã•ã‚Œã‚‹ã®ã§å†èµ·å‹•ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Hyper-Væ©Ÿèƒ½æœ‰åŠ¹åŒ–&lt;/p&gt;

&lt;p&gt;å†åº¦PowerShellãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç®¡ç†è€…æ¨©é™ã§é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Hyper-Vã‚’æœ‰åŠ¹åŒ–ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V -All
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;1åˆ†ç¨‹åº¦çµŒã¤ã¨å†èµ·å‹•ã‚’ä¿ƒã•ã‚Œã‚‹ã®ã§å†èµ·å‹•ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;OpLocksç„¡åŠ¹åŒ–&lt;/p&gt;

&lt;p&gt;ç¾åœ¨ã®Hyper-Vã‚³ãƒ³ãƒ†ãƒŠã¯ã€å®‰å®šæ€§ã‚’ä¸Šã’ã‚‹ãŸã‚ã«OpLocksã¨ã„ã†æ©Ÿèƒ½ã‚’ç„¡åŠ¹ã«ã™ã¹ãã‚‰ã—ã„ã€‚
å†åº¦PowerShellãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç®¡ç†è€…æ¨©é™ã§é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;Set-ItemProperty -Path &#39;HKLM:SOFTWARE\Microsoft\Windows NT\CurrentVersion\Virtualization\Containers&#39; -Name VSmbDisableOplocks -Type DWord -Value 1 -Force
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;

&lt;p&gt;åŒã˜PowerShellãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦Docker(Engineã¨Client)ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;Invoke-WebRequest &amp;quot;https://master.dockerproject.org/windows/amd64/docker-1.13.0-dev.zip&amp;quot; -OutFile &amp;quot;$env:TEMP\docker-1.13.0-dev.zip&amp;quot; -UseBasicParsing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’è§£å‡ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;Expand-Archive -Path &amp;quot;$env:TEMP\docker-1.13.0-dev.zip&amp;quot; -DestinationPath $env:ProgramFiles
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã“ã¾ã§ã§DockerãŒ&lt;code&gt;C:\Program Files\docker\&lt;/code&gt;ã«å…¥ã‚‹ã®ã§ã€ã“ã®ãƒ‘ã‚¹ã‚’ç’°å¢ƒå¤‰æ•°&lt;code&gt;PATH&lt;/code&gt;ã«è¿½åŠ ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;PATH&lt;/code&gt;ã®å¤‰æ›´ã‚’åæ˜ ã•ã›ã‚‹ãŸã‚ã«å†åº¦PowerShellãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç®¡ç†è€…æ¨©é™ã§é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã«ç™»éŒ²ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;dockerd --register-service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Dockerã‚µãƒ¼ãƒ“ã‚¹ã‚’èµ·å‹•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;Start-Service Docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(Dockerã‚µãƒ¼ãƒ“ã‚¹ã¯è‡ªå‹•èµ·å‹•ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€OSå†èµ·å‹•æ™‚ã¯ä¸Šè¨˜&lt;code&gt;Start-Service&lt;/code&gt;ã¯ä¸è¦ã€‚)&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§DockerãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;docker version
Client:
 Version:      1.13.0-dev
 API version:  1.25
 Go version:   go1.7.1
 Git commit:   130db0a
 Built:        Sat Sep 10 13:25:48 2016
 OS/Arch:      windows/amd64


Server:
 Version:      1.13.0-dev
 API version:  1.25
 Go version:   go1.7.1
 Git commit:   130db0a
 Built:        Sat Sep 10 13:25:48 2016
 OS/Arch:      windows/amd64
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰&lt;/p&gt;

&lt;p&gt;ã©ã†ã‚‚Dockerã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã«ã¯ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ãªã‚ˆã†ãªã®ã§ã€ã“ã®ã¾ã¾ç®¡ç†è€…æ¨©é™ã®PowerShellãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ç¶šã‘ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;docker pull&lt;/code&gt;ã§Nano Serverã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;docker pull microsoft/nanoserver
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;docker images&lt;/code&gt;ã§ç¢ºèªã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Windows\system32&amp;gt;docker images
REPOSITORY             TAG                 IMAGE ID            CREATED             SIZE
microsoft/nanoserver   latest              3a703c6e97a2        12 weeks ago        970 MB
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;è©¦ã—ã«ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;PS C:\Windows\system32&amp;gt;docker run -it microsoft/nanoserver cmd&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;èµ·å‹•ã¯ã‹ãªã‚Šé…ã„ã€‚1åˆ†è¿‘ãã‹ã‹ã£ãŸã€‚ã¨ã‚‚ã‚ã‚Œã¡ã‚ƒã‚“ã¨èµ·å‹•ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/pcap4j-on-hyper-v-container-on-win10/test_container.png&#34; alt=&#34;test_container.png&#34; /&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;pcap4jã‚³ãƒ³ãƒ†ãƒŠã®ãƒ“ãƒ«ãƒ‰&#34;&gt;Pcap4Jã‚³ãƒ³ãƒ†ãƒŠã®ãƒ“ãƒ«ãƒ‰&lt;/h2&gt;

&lt;p&gt;Pcap4Jã‚³ãƒ³ãƒ†ãƒŠã‚’ã€&lt;code&gt;docker build&lt;/code&gt;ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹ã€‚
Dockerfileã¯ã¨ã‚Šã‚ãˆãš&lt;a href=&#34;https://www.kaitoy.xyz/2016/07/11/windows_containers_on_tp5/#pcap4j%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89&#34;&gt;ä»¥å‰ã®ã‚‚ã®&lt;/a&gt;ã‚’ã¡ã‚‡ã£ã¨æ›¸ãå¤‰ãˆãŸã ã‘ã®ã‚‚ã®ã‚’è©¦ã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-dockerfile&#34;&gt;# escape=`

#
# Dockerfile for Pcap4J on Windows Nano Server
#

FROM microsoft/nanoserver
MAINTAINER Kaito Yamada &amp;lt;kaitoy@pcap4j.org&amp;gt;

# Install Chocolatey.
RUN mkdir C:\pcap4j
WORKDIR C:\\pcap4j
ADD https://chocolatey.org/install.ps1 install.ps1
RUN powershell .\install.ps1

# Install dependencies.
RUN choco install -y nmap jdk7 &amp;amp;&amp;amp; `
    choco install -y maven -version 3.2.5

# Build Pcap4J.
RUN powershell -Command Invoke-WebRequest https://github.com/kaitoy/pcap4j/archive/v1.zip -OutFile pcap4j.zip &amp;amp;&amp;amp; `
    powershell -Command Expand-Archive -Path pcap4j.zip -DestinationPath .
WORKDIR pcap4j-1
RUN powershell -Command &amp;quot;mvn -P distribution-assembly install 2&amp;gt;&amp;amp;1 | Add-Content -Path build.log -PassThru&amp;quot;

# Collect libraries.
RUN mkdir bin &amp;amp;&amp;amp; `
    cd pcap4j-packetfactory-static &amp;amp;&amp;amp; `
    mvn -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeScope=compile dependency:copy-dependencies &amp;amp;&amp;amp; `
    mvn -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeGroupIds=ch.qos.logback dependency:copy-dependencies &amp;amp;&amp;amp; `
    cd ../pcap4j-distribution &amp;amp;&amp;amp; `
    mvn -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeArtifactIds=pcap4j-packetfactory-static,pcap4j-sample dependency:copy-dependencies

# Generate sample script. (C:\pcap4j\pcap4j-1\bin\capture.bat)
RUN echo @echo off &amp;gt; bin\capture.bat &amp;amp;&amp;amp; `
    echo &amp;quot;%JAVA_HOME%\bin\java&amp;quot; -cp C:\pcap4j\pcap4j-1\bin\pcap4j-core.jar;C:\pcap4j\pcap4j-1\bin\pcap4j-packetfactory-static.jar;C:\pcap4j\pcap4j-1\bin\pcap4j-sample.jar;C:\pcap4j\pcap4j-1\bin\jna.jar;C:\pcap4j\pcap4j-1\bin\slf4j-api.jar;C:\pcap4j\pcap4j-1\bin\logback-classic.jar;C:\pcap4j\pcap4j-1\bin\logback-core.jar org.pcap4j.sample.GetNextPacketEx &amp;gt;&amp;gt; bin\capture.bat
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/engine/reference/builder/#/escape&#34;&gt;escapeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–&lt;/a&gt;ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ãŸã®ã§ä½¿ã†ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚
(ã¨ã„ã†ã‹ä»¥å‰Windows Server 2016 TP5ã§è©¦ã—ãŸæ™‚ã¯escapeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’Dockerfileã®å…ˆé ­ã«æ›¸ã‹ãªã‹ã£ãŸã®ãŒã ã‚ã ã£ãŸã£ã¦ã ã‘ã‹ã‚‚ã—ã‚Œãªã„ã€‚)
&lt;code&gt;WORKDIR&lt;/code&gt;ã®ãƒ‘ã‚¹ã®åŒºåˆ‡ã‚Šã«ã¯escapeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã¯åˆ©ã‹ãªã„å¤‰ãªä»•æ§˜ã€‚&lt;/p&gt;

&lt;h4 id=&#34;nano-serverã§system-net-webclientä½¿ãˆãªã„å•é¡Œ&#34;&gt;Nano Serverã§System.Net.WebClientä½¿ãˆãªã„å•é¡Œ&lt;/h4&gt;

&lt;p&gt;ã“ã®Dockerfileã§ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‰ã€&lt;a href=&#34;https://chocolatey.org/&#34;&gt;Chocolatey&lt;/a&gt;ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹&lt;code&gt;RUN powershell .\install.ps1&lt;/code&gt;ã®ã‚¹ãƒ†ãƒƒãƒ—ã§&lt;code&gt;System.Net.WebClient&lt;/code&gt;ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;new-object : Cannot find type [System.Net.WebClient]: verify that the assembly
containing this type is loaded.
At C:\pcap4j\install.ps1:84 char:17
+   $downloader = new-object System.Net.WebClient
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidType: (:) [New-Object], PSArgumentExcepti
   on
    + FullyQualifiedErrorId : TypeNotFound,Microsoft.PowerShell.Commands.NewOb
   jectCommand
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Nano Serverã«å…¥ã£ã¦ã„ã‚‹PowerShellã¯&lt;a href=&#34;https://technet.microsoft.com/en-us/windows-server-docs/compute/nano-server/powershell-on-nano-server&#34;&gt;Core Editionãªã‚‹æ©Ÿèƒ½é™å®šç‰ˆ&lt;/a&gt;ã§ã€System.Net.WebClientã ã‘ã§ãªãã€&lt;a href=&#34;http://serverfault.com/questions/788949/download-a-file-with-powershell-on-nano-server&#34;&gt;Webã‚¢ã‚¯ã‚»ã‚¹ã®ãŸã‚ã®APIãŒã„ã‚ã„ã‚æ¬ ã‘ã¦ã„ã‚‹ã‚‚ã‚ˆã†&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&#34;hyper-v-containersã§server-coreä½¿ãˆãªã„å•é¡Œ&#34;&gt;Hyper-V Containersã§Server Coreä½¿ãˆãªã„å•é¡Œ&lt;/h4&gt;

&lt;p&gt;Nano Serverã‚ã‚“ã©ãã•ãã†ãªã®ã§ã€Server Coreã‚’pullã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PS C:\Windows\system32&amp;gt;docker pull microsoft/windowsservercore
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Dockerfileã®&lt;code&gt;FROM&lt;/code&gt;ã‚’&lt;code&gt;microsoft/windowsservercore&lt;/code&gt;ã«æ›¸ãå¤‰ãˆã¦ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‰ã€æœ€åˆã®&lt;code&gt;RUN&lt;/code&gt;ã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;container 4bc8d8d38993426fa7a3c76e4aabbe6a229cbd025754723ff396aec04ffbfa1d encountered an error during Start failed in Win32: The operating system of the container does not match the operating system of the host. (0xc0370101)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;èª¿ã¹ãŸã‚‰ã€Hyper-V Containersã¯ã¾ã &lt;a href=&#34;https://social.msdn.microsoft.com/Forums/en-US/9eea93ac-18de-4953-bc7c-efd76a155526/are-microsoftwindowsservercore-containers-working-on-windows-10?forum=windowscontainers&#34;&gt;Nano Serverã—ã‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„&lt;/a&gt;ã‚ˆã†ã ã€‚&lt;/p&gt;

&lt;h4 id=&#34;unzipé›£ã—ã„å•é¡Œ&#34;&gt;unzipé›£ã—ã„å•é¡Œ&lt;/h4&gt;

&lt;p&gt;Chocolateyã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã®ã¯ã‚ãã‚‰ã‚ã¦ã€&lt;a href=&#34;https://chocolatey.org/install#download-powershell-method&#34;&gt;ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’è‡ªåˆ†ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•&lt;/a&gt;ã‚’è©¦ã™ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã¯&lt;code&gt;https://chocolatey.org/api/v2/package/chocolatey/&lt;/code&gt;ã¨ã„ã†Web APIã‚’ãŸãŸã„ã¦ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã ã‘ã©ã€ã“ã®URLã‚’&lt;code&gt;ADD&lt;/code&gt;ã«æ¸¡ã—ã¦ã‚‚ã†ã¾ãã„ã‹ãªã‹ã£ãŸã®ã§ã€ã“ã®Web APIãŒæœ€çµ‚çš„ã«å‘¼ã¶&lt;code&gt;https://packages.chocolatey.org/chocolatey.0.10.0.nupkg&lt;/code&gt;ã‚’&lt;code&gt;ADD&lt;/code&gt;ã™ã‚‹ã‚ˆã†ã«ã—ãŸã€‚
ã“ã‚Œã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹&lt;code&gt;chocolatey.0.10.0.nupkg&lt;/code&gt;ã¯zipãƒ•ã‚¡ã‚¤ãƒ«ã§ã€unzipã™ã‚‹ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå‡ºã¦ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã—ã‹ã—ã“ã®unzipãŒæ›²è€…ã§ã€&lt;a href=&#34;https://www.kaitoy.xyz/2016/09/12/unzip-on-nanoserver/&#34;&gt;å¦™ã«è‹¦åŠ´ã—ãŸè©±&lt;/a&gt;ã‚’æœ€è¿‘æ›¸ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã§ã€è‹¦åŠ´ã—ã¦å–ã‚Šå‡ºã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ãŸã‚‰ã€ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚“ã•ã¨å‡ºãŸã ã‘ã ã£ãŸã€‚
ãã‚“ãªã“ã£ãŸã‚ã†ã¨æ€ã£ã¦ã¯ã„ãŸãŒã€‚&lt;/p&gt;

&lt;p&gt;ã©ã†ã›Chocolateyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¦ã‚‚ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã¾ãŸå‹•ã‹ãªã„ã‚“ã ã‚ã†ã‹ã‚‰ã€ã‚‚ã†Chocolateyã¯ã‚ãã‚‰ã‚ã‚‹ã€‚&lt;/p&gt;

&lt;h4 id=&#34;wow64ã‚µãƒãƒ¼ãƒˆã—ã¦ãªã„å•é¡Œ&#34;&gt;WoW64ã‚µãƒãƒ¼ãƒˆã—ã¦ãªã„å•é¡Œ&lt;/h4&gt;

&lt;p&gt;Chocolateyã‚’ä½¿ã‚ãªã„ã‚ˆã†ã«Dockerfileã®å‰åŠã‚’ä»¥ä¸‹ã®æ§˜ã«æ›¸ãå¤‰ãˆãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-dockerfile&#34;&gt;(snip)

FROM michaeltlombardi/nanoserveropenjdk
MAINTAINER Kaito Yamada &amp;lt;kaitoy@pcap4j.org&amp;gt;

RUN mkdir C:\pcap4j
WORKDIR C:\\pcap4j

# Install Maven
ADD http://archive.apache.org/dist/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.zip maven.zip
RUN jar xf maven.zip
RUN powershell -command $env:path += &#39;;C:\pcap4j\apache-maven-3.3.9\bin&#39;; setx PATH $env:path /M

# Install Npcap
ADD https://github.com/nmap/npcap/releases/download/v0.08-r7/npcap-0.08-r7.exe npcap.exe
RUN npcap.exe /S

# Build Pcap4J.

(snip)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(å› ã¿ã«ã“ã®æ™‚ç‚¹ã§ã€&lt;code&gt;PATH&lt;/code&gt;ã‚’è¨­å®šã™ã‚‹ã®ã«&lt;code&gt;GetEnvironmentVariable&lt;/code&gt;ã¨&lt;code&gt;SetEnvironmentVariable&lt;/code&gt;ãŒã†ã¾ãä½¿ãˆãªã„å•é¡Œã‚’ä¹—ã‚Šè¶Šãˆã¦ã„ã‚‹ã€‚&lt;code&gt;Cannot find an overload for &amp;quot;GetEnvironmentVariable&amp;quot; and the argument count: &amp;quot;2&amp;quot;.&lt;/code&gt;ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã€PowerShell Desktop Editionã®ã‚‚ã®ã¨ä»•æ§˜ãŒã¡ã‚‡ã£ã¨é•ã†ã‚ˆã†ã ã£ãŸã®ã§ã€&lt;code&gt;GetEnvironmentVariable&lt;/code&gt;ã‚‚&lt;code&gt;SetEnvironmentVariable&lt;/code&gt;ã‚‚ä½¿ã‚ãªã„ã‚ˆã†ã«ã—ãŸã€‚)&lt;/p&gt;

&lt;p&gt;ã“ã®Dockerfileã§ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‰ã€&lt;code&gt;RUN npcap.exe /S&lt;/code&gt;ã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;The subsystem needed to support the image type is not present.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®subsystemã¨ã„ã†ã®ã¯ã©ã†ã‚‚&lt;a href=&#34;https://ja.wikipedia.org/wiki/WOW64&#34;&gt;WoW64&lt;/a&gt;ã‚’æŒ‡ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã€&lt;a href=&#34;https://blogs.technet.microsoft.com/windowsserver/2016/02/10/exploring-nano-server-for-windows-server-2016/&#34;&gt;Nano ServerãŒWoW64ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„&lt;/a&gt;ã®ã«npcap.exeãŒ32bitãƒã‚¤ãƒŠãƒªã§ã‚ã‚‹ã“ã¨ãŒå•é¡Œã®ã‚ˆã†ã§ã‚ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã¤ã„ã§ã«&lt;a href=&#34;https://ja.wikipedia.org/wiki/Microsoft_Windows_Installer&#34;&gt;MSI&lt;/a&gt;ã‚‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã£ãŸã€‚å¤§ä¸ˆå¤«ã‹ã“ã‚Œã€‚&lt;/p&gt;

&lt;h4 id=&#34;nano-serverãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒã‚°ã£ã¦ã‚‹å•é¡Œ&#34;&gt;Nano Serverãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒã‚°ã£ã¦ã‚‹å•é¡Œ&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://technet.microsoft.com/en-us/windows-server-docs/compute/nano-server/getting-started-with-nano-server#a-namebkmkonlineainstalling-roles-and-features-online&#34;&gt;Nano Serverã«ã‚‚ãƒ­ãƒ¼ãƒ«ã‚„æ©Ÿèƒ½ã®è¿½åŠ ãŒã§ãã‚‹&lt;/a&gt;ã‚‰ã—ã„ã®ã§ã€ã²ã‚‡ã£ã¨ã—ã¦ã“ã‚Œã§ä½•ã‹æ”¹å–„ã§ããªã„ã‹ã¨æ€ã£ã¦è©¦ã—ãŸã€‚&lt;/p&gt;

&lt;p&gt;Nano Serverã¸ã®ãƒ­ãƒ¼ãƒ«ãƒ»æ©Ÿèƒ½ã®è¿½åŠ ã¯ã€Windowsã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹&lt;a href=&#34;https://github.com/OneGet/oneget&#34;&gt;PackageManagement (a.k.a. OneGet)&lt;/a&gt;ã‚’ä½¿ã£ã¦ã‚„ã‚‹ã€‚PowerShellã§&lt;code&gt;Install-PackageProvider NanoServerPackage&lt;/code&gt;ã¨&lt;code&gt;Import-PackageProvider NanoServerPackage&lt;/code&gt;ã‚’å®Ÿè¡Œã™ã‚‹ã¨Nano Serverã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã€&lt;code&gt;Find-NanoServerPackage&lt;/code&gt;ã§åˆ©ç”¨ã§ãã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸€è¦§ãŒè¦‹ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¯ãšãªã‚“ã ã‘ã©ã€&lt;code&gt;Find-NanoServerPackage&lt;/code&gt;ã§ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;C:\pcap4j&amp;gt;powershell -command Find-NanoServerPackage
DownloadFile : Save-HTTPItem: Bits Transfer failed. Job State:  ExitCode = 255
At C:\Program Files\WindowsPowerShell\Modules\NanoServerPackage\0.1.1.0\NanoServerPackage.psm1:1294 char:9
+         DownloadFile -downloadURL $fullUrl `
+         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (https://nanoser...ServerIndex.txt:String) [DownloadFile], RuntimeException
    + FullyQualifiedErrorId : FailedToDownload,DownloadFile

Get-Content : Cannot find drive. A drive with the name &#39;CleanUp&#39; does not exist.
At C:\Program Files\WindowsPowerShell\Modules\NanoServerPackage\0.1.1.0\NanoServerPackage.psm1:674 char:26
+     $searchFileContent = Get-Content $searchFile
+                          ~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (CleanUp:String) [Get-Content], DriveNotFoundException
    + FullyQualifiedErrorId : DriveNotFound,Microsoft.PowerShell.Commands.GetContentCommand

Get-Content : Cannot find path
&#39;C:\Users\ContainerAdministrator\AppData\Local\NanoServerPackageProvider\searchNanoPackageIndex.txt&#39; because it does not exist.
At C:\Program Files\WindowsPowerShell\Modules\NanoServerPackage\0.1.1.0\NanoServerPackage.psm1:674 char:26
+     $searchFileContent = Get-Content $searchFile
+                          ~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\Users\Contai...ackageIndex.txt:String) [Get-Content], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/OneGet/NanoServerPackage/issues/4&#34;&gt;NanoServerPackageã®Issues&lt;/a&gt;ã«ã“ã®ã‚¨ãƒ©ãƒ¼ãŒç™»éŒ²ã•ã‚Œã¦ã„ãŸã€‚1ã‹æœˆæ”¾ç½®ã•ã‚Œã¦ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ãƒ‘ãƒˆãƒ©ãƒƒã‚·ãƒ¥ã€åƒ•ã¯ã‚‚ã†ç–²ã‚ŒãŸã‚ˆã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Hyper-Vã‚³ãƒ³ãƒ†ãƒŠ(Nano Server)ã§unzipã—ãŸã„ãªã‚‰jarã‚’ä½¿ãˆ</title>
          <link>https://www.kaitoy.xyz/2016/09/12/unzip-on-nanoserver/</link>
          <pubDate>Mon, 12 Sep 2016 16:46:54 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2016/09/12/unzip-on-nanoserver/</guid>
          <description>

&lt;p&gt;Nano Serverã§unzipã—ãŸã‹ã£ãŸã ã‘ã ã£ãŸã®ã«ã€å¦™ã«è‹¦åŠ´ã—ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;nano-serverã¨ã¯&#34;&gt;Nano Serverã¨ã¯&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://technet.microsoft.com/en-us/windows-server-docs/compute/nano-server/getting-started-with-nano-server&#34;&gt;Nano Server&lt;/a&gt;ã¯ã€Windows Server 2016ã§è¿½åŠ ã•ã‚Œã‚‹Windows Serverã®æ–°ãŸãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å½¢å¼ã§ã€&lt;a href=&#34;https://en.wikipedia.org/wiki/Server_Core&#34;&gt;Server Core&lt;/a&gt;ã‚ˆã‚Šã•ã‚‰ã«æ©Ÿèƒ½ã‚’çµã‚Šã€ãƒªãƒ¢ãƒ¼ãƒˆã§ç®¡ç†ã™ã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒˆã‚„Webã‚µãƒ¼ãƒå‘ã‘ã«ã«ç‰¹åŒ–ã—ãŸã‚‚ã®ã€‚&lt;/p&gt;

&lt;p&gt;Server CoreãŒæ•°GBãã‚‰ã„ãªã®ã«å¯¾ã—ã€Nano Serverã¯æ•°ç™¾MBã¨ã¨ã¦ã‚‚è»½é‡ã§ã€ãã‚Œã‚†ãˆèµ·å‹•ãŒé€Ÿãã‚»ã‚­ãƒ¥ã‚¢ã€‚&lt;/p&gt;

&lt;h2 id=&#34;unzipã¨ã¯&#34;&gt;unzipã¨ã¯&lt;/h2&gt;

&lt;p&gt;unzipã¨ã¯ã€&lt;a href=&#34;https://ja.wikipedia.org/wiki/ZIP_(%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88&#34;&gt;zip&lt;/a&gt;ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£å‡ã™ã‚‹ã€ãŸã ãã‚Œã ã‘ã®ã“ã¨ã€‚&lt;/p&gt;

&lt;p&gt;ãŸã ãã‚Œã ã‘ã®ã“ã¨ã§ã€åŸºæœ¬çš„ãªæ©Ÿèƒ½ã ã¨æ€ã†ã®ã ãŒã€Windowsã¯ã“ã‚Œã‚’&lt;a href=&#34;https://technet.microsoft.com/en-us/library/dn841359.aspx&#34;&gt;ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§å®Ÿè¡Œã™ã‚‹æ–¹æ³•&lt;/a&gt;ã‚’ã¤ã„æœ€è¿‘ã¾ã§æ­£å¼ã«æä¾›ã—ã¦ã„ãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;nano-serverã§unzip&#34;&gt;Nano Serverã§unzip&lt;/h2&gt;

&lt;p&gt;Windows 10ã®&lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#windows-containers%E3%81%A8%E3%81%AF&#34;&gt;Hyper-V Containers&lt;/a&gt;ã®ä¸Šã§&lt;a href=&#34;https://github.com/kaitoy/pcap4j&#34;&gt;Pcap4J&lt;/a&gt;ã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸãã¦ã€ãã®ãŸã‚ã®ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å‡¦ç†ã‚’Dockerfileã«æ›¸ã„ã¦ã„ã¦ã€&lt;code&gt;ADD&lt;/code&gt;ã§zipã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã¨ã“ã‚ã¾ã§ã¯ã„ã„ã‚“ã ã‘ã©ã€ã“ã®zipã©ã†ã‚„ã£ã¦è§£å‡ã—ã¦ã‚„ã‚ã†ã‹ã¨ãªã£ãŸã€‚
(Dockerãƒ›ã‚¹ãƒˆã«ç½®ã„ãŸã‚‚ã®ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«&lt;code&gt;ADD&lt;/code&gt;ã™ã‚‹ã®ã¯ãªã‚“ã‹æ ¼å¥½æ‚ªã„ã‹ã‚‰ç„¡ã—ã§ã€‚Dockerfileè£¸ä¸€è²«ã§å®Ÿç¾ã—ãŸã„ã€‚)&lt;/p&gt;

&lt;p&gt;Windows 10ã®Hyper-V Containersã¯ã€&lt;a href=&#34;https://social.msdn.microsoft.com/Forums/en-US/9eea93ac-18de-4953-bc7c-efd76a155526/are-microsoftwindowsservercore-containers-working-on-windows-10?forum=windowscontainers&#34;&gt;ç¾æ™‚ç‚¹ã§Nano Serverã—ã‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„&lt;/a&gt;ã®ãŒå³ã—ã„ç‚¹ã€‚Server Coreã ã£ãŸã‚‰æ¥½ã ã£ãŸã®ã«ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã€ã„ã‚ã„ã‚è©¦ã—ãŸã“ã¨ã‚’æ›¸ãã€‚&lt;/p&gt;

&lt;h4 id=&#34;æ­£æ”»æ³•-expand-archive&#34;&gt;æ­£æ”»æ³•: Expand-Archive&lt;/h4&gt;

&lt;p&gt;PowerShellã® v5 ã§å®Ÿè£…ã•ã‚ŒãŸExpand-Archiveã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§zipã‚’è§£å‡ã§ãã‚‹ã€‚
Nano Serverã®PowerShellã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ãŸã‚‰ 5.1 ã ã£ãŸã®ã§ã“ã‚Œã§ã„ã‘ã‚‹ã‹ã¨æ€ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\&amp;gt;powershell -command &amp;quot;$PSVersionTable.PSVersion&amp;quot;

Major  Minor  Build  Revision
-----  -----  -----  --------
5      1      14284  1000
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã—ãŸã‚‰ã“ã®ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Add-Type : Cannot find path &#39;C:\System.IO.Compression.FileSystem.dll&#39; because it does not exist.
At
C:\windows\system32\windowspowershell\v1.0\Modules\Microsoft.PowerShell.Archive\Microsoft.PowerShell.Archive.psm1:914
char:5
+     Add-Type -AssemblyName System.IO.Compression.FileSystem
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\System.IO.Compression.FileSystem.dll:String) [Add-Type], ItemNotFoun
   dException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.AddTypeCommand
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã©ã†ã‚‚PowerShellã® 5.1 ä»¥é™ã«ã¯ã€.NET Frameworkãƒ™ãƒ¼ã‚¹ã®Desktop Editionã¨ã€ãã“ã‹ã‚‰æ©Ÿèƒ½ã‚’çµã£ãŸ.NET Coreãƒ™ãƒ¼ã‚¹ã®Core EditionãŒã‚ã‚Šã€&lt;a href=&#34;https://technet.microsoft.com/en-us/windows-server-docs/compute/nano-server/powershell-on-nano-server&#34;&gt;Nano Serverã®ã¯Core Editionãªã‚“ã ãã†ãª&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Expand-Archiveã¯System.IO.Compression.FileSystem.dllã®ä¸­ã®ZipFileã‚¯ãƒ©ã‚¹ã«ä¾å­˜ã—ã¦ã„ã‚‹ã‚“ã ã‘ã©ã€.NET Coreã«ã¯System.IO.Compression.FileSystem.dllãŒå«ã¾ã‚Œã¦ã„ãªã„ã£ã½ã„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;shellã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®copyhere&#34;&gt;Shellã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®CopyHere&lt;/h4&gt;

&lt;p&gt;PowerShellã§ã®unzipæ–¹æ³•ã‚’èª¿ã¹ãŸã‚‰Stack Overflowã«&lt;a href=&#34;http://stackoverflow.com/questions/27768303/how-to-unzip-a-file-in-powershell&#34;&gt;ã„ãã¤ã‹è¼‰ã£ã¦ã„ãŸ&lt;/a&gt;ã€‚
Expand-Archiveã¨ã€System.IO.Compression.ZipFileã‚’ç›´æ¥ä½¿ã†æ–¹æ³•ã¨ã€Shellã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(COMã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ)ã®CopyHereãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åˆã®2ã¤ã¯Core Editionã§ã¯ä½¿ãˆãªã„ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã‚‹ã®ã§ã€3ã¤ã‚ã«ãƒˆãƒ©ã‚¤ã€‚
ã“ã‚“ãªã®â†“&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;$shell = New-Object -ComObject shell.application
$zip = $shell.NameSpace(&amp;quot;C:\a.zip&amp;quot;)
MkDir(&amp;quot;C:\a&amp;quot;)
foreach ($item in $zip.items()) {
  $shell.Namespace(&amp;quot;C:\a&amp;quot;).CopyHere($item)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;èª¿ã¹ãŸã‚‰ã“ã®æ–¹æ³•ã¯&lt;a href=&#34;https://support.microsoft.com/ja-jp/kb/2679832&#34;&gt;Microsoftã‹ã‚‰éæ¨å¥¨ã«ã•ã‚Œã¦ã„ã‚‹&lt;/a&gt;ã“ã¨ãŒåˆ†ã‹ã£ãŸã‚“ã ã‘ã©ã€ä¸€å¿œã‚„ã£ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã—ãŸã‚‰ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;new-object : Retrieving the COM class factory for component with CLSID {00000000-0000-0000-0000-000000000000} failed
due to the following error: 80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)).
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã®æ–¹æ³•ã§åˆ©ç”¨ã—ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã®ã¯&lt;a href=&#34;https://en.wikipedia.org/wiki/Windows_shell&#34;&gt;Windows shell&lt;/a&gt;ã€ã¤ã¾ã‚Š&lt;a href=&#34;https://ja.wikipedia.org/wiki/Windows_Explorer&#34;&gt;Windows Explorer&lt;/a&gt;ã®æ©Ÿèƒ½ã‚‰ã—ãã€ãã†ã§ã‚ã‚Œã°ã¾ã‚GUIãŒãªã„Nano Serverã§å‹•ã‹ãªã„ã®ã‚‚å½“ç„¶ã‹ã€‚&lt;/p&gt;

&lt;h4 id=&#34;ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«é ¼ã‚‹&#34;&gt;ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«é ¼ã‚‹&lt;/h4&gt;

&lt;p&gt;Stack Overflowã®&lt;a href=&#34;http://stackoverflow.com/questions/1021557/how-to-unzip-a-file-using-the-command-line&#34;&gt;åˆ¥ã®è³ªå•&lt;/a&gt;ã«ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ã«é ¼ã‚‹æ–¹æ³•ãŒã„ãã¤ã‹ç´¹ä»‹ã•ã‚Œã¦ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã§æŒ™ã’ã‚‰ã‚Œã¦ã„ãŸã‚‚ã®ã®ã†ã¡ã€&lt;a href=&#34;http://www.7-zip.org/download.html&#34;&gt;7-Zip&lt;/a&gt;ã€&lt;a href=&#34;http://www.freebyte.com/fbzip/&#34;&gt;Freebyte Zip&lt;/a&gt;ã€&lt;a href=&#34;http://infozip.sourceforge.net/&#34;&gt;Info-ZIP&lt;/a&gt;ã¯ã€é…å¸ƒå½¢å¼ãŒãƒ€ãƒ¡ã€‚&lt;/p&gt;

&lt;p&gt;7-Zipã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’ã‚³ãƒ³ãƒ†ãƒŠã§å®Ÿè¡Œã—ã¦ã¿ãŸã‚‰ã€ã€ŒThe subsystem needed to support the image type is not present.ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã€‚7-Zipã«ã¯zipã§é…å¸ƒã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã‚“ã ã‘ã©ã€çš®è‚‰ã¨ã—ã‹æ€ãˆãªã„ã€‚&lt;/p&gt;

&lt;p&gt;Freebyte Zipã‚„Info-ZIPã®è‡ªå·±è§£å‡ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã¯å‹•ã„ã¦ãã‚Œãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€æ–¹ã€&lt;a href=&#34;http://membrane.com/synapse/library/pkunzip.html&#34;&gt;pkunzip&lt;/a&gt;ã¯ã‚³ãƒãƒ³ãƒ‰ãŒè£¸ã§é…å¸ƒã•ã‚Œã¦ã„ã‚‹ã®ã§è¡Œã‘ã‚‹ã‹ã¨æ€ã£ãŸãŒã€å®Ÿè¡Œã—ãŸã‚‰ã€ŒThe system cannot execute the specified program.ã€ãªã‚‹ã‚¨ãƒ©ãƒ¼ã€‚
ã‚ˆãè¦‹ãŸã‚‰ã“ã‚Œ16bitã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚Nano Serverã¯32bitã‚¢ãƒ—ãƒªã™ã‚‰å®Ÿè¡Œã§ããªã„ã¨ã„ã†ã®ã«ã€‚&lt;/p&gt;

&lt;h4 id=&#34;jarã«è¨—ã•ã‚ŒãŸæœ€å¾Œã®å¸Œæœ›&#34;&gt;jarã«è¨—ã•ã‚ŒãŸæœ€å¾Œã®å¸Œæœ›&lt;/h4&gt;

&lt;p&gt;ä¸Šã«è²¼ã£ãŸStack Overflowã®è³ªå•ã«ã¯&lt;a href=&#34;https://docs.oracle.com/javase/8/docs/technotes/tools/unix/jar.html&#34;&gt;jarã‚³ãƒãƒ³ãƒ‰&lt;/a&gt;ã‚’ä½¿ã†æ–¹æ³•ã‚‚æŒ™ã’ã‚‰ã‚Œã¦ã„ãŸãŒã€JDKãªã‚“ã¦ã©ã†ã›ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã„ã¨ã‚ãã‚‰ã‚ã¦ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;ãŒã€ãµã¨æ€ã„ç«‹ã£ã¦&lt;a href=&#34;https://hub.docker.com/&#34;&gt;Docker Hub&lt;/a&gt;ã‚’æ¤œç´¢ã—ã¦ã¿ãŸã‚‰ã€&lt;a href=&#34;https://hub.docker.com/r/michaeltlombardi/nanoserveropenjdk/&#34;&gt;OpenJDKå…¥ã‚Šã®Nano Server&lt;/a&gt;ã‚’ã‚¢ãƒƒãƒ—ã—ã¦ãã‚Œã¦ã„ã‚‹äººãŒã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;pullã—ã¦runã—ã¦ã¿ãŸã‚‰ç¢ºã‹ã«JDKãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\&amp;gt;java -version
openjdk version &amp;quot;1.8.0_102-1-ojdkbuild&amp;quot;
OpenJDK Runtime Environment (build 1.8.0_102-1-ojdkbuild-b14)
OpenJDK 64-Bit Server VM (build 25.102-b14, mixed mode)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã§ã€ç„¡äº‹&lt;code&gt;&amp;quot;C:\Program Files\Java\bin\jar.exe&amp;quot; xf hoge.zip&lt;/code&gt;ã®ã‚ˆã†ã«ã—ã¦unzipã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;ã“ã“ã¾ã§1æ—¥ã‹ã‹ã£ãŸã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Docker for WindowsãŒã‚³ãƒ¬ã‚¸ãƒ£ãƒŠã‹ã£ãŸ</title>
          <link>https://www.kaitoy.xyz/2016/07/31/docker-for-windows/</link>
          <pubDate>Sun, 31 Jul 2016 14:34:16 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2016/07/31/docker-for-windows/</guid>
          <description>

&lt;p&gt;7/28ã«Docker for Winodws(ã¨Docker for Mac)ã®æ­£å¼ç‰ˆãƒªãƒªãƒ¼ã‚¹ã®&lt;a href=&#34;https://blog.docker.com/2016/07/docker-for-mac-and-windows-production-ready/&#34;&gt;ã‚¢ãƒŠã‚¦ãƒ³ã‚¹&lt;/a&gt;ãŒã‚ã£ãŸã®ã§è©¦ã—ã¦ã¿ãŸã‘ã©ã€æœŸå¾…ã—ã¦ã„ãŸã‚‚ã®ã¨é•ã£ãŸã—ãªã‚“ã ã‹ä¸Šæ‰‹ãå‹•ã‹ãªã‹ã£ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;docker-for-windowsã¨ã¯&#34;&gt;Docker for Windowsã¨ã¯&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/docker-for-windows/&#34;&gt;Docker for Windows&lt;/a&gt;ã¯&lt;a href=&#34;https://www.docker.com/products/docker-toolbox&#34;&gt;Docker Toolbox&lt;/a&gt;ã®å¾Œç¶™è£½å“ã€‚(å¤šåˆ†ã€‚)&lt;/p&gt;

&lt;p&gt;Docker Toolboxã¯Windowsã‚„Macã§Dockerã‚’ä½¿ã†ãŸã‚ã®è£½å“ã§ã€ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ãªã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://www.docker.com/products/docker-engine&#34;&gt;Docker Engine&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/compose/&#34;&gt;Docker Compose&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;è¤‡æ•°ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’çµ„ã¿åˆã‚ã›ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³/ã‚µãƒ¼ãƒ“ã‚¹ã®æ§‹ç¯‰/ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/machine/&#34;&gt;Docker Machine&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Dockerä»®æƒ³ãƒ›ã‚¹ãƒˆã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°/ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://kitematic.com/&#34;&gt;Kitematic&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ç®¡ç†ã™ã‚‹GUIã‚’æä¾›ã™ã‚‹è£½å“ã€‚
Docker Machineã¨é€£æºã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã¸ã®Dockerä»®æƒ³ãƒ›ã‚¹ãƒˆã®ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚‚ã—ã¦ãã‚Œã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Docker Toolboxã‚’ä½¿ã†ã¨ã€&lt;a href=&#34;https://ja.wikipedia.org/wiki/VirtualBox&#34;&gt;VirtualBox&lt;/a&gt;ã®Linux VMã‚’Windows/Macä¸Šã«ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã—ã¦ã€ãã®VMã«Dockerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€Windows/Macã‹ã‚‰åˆ©ç”¨ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;Docker for Windowsã‚‚ã ã„ãŸã„åŒã˜ã§ã€Docker Engineã¨Docker Composeã¨Docker Machineã‚’Winodwsã§åˆ©ç”¨ã™ã‚‹ãŸã‚ã®è£½å“ã€‚
&lt;a href=&#34;http://electron.atom.io/&#34;&gt;Electron&lt;/a&gt;ãƒ™ãƒ¼ã‚¹ã§Oracleã®VirtualBoxä¾å­˜ãªKitematicã®ä»£ã‚ã‚Šã«ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ãªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãŒWindowså†…è”µã®&lt;a href=&#34;https://ja.wikipedia.org/wiki/Hyper-V&#34;&gt;Hyper-V&lt;/a&gt;ã‚’ä½¿ã£ã¦Dockerã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã—ã¦ãã‚Œã‚‹ã€‚
Hyper-Vã‚’ä½¿ã†ãŸã‚ã€VirtualBoxã‚ˆã‚Šé€Ÿãã¦é«˜ä¿¡é ¼ã‚‰ã—ã„ã€‚
Kitematicã¯Docker for Windowsã«ã¯ä»˜å±ã—ãªã„ãŒã€åˆ¥é€”ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚Œã°ã‚³ãƒ³ãƒ†ãƒŠç®¡ç†ã«ä½¿ãˆã‚‹ã€‚Docker for Windowsã¨Docker Toolboxã¨ã¯å…±å­˜ã¯ã§ããªã„ã€‚&lt;/p&gt;

&lt;p&gt;ç§ã¯å‹æ‰‹ã«Docker for Windowsã¯&lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#windows-containersã¨ã¯&#34;&gt;Hyper-V Containers&lt;/a&gt;ã®ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—OSç‰ˆã®ã‚ˆã†ãªã‚‚ã®ã‹ã¨å‹˜é•ã„ã—ã¦ã„ã¦ã€Windowsã®ã‚³ãƒ³ãƒ†ãƒŠãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã‹ã¨æœŸå¾…ã—ãŸãŒé•ã£ãŸã€‚
Docker for Windowsã¯å˜ã«Docker Toolboxã®VirtualBoxãŒHyper-Vã«ãªã£ãŸã ã‘ã®ã‚‚ã®ã§ã€çµå±€Linux VMã®ä¸­ã§Dockerã‚’ä½¿ã†ã ã‘ã®ã‚‚ã®ã ã¨ã„ã†ã“ã¨ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¸­ã«æ°—ä»˜ã„ãŸã€‚&lt;/p&gt;

&lt;p&gt;(2017/9/12è¿½è¨˜: &lt;a href=&#34;https://blogs.msdn.microsoft.com/webdev/2017/09/07/getting-started-with-windows-containers/&#34;&gt;ã“ã‚Œ&lt;/a&gt;ã¨ã‹&lt;a href=&#34;https://docs.docker.com/docker-for-windows/install/#about-windows-containers-and-windows-server-2016&#34;&gt;ã“ã‚Œ&lt;/a&gt;ã¨ã‹ã‚’è¦‹ã‚‹ã«ã€ã„ã¾ã§ã¯Docker for Winodwsã¯ã€Hyper-V Containersã‚„Windows Server Containersã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã‚‚ã‚ã‚‹ã‚ˆã†ã ã€‚)&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ¬ã‚¸ãƒ£ãƒŠã‚¤æ„ŸãŒã™ã”ã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã¨ã‚‚ã‚ã‚Œã€ã‚„ã£ãŸä½œæ¥­ã‚’ä»¥ä¸‹ã«è¨˜ã™ã€‚&lt;/p&gt;

&lt;h2 id=&#34;docker-for-windows-on-vmware-player&#34;&gt;Docker for Windows on VMware Player&lt;/h2&gt;

&lt;p&gt;ç¾æ™‚ç‚¹ã§ã¯Docker for Windowsã¯ãƒ›ã‚¹ãƒˆã¨ã—ã¦Windows 10 x64 Pro/Enterprise/Education (Version 1511 Build 10586 ä»¥é™)ã—ã‹ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã€‚
è‡ªå‰ã®PCãŒ5å¹´å‰ã«è²·ã£ãŸ&lt;a href=&#34;https://dynabook.com/&#34;&gt;dynabook&lt;/a&gt;ã§Windows 10ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã®ã§ã€VMware Playerã®VMä¸Šã®Windows 10ã«Docker for Windowsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã¿ã‚‹ã€‚&lt;/p&gt;

&lt;h4 id=&#34;vmware-playerã®vmã§hyper-vã‚’ä½¿ã†ãŸã‚ã®è¨­å®š&#34;&gt;VMware Playerã®VMã§Hyper-Vã‚’ä½¿ã†ãŸã‚ã®è¨­å®š&lt;/h4&gt;

&lt;p&gt;VMware Playerã®VMã§ã¯é€šå¸¸Hyper-Vã¯ä½¿ãˆãªã„ã®ã§ã€&lt;a href=&#34;http://social.technet.microsoft.com/wiki/contents/articles/22283.how-to-install-hyper-v-on-vmware-workstation-10.aspx&#34;&gt;How to Install Hyper-V on vmware Workstation 10 ?&lt;/a&gt;ã‚’å‚è€ƒã«ã—ã¦VMã®è¨­å®šã‚’ã„ã˜ã‚‹ã€‚
ã“ã®è¨˜äº‹ã¯VMware Workstationã«ã¤ã„ã¦ã®ã‚‚ã®ã ãŒã€VMware Playerã§ã‚‚å…¨ãåŒã˜æ–¹æ³•ã§ã„ã‘ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã„ã˜ã‚‹ã®ã¯ã€dynabookã®Windows 7ã«å…¥ã‚ŒãŸVMware Workstation 11.1.0 build-2496824ã«ä»˜å±ã®
VMware Player 7.1.0 build-2496824ã§ä½œã£ãŸWindows 10 Pro x64 (Version 1511 Build 10586.494)ã®VMã€‚
VMã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯11.0ã€‚2CPUã§ãƒ¡ãƒ¢ãƒªã¯2GBã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯NATã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®VMã®.vmxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ã¦ä»¥ä¸‹ã‚’è¿½è¨˜ã€‚æ„å‘³ã¯ä¸æ˜ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hypervisor.cpuid.v0 = &amp;quot;FALSE&amp;quot;
mce.enable = &amp;quot;TRUE&amp;quot;
vhu.enable = &amp;quot;TRUE&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ¬¡ã„ã§ã€VMware Playerã®GUIã‹ã‚‰VMã®CPUè¨­å®šã‚’é–‹ãã€&lt;code&gt;Intel VT-x/EPTã¾ãŸã¯AMD-V/RVIã‚’ä»®æƒ³åŒ–&lt;/code&gt;ã¨&lt;code&gt;CPUãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚«ã‚¦ãƒ³ã‚¿ã‚’ä»®æƒ³åŒ–&lt;/code&gt;ã«ãƒã‚§ãƒƒã‚¯ã‚’ä»˜ã‘ã‚‹ã€‚æ„å‘³ã¯ãªã‚“ã¨ãªãã—ã‹ã‚ã‹ã‚‰ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/docker-for-windows/vm.jpg&#34; alt=&#34;vm.jpg&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã ã‘ã€‚&lt;/p&gt;

&lt;p&gt;Hyper-Vã¯Docker for Windowsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãŒæœ‰åŠ¹åŒ–ã—ã¦ãã‚Œã‚‹ã®ã§ã“ã“ã§ã¯ä½•ã‚‚ã—ãªãã¦ã„ã„ã€‚&lt;/p&gt;

&lt;h4 id=&#34;docker-for-windowsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Docker for Windowsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h4&gt;

&lt;p&gt;VMã‚’èµ·å‹•ã—ã¦ã€&lt;a href=&#34;https://docs.docker.com/docker-for-windows/&#34;&gt;Getting Started with Docker for Windows&lt;/a&gt;ã«å¾“ã£ã¦Docker for Windowsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãšã€&lt;a href=&#34;https://download.docker.com/win/stable/InstallDocker.msi&#34;&gt;ä¸Šè¨˜ã‚µã‚¤ãƒˆå†…ã®ãƒªãƒ³ã‚¯&lt;/a&gt;ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚stableã®æ–¹ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ&lt;code&gt;InstallDocker.msi&lt;/code&gt;ã‚’VMä¸Šã§å®Ÿè¡Œã—ã¦ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã«å¾“ãˆã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚
ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ã®æœ€å¾Œã§&lt;code&gt;Launch Docker&lt;/code&gt;ã«ãƒã‚§ãƒƒã‚¯ãŒä»˜ã„ãŸçŠ¶æ…‹ã§&lt;code&gt;Finish&lt;/code&gt;ã™ã‚‹ã¨Dockerã‚’èµ·å‹•ã—ã¦ãã‚Œã‚‹ã€‚
ã“ã®èµ·å‹•ä¸­ã«Hyper-Vã‚’æœ‰åŠ¹åŒ–ã—ã¦ãã‚Œã‚‹ã€‚(OSå†èµ·å‹•æœ‰ã‚Šã€‚)&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/docker-for-windows/hyper-v.jpg&#34; alt=&#34;hyper-v.jpg&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;OSå†èµ·å‹•å¾Œã€ã€ŒFailed to create Switch &amp;ldquo;DockerNAT&amp;rdquo;: Hyper-V was unable to find a virtual switch with name &amp;ldquo;DockerNAT&amp;rdquo;ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼å‡ºãŸã€‚&lt;code&gt;DockerNAT&lt;/code&gt;ãŒè¦‹ã¤ã‹ã‚‰ãªã„?&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/docker-for-windows/error.jpg&#34; alt=&#34;error.jpg&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;code&gt;DockerNAT&lt;/code&gt;ã¯Docker for WindowsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­ã«ä½œã‚‹Hyper-Vã®ä»®æƒ³ã‚¹ã‚¤ãƒƒãƒã€‚&lt;/p&gt;

&lt;p&gt;ä»¥å‰ã«&lt;code&gt;hosts&lt;/code&gt;ã«å¤‰ãªã‚¨ãƒ³ãƒˆãƒªã‚’æ›¸ã„ã¦ã—ã¾ã£ã¦ã„ãŸã®ã§ãã‚Œã‚’ä¸€å¿œæ¶ˆã—ã¦ã€VMware Playerã®VMã®ã‚¢ãƒ€ãƒ—ã‚¿ã®è¨­å®šã‚‚ã¡ã‚‡ã£ã¨ã„ã˜ã£ã¦ã—ã¾ã£ã¦ã„ãŸã®ã§ä¸€å¿œã‚‚ã¨ã«ã‚‚ã©ã—ã¦ã€å†åº¦Docker for Windowsã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰ä¸Šè¨˜ã‚¨ãƒ©ãƒ¼ã¯å‡ºãªããªã£ãŸã€‚
ãªã‚“ã ã£ãŸã‚“ã ã‚ã†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerã®èµ·å‹•ä¸­ã«ä»Šåº¦ã¯ãƒ¡ãƒ¢ãƒªç³»ã®ã‚¨ãƒ©ãƒ¼: ã€ŒFailed to create VM &amp;ldquo;MobyLinuxVM&amp;rdquo;: Failed to modify device &amp;lsquo;Memory&amp;rsquo;ã€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/docker-for-windows/error2.jpg&#34; alt=&#34;error2.jpg&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;code&gt;MobyLinuxVM&lt;/code&gt;ã¯Dockerã‚’å‹•ã‹ã™Hyper-V VMã®åå‰ã€‚ã“ã®VMã«å‰²ã‚Šå½“ã¦ã‚‹ãƒ¡ãƒ¢ãƒªã¯ãƒ›ã‚¹ãƒˆOSã®ãƒ¡ãƒ¢ãƒªé‡ã‹ã‚‰æ±ºã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã§ã€ã“ã‚ŒãŒå°‘ãªã™ãã‚‹ã¨ãƒ€ãƒ¡ãªæ¨¡æ§˜ã€‚&lt;/p&gt;

&lt;p&gt;VMware Playerã®VMã®ãƒ¡ãƒ¢ãƒªã‚’2Gã‹ã‚‰3.3Gã«å¢—ã‚„ã—ãŸã‚‰ã“ã®ã‚¨ãƒ©ãƒ¼ã‚‚ãªããªã£ãŸã‘ã©ã€ä»Šåº¦ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã‚¨ãƒ©ãƒ¼: ã€ŒFailed to start VM &amp;ldquo;MobyLinuxVM&amp;rdquo;: The VM couldn&amp;rsquo;t get an IP address after 60 triesã€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/docker-for-windows/error3.jpg&#34; alt=&#34;error3.jpg&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ã‚’è¦‹ãŸã‚‰
&lt;a href=&#34;https://forums.docker.com/t/vm-mobylinuxvm-the-vm-couldnt-get-an-ip-address-after-60-tries/8505/11&#34;&gt;ã“ã®ã‚¨ãƒ©ãƒ¼ãŒè¼‰ã£ã¦ã„ãŸ&lt;/a&gt;ã€‚ãã“ã«ã¯ä»¥ä¸‹ã®æ§˜ãªè§£æ±ºæ–¹æ³•ãŒæŒ™ãŒã£ã¦ã„ãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Docker for Windowsã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªãŠã™ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vEthernet (DockerNAT)&lt;/code&gt;ã®ã‚¢ãƒ€ãƒ—ã‚¿ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§IPv6ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã€‚&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã®é¯¨ã‚¢ã‚¤ã‚³ãƒ³ã‹ã‚‰é–‹ã‘ã‚‹Dockerã®Settingsã§&lt;code&gt;Reset to factory defaults...&lt;/code&gt;ã‚’å®Ÿè¡Œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/docker-for-windows/docker_settings.jpg&#34; alt=&#34;docker_settings.jpg&#34; /&gt;
&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã©ã‚Œã‚‚ã ã‚ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;MobyLinuxVM&lt;/code&gt;ãŒã¡ã‚ƒã‚“ã¨èµ·å‹•ã—ãªãã¦ã€Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã«æ¥ç¶šã§ããªã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Windows\System32&amp;gt;docker version
Client:
 Version:      1.12.0
 API version:  1.24
 Go version:   go1.6.3
 Git commit:   8eab29e
 Built:        Thu Jul 28 21:15:28 2016
 OS/Arch:      windows/amd64
An error occurred trying to connect: Get http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/version: open //./pipe/docker_engine: The system cannot find the file specified.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å› ã¿ã«ã¡ã‚ƒã‚“ã¨èµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®æ„Ÿã˜ã«ãªã‚‹ã‚‰ã—ã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;PS C:\Users\samstevens&amp;gt; docker version
Client:
Version:      1.12.0-rc2
API version:  1.24
Go version:   go1.6.2
Git commit:   906eacd
Built:        Fri Jun 17 20:35:33 2016
OS/Arch:      windows/amd64
Experimental: true

Server:
Version:      1.12.0-rc2
API version:  1.24
Go version:   go1.6.2
Git commit:   a7119de
Built:        Fri Jun 17 22:09:20 2016
OS/Arch:      linux/amd64
Experimental: true
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚‚ã†ã‚ãã‚‰ã‚ã‚‹ã€‚
ã©ã†ã›Windowsã‚³ãƒ³ãƒ†ãƒŠãŒä½¿ãˆãªã„ãªã‚‰ã‚ã¾ã‚Šé¢ç™½ããªã„ã—ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Windows Server 2016 TP5ã§Windows Containersã«ãƒªãƒˆãƒ©ã‚¤</title>
          <link>https://www.kaitoy.xyz/2016/07/11/windows_containers_on_tp5/</link>
          <pubDate>Mon, 11 Jul 2016 00:30:33 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2016/07/11/windows_containers_on_tp5/</guid>
          <description>

&lt;p&gt;&lt;a href=&#34;https://www.microsoft.com/ja-jp/evalcenter/evaluate-windows-server-technical-preview&#34;&gt;Windows Server 2016ã®Technical Preview 5(TP5)ãŒå…¬é–‹ã•ã‚Œã¦ã„ãŸ&lt;/a&gt;ã®ã§ã€
&lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/&#34;&gt;TP4ã§ãƒã‚°ã«é˜»ã¾ã‚Œã¦æŒ«æŠ˜ã—ãŸ&lt;/a&gt;ã€Windows Containersã§&lt;a href=&#34;https://github.com/kaitoy/pcap4j&#34;&gt;Pcap4J&lt;/a&gt;ã‚’ä½¿ã£ã¦ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹è©¦ã¿ã«ãƒªãƒˆãƒ©ã‚¤ã—ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;osã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&#34;&gt;OSã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#windows-containersã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&#34;&gt;TP4ã®ã¨ã&lt;/a&gt;ã¨åŒã˜ç’°å¢ƒã€‚&lt;/p&gt;

&lt;p&gt;ä»¥é™ã¯&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/quick_start/quick_start_windows_server&#34;&gt;Windows Server Containersã®ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰&lt;/a&gt;ã«æ²¿ã£ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’é€²ã‚ã‚‹ã€‚
&lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#windows-containersã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&#34;&gt;TP4&lt;/a&gt;ã‹ã‚‰ã¯å¤§åˆ†å¤‰ã‚ã£ã¦ã„ã¦ã€å˜ä¸€ã®Powershellã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å½¢å¼ã‹ã‚‰ã€Powershellã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’é€æ¬¡æ‰‹å‹•å®Ÿè¡Œã™ã‚‹å½¢å¼ã«ãªã£ã¦ã„ã‚‹ã€‚
é¢å€’ã ã‘ã©ä½•ã‚„ã£ã¦ã‚‹ã‹ã‚ã‹ã‚Šã‚„ã™ãã¦å¥½ãã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚³ãƒ³ãƒ†ãƒŠæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;ã‚³ãƒ³ãƒ†ãƒŠæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ç®¡ç†è€…æ¨©é™ã®ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã&lt;/p&gt;

&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;powershell start-process powershell -Verb runas
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠæ©Ÿèƒ½ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;

&lt;p&gt;é–‹ã„ãŸé’ã„ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚³ãƒ³ãƒ†ãƒŠæ©Ÿèƒ½ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Install-WindowsFeature containers
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°åˆ†ã§çµ‚ã‚ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã®ã¯Hyper-V Containersã˜ã‚ƒãªãã¦Windows Server Containersã®æ–¹ã€‚
ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ã‚’ã¿ã‚‹ã¨ã€å‰è€…ãŒWindows 10å‘ã‘ã€å¾Œè€…ãŒWindows Serverå‘ã‘ã¨ã„ã†ã‚ˆã†ã«ä½ã¿åˆ†ã‘ã•ã‚Œã¦ã„ã‚‹ã£ã½ã„ã€‚TP4ã§ã¯ä¸¡æ–¹ã¨ã‚‚Windows Serverã§ä½¿ãˆãŸã‚“ã ã‘ã©ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;å†èµ·å‹•&lt;/p&gt;

&lt;p&gt;å¤‰æ›´ã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«å†èµ·å‹•ãŒå¿…è¦ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Restart-Computer -Force
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&#34;dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;Dockerã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ç®¡ç†ã‚„ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ãªã©ã‚‚ã‚ã‚‚ã‚ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã¨ã€ãã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®CLIã‚’æä¾›ã™ã‚‹Dockerã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ãªã‚‹ã€‚ã“ã®ç¯€ã§ã¯ãã‚Œã‚‰ä¸¡æ–¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ&lt;/p&gt;

&lt;p&gt;ç®¡ç†è€…æ¨©é™ã®ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;New-Item -Type Directory -Path &#39;C:\Program Files\docker\&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;

&lt;p&gt;ã¾ãšã¯ãƒ‡ãƒ¼ãƒ¢ãƒ³ã®æ–¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Invoke-WebRequest https://aka.ms/tp5/b/dockerd -OutFile $env:ProgramFiles\docker\dockerd.exe -UseBasicParsing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°åˆ†ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dockerã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;

&lt;p&gt;æ¬¡ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Invoke-WebRequest https://aka.ms/tp5/b/docker -OutFile $env:ProgramFiles\docker\docker.exe -UseBasicParsing
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°åç§’ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ãƒ‘ã‚¹ã®è¨­å®š&lt;/p&gt;

&lt;p&gt;ã•ã£ãä½œã£ãŸDockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ•ã‚©ãƒ«ãƒ€ã«ãƒ‘ã‚¹ã‚’é€šã™ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;[Environment]::SetEnvironmentVariable(&amp;quot;Path&amp;quot;, $env:Path + &amp;quot;;C:\Program Files\Docker&amp;quot;, [EnvironmentVariableTarget]::Machine)
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã«ç™»éŒ²&lt;/p&gt;

&lt;p&gt;ãƒ‘ã‚¹ã®è¨­å®šã‚’åæ˜ ã™ã‚‹ãŸã‚ã«ã„ã£ãŸã‚“ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é–‰ã˜ã¦ã€
ã¾ãŸç®¡ç†è€…æ¨©é™ã§ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã‚’ã‚µãƒ¼ãƒ“ã‚¹ã«ç™»éŒ²ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;dockerd --register-service
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³èµ·å‹•&lt;/p&gt;

&lt;p&gt;Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã§ãã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Start-Service docker
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°ç§’ã§ç«‹ã¡ä¸ŠãŒã‚‹ã€‚
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯OSå†èµ·å‹•æ™‚ã«ã¯Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³ã¯è‡ªå‹•èµ·å‹•ã—ãªã„ã®ã§ã€ãã®ã¤ã©ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã“ã‚Œã§Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã€‚
ã“ã®æ™‚ç‚¹ã§ã¯ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä½•ã‚‚ãªã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å› ã¿ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸDockerã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯1.12é–‹ç™ºç‰ˆã€‚ç¾æ™‚ç‚¹ã§ã®æœ€æ–°ç‰ˆã ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;docker -v
Docker version 1.12.0-dev, build 8e92415
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&#34;&gt;ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/h2&gt;

&lt;p&gt;æ¬¡ã«ã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;

&lt;p&gt;ã„ã¾ã„ã¡ä½•ãªã®ã‹ã¯ã‚ˆãã‚ã‹ã‚‰ãªã„ãŒã€
ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ—ãƒ­ãƒã‚¤ãƒ€ã¨ã„ã†ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Install-PackageProvider ContainerImage -Force
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ•°åç§’ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Windows Server Coreã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Install-ContainerImage -Name WindowsServerCore
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;9GBä»¥ä¸Šã‚‚ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å‡¦ç†ã™ã‚‹ã®ã§ã‹ãªã‚Šæ™‚é–“ãŒã‹ã‹ã‚‹ã€‚
50åˆ†ãã‚‰ã„ã‹ã‹ã£ãŸã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Dockerãƒ‡ãƒ¼ãƒ¢ãƒ³å†èµ·å‹•&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Restart-Service docker
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ç„¡äº‹Windows Server Coreã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;PS C:\Users\Administrator&amp;gt; docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
windowsservercore   10.0.14300.1000     5bc36a335344        8 weeks ago         9.354 GB
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;pcap4jã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰&#34;&gt;Pcap4Jã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰&lt;/h2&gt;

&lt;p&gt;ä»¥ä¸‹ã‚’&lt;code&gt;C:\Users\Administrator\Desktop\pcap4j\Dockerfile&lt;/code&gt;ã«æ›¸ã„ã¦ã€&lt;code&gt;cd C:\Users\Administrator\Desktop\pcap4j&lt;/code&gt;ã—ã¦ã€&lt;code&gt;docker build -t pcap4j .&lt;/code&gt;ã‚’å®Ÿè¡Œã€‚
(Notepadä½¿ã£ãŸã®ã§ã€æ‹¡å¼µå­ã‚’è¡¨ç¤ºã™ã‚‹è¨­å®šã«ã—ã¦&lt;code&gt;Dockerfile&lt;/code&gt;ã®&lt;code&gt;.txt&lt;/code&gt;ã‚’æ¶ˆã•ãªã„ã¨ã„ã‘ãªã„ç½ ãŒã‚ã£ãŸã€‚)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-dockerfile&#34;&gt;#
# Dockerfile for Pcap4J on Windows
#

FROM windowsservercore:10.0.14300.1000
MAINTAINER Kaito Yamada &amp;lt;kaitoy@pcap4j.org&amp;gt;

# Install Chocolatey.
RUN mkdir C:\pcap4j
WORKDIR c:\\pcap4j
ADD https://chocolatey.org/install.ps1 install.ps1
RUN powershell .\install.ps1

# Install dependencies.
RUN choco install -y nmap jdk7 &amp;amp;&amp;amp; \
    choco install -y maven -version 3.2.5

# Build Pcap4J.
RUN powershell -Command Invoke-WebRequest https://github.com/kaitoy/pcap4j/archive/v1.zip -OutFile pcap4j.zip &amp;amp;&amp;amp; \
    powershell -Command Expand-Archive -Path pcap4j.zip -DestinationPath .
WORKDIR pcap4j-1
RUN powershell -Command &amp;quot;mvn -P distribution-assembly install 2&amp;gt;&amp;amp;1 | Add-Content -Path build.log -PassThru&amp;quot;

# Collect libraries.
RUN mkdir bin &amp;amp;&amp;amp; \
    cd pcap4j-packetfactory-static &amp;amp;&amp;amp; \
    mvn -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeScope=compile dependency:copy-dependencies &amp;amp;&amp;amp; \
    mvn -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeGroupIds=ch.qos.logback dependency:copy-dependencies &amp;amp;&amp;amp; \
    cd ../pcap4j-distribution &amp;amp;&amp;amp; \
    mvn -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeArtifactIds=pcap4j-packetfactory-static,pcap4j-sample dependency:copy-dependencies

# Generate sample script. (C:\pcap4j\pcap4j-1\bin\capture.bat)
RUN echo @echo off &amp;gt; bin\capture.bat &amp;amp;&amp;amp; \
    echo &amp;quot;%JAVA_HOME%\bin\java&amp;quot; -cp C:\pcap4j\pcap4j-1\bin\pcap4j-core.jar;C:\pcap4j\pcap4j-1\bin\pcap4j-packetfactory-static.jar;C:\pcap4j\pcap4j-1\bin\pcap4j-sample.jar;C:\pcap4j\pcap4j-1\bin\jna.jar;C:\pcap4j\pcap4j-1\bin\slf4j-api.jar;C:\pcap4j\pcap4j-1\bin\logback-classic.jar;C:\pcap4j\pcap4j-1\bin\logback-core.jar org.pcap4j.sample.GetNextPacketEx &amp;gt;&amp;gt; bin\capture.bat
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;Dockerfileã«æ›¸ã„ãŸå‡¦ç†å†…å®¹ã¯&lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ã&lt;/a&gt;ã¨ã ã„ãŸã„åŒã˜ã€‚
ä»¥ä¸‹ã€Dockerfileæ›¸ã„ã¦ã„ã‚‹ã¨ãã«æ°—ä»˜ã„ãŸã“ã¨ã€‚&lt;/p&gt;

&lt;h4 id=&#34;tp4ã‹ã‚‰ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ&#34;&gt;TP4ã‹ã‚‰ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ&lt;/h4&gt;

&lt;blockquote&gt;
&lt;p&gt;WORKDIR ã‚„ ENV ã‚„ COPY ã§ãƒ‘ã‚¹ã®åŒºåˆ‡ã‚Šã¯ \ ä¸€ã¤ã ã¨æ¶ˆãˆã¡ã‚ƒã†ã®ã§ \ ã‹ / ã‚’ä½¿ã‚ãªã„ã¨ã„ã‘ãªã„ã€‚
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/docker/manage_windows_dockerfile&#34;&gt;ã“ã®ãƒšãƒ¼ã‚¸&lt;/a&gt;ã®å„ã‚³ãƒãƒ³ãƒ‰ã®&lt;strong&gt;Windows Considerations&lt;/strong&gt;ã«ã€&lt;code&gt;WORKDIR&lt;/code&gt;ã®ãƒ‘ã‚¹ã®åŒºåˆ‡ã‚Šã®ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ãªã„ã¨ã„ã‘ãªã„ã¨ã‹ã€&lt;code&gt;ADD&lt;/code&gt;ã®ãƒ‘ã‚¹ã®åŒºåˆ‡ã‚Šã¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã˜ã‚ƒãªã„ã¨ã„ã‘ãªã„ã¨ã‹æ›¸ã„ã¦ã‚ã‚‹ã€‚
TP4ã®ã¨ãã¯ãªã‹ã£ãŸã‚ˆã†ãªã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;WORKDIR ã‚„ COPY ã®ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ‘ã‚¹ã«çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãŸã„å ´åˆã€C:\hogeã€C:/hogeã€C:\hogeã€ã„ãšã‚Œã‚‚ãƒ€ãƒ¡ã€‚ ä»¥ä¸‹ã®æ§˜ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã“ã‚Œã¯ç›´ã£ãŸã€‚&lt;code&gt;WORKDIR c:\\pcap4j&lt;/code&gt;ã§è¡Œã‘ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;install.ps1ã®ä¸­ã§Chocolateyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’HTTPSã§å–ã£ã¦ã“ã‚ˆã†ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ™®é€šã«&lt;code&gt;choco install&lt;/code&gt;ã§ããŸã®ã§ã€HTTPSãŒä½¿ãˆãªã„åˆ¶é™ã¯æ¶ˆãˆãŸæ¨¡æ§˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹ã¨ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œ(å¤šåˆ†ãƒ¬ã‚¤ãƒ¤ã®ä½œæˆ)ãŒã™ã”ãé…ã„ã€‚
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œã¯ç›¸å¤‰ã‚ã‚‰ãšé‡ã„ã€‚ç‰¹ã«ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ãŒå¤šã„ã¨ãã¯ã™ã”ãé‡ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ã¯éå¸¸ã«é…ã„ã€‚30ç§’ä»¥ä¸Šã‹ã‹ã‚‹ã€‚
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#windows-server-containerså‘³è¦‹&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ã¯æ—©ããªã£ãŸã‘ã©ã¾ã 5ç§’ãã‚‰ã„ã‹ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;WORKDIR ã‚„ ENV ã§ç’°å¢ƒå¤‰æ•°ãŒå±•é–‹ã•ã‚Œãªã„ã€‚
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã“ã‚Œã¯ã¾ã ç›´ã£ã¦ã„ãªã„ã€‚&lt;code&gt;%tmp%&lt;/code&gt;ã€&lt;code&gt;%TMP%&lt;/code&gt;ã€&lt;code&gt;$TMP&lt;/code&gt;ã€&lt;code&gt;${TMP}&lt;/code&gt;ã€ã©ã‚Œã‚‚ã ã‚ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ C:\ ç›´ä¸‹ã« . ã§å§‹ã¾ã‚‹åå‰ã®ãƒ•ã‚©ãƒ«ãƒ€ä½œã‚‹ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§æ¶ˆãˆã¦ã‚‹ã€‚
&lt;div style=&#34;font-size: 0.5em; text-align: right;&#34;&gt;&lt;cite&gt;å¼•ç”¨å…ƒ: &lt;a href=&#34;https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/#pcap4j-on-windows-container&#34;&gt;TP4ã®ã¨ãã®ã‚¨ãƒ³ãƒˆãƒª&lt;/a&gt;&lt;/cite&gt;&lt;/div&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã“ã‚Œã¯å†ç¾ã—ãªã‹ã£ãŸã€‚ä»¥å‰ã®ã‚‚å‹˜é•ã„ã ã£ãŸã®ã‹ã‚‚ã—ã‚Œãªã„ã€‚
ãªã‚“ã«ã›ã‚ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®.m2ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ã‚¹ãŒ&lt;code&gt;C:\Users\ContainerAdministrator\.m2&lt;/code&gt;ã«ãªã£ãŸã®ã§æ°—ã«ã—ãªãã¦ã‚ˆããªã£ãŸã€‚&lt;/p&gt;

&lt;h4 id=&#34;ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼-hcsshim-importlayer-failed-in-win32-the-filename-or-extension-is-too-long-0xce&#34;&gt;ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼: hcsshim::ImportLayer failed in Win32: The filename or extension is too long. (0xce)&lt;/h4&gt;

&lt;p&gt;&lt;code&gt;choco install&lt;/code&gt;ã®å¾Œã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;re-exec error: exit status 1: output: time=&amp;quot;2016-07-09T19:57:22-07:00&amp;quot; level=error msg=&amp;quot;hcsshim::ImportLayer failed in Win32: The filename or extension is too long. (0xce) layerId=\\\\?\\C:\\ProgramData\\docker\\windowsfilter\\103de6bf1358c506510ad67990f09ec3e2f10f9e866e846df5a88c04f5edf7aa flavour=1 folder=C:\\Windows\\TEMP\\hcs719016711&amp;quot;
hcsshim::ImportLayer failed in Win32: The filename or extension is too long. (0xce) layerId=\\?\C:\ProgramData\docker\windowsfilter\103de6bf1358c506510ad67990f09ec3e2f10f9e866e846df5a88c04f5edf7aa flavour=1 folder=C:\Windows\TEMP\hcs719016711
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;èª¿ã¹ãŸã‚‰&lt;a href=&#34;https://github.com/docker/docker/issues/22449&#34;&gt;Dockerã®GitHub Issues&lt;/a&gt;ã«ç™»éŒ²ã•ã‚Œã¦ã„ãŸã€‚
ã“ã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚³ãƒ³ãƒ†ãƒŠãƒ›ã‚¹ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ã—ãŸã‚‰ç™ºç”Ÿã—ãªããªã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-powershell&#34;&gt;Invoke-WebRequest https://aka.ms/tp5/Update-Container-Host -OutFile update-containerhost.ps1
.\update-containerhost.ps1
Restart-Computer -Force
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;git-cloneã§ããªã„&#34;&gt;git cloneã§ããªã„&lt;/h4&gt;

&lt;p&gt;Pcap4Jã®ã‚½ãƒ¼ã‚¹ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‹ã£ãŸã‚“ã ã‘ã©ã€ãªãœã‹&lt;code&gt;git clone&lt;/code&gt;ãŒHTTPSã§ã‚‚GITãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã€‚
åŸå› ã‚’èª¿ã¹ã‚‹ã®ãŒé¢å€’ã§çµå±€zipã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã†ã«ã—ãŸã€‚&lt;/p&gt;

&lt;h4 id=&#34;æœªå®Ÿè£…ã®æ©Ÿèƒ½&#34;&gt;æœªå®Ÿè£…ã®æ©Ÿèƒ½&lt;/h4&gt;

&lt;p&gt;&lt;a href=&#34;https://docs.docker.com/engine/reference/builder/&#34;&gt;Dockerfileã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹&lt;/a&gt;ã«è¼‰ã£ã¦ã„ã¦ã€Windowså‘ã‘ã®ã‚µãƒ³ãƒ—ãƒ«ã‚‚æ›¸ã„ã¦ã‚ã‚‹ã®ã«ã€&lt;a href=&#34;https://docs.docker.com/engine/reference/builder/#/escape&#34;&gt;escapeãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–&lt;/a&gt;ã¨&lt;a href=&#34;https://docs.docker.com/engine/reference/builder/#/shell&#34;&gt;SHELLã‚³ãƒãƒ³ãƒ‰&lt;/a&gt;
ãŒä½¿ãˆãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•&#34;&gt;ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•&lt;/h2&gt;

&lt;p&gt;ã¨ã‚Šã‚ãˆãšä¸Šè¨˜Dockerfileã§Pcap4Jã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰ã¯ã§ããŸã€‚&lt;/p&gt;

&lt;p&gt;ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;docker run -it pcap4j cmd
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠå†…ã§&lt;code&gt;ipconfig&lt;/code&gt;ã™ã‚‹ã¨&lt;code&gt;vEthernet (Temp Nic Name)&lt;/code&gt;ã¨ã„ã†åã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\pcap4j\pcap4j-1\bin&amp;gt;ipconfig

Windows IP Configuration


Ethernet adapter vEthernet (Temp Nic Name):

   Connection-specific DNS Suffix  . : localdomain
   Link-local IPv6 Address . . . . . : fe80::59cf:1491:6f8e:30c8%18
   IPv4 Address. . . . . . . . . . . : 172.23.71.6
   Subnet Mask . . . . . . . . . . . : 255.240.0.0
   Default Gateway . . . . . . . . . : 172.16.0.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‘ã©Pcap4Jã‹ã‚‰ã¯è¦‹ãˆãªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\pcap4j\pcap4j-1\bin&amp;gt;capture.bat
org.pcap4j.sample.GetNextPacketEx.count: 5
org.pcap4j.sample.GetNextPacketEx.readTimeout: 10
org.pcap4j.sample.GetNextPacketEx.snaplen: 65536


18:49:00.582 [main] INFO  org.pcap4j.core.Pcaps - No NIF was found.
java.io.IOException: No NIF to capture.
        at org.pcap4j.sample.GetNextPacketEx.main(GetNextPacketEx.java:45)java:44)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠã«ã¯&lt;code&gt;ContainerAdministrator&lt;/code&gt;ã¨ã„ã†ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã¦ã€ã“ã‚Œã®æ¨©é™ãŒå¼±ã„ã›ã„ãªã‚“ã˜ã‚ƒãªã„ã‹ã¨ã€‚
ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã‚‚&lt;code&gt;Administrator&lt;/code&gt;ã¨ã„ã†ãƒ¦ãƒ¼ã‚¶ãŒã‚ã‚‹ã‚ˆã†ã ã£ãŸã®ã§ã€ã“ã£ã¡ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã™ã‚‹ã‚ˆã†å¥®é—˜ã—ãŸã€‚&lt;/p&gt;

&lt;h2 id=&#34;ã‚³ãƒ³ãƒ†ãƒŠå†…ã§administratorã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã—ãŸã„&#34;&gt;ã‚³ãƒ³ãƒ†ãƒŠå†…ã§Administratorã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã—ãŸã„&lt;/h2&gt;

&lt;h4 id=&#34;userã‚³ãƒãƒ³ãƒ‰&#34;&gt;USERã‚³ãƒãƒ³ãƒ‰&lt;/h4&gt;

&lt;p&gt;Dockerfileã®ã‚³ãƒãƒ³ãƒ‰ã«&lt;a href=&#34;https://docs.docker.com/engine/reference/builder/#/user&#34;&gt;USER&lt;/a&gt;ã¨ã„ã†ã®ãŒã‚ã‚‹ã®ã§ã€&lt;code&gt;USER Administrator&lt;/code&gt;ã‚’Dockerfileã®æœ«å°¾ã«è¿½åŠ ã—ã¦ã¿ãŸã‚‰ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;The daemon on this platform does not support the command &#39;user&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;userã‚ªãƒ—ã‚·ãƒ§ãƒ³&#34;&gt;&amp;ndash;userã‚ªãƒ—ã‚·ãƒ§ãƒ³&lt;/h4&gt;

&lt;p&gt;docker runã‚³ãƒãƒ³ãƒ‰ã«&lt;a href=&#34;https://docs.docker.com/compose/reference/run/&#34;&gt;&amp;ndash;user&lt;/a&gt;ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«è©¦ã—ã¦ã¿ãŸã¨ã“ã‚ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ç„¡è¦–ã•ã‚Œã¦&lt;code&gt;ContainerAdministrator&lt;/code&gt;ã§ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;docker run -it --user Administrator pcap4j cmd
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;runas&#34;&gt;runas&lt;/h4&gt;

&lt;p&gt;ã¡ã‚‡ã£ã¨ç™ºæƒ³ã®è»¢æ›ã‚’ã—ã¦ã€&lt;code&gt;ContainerAdministrator&lt;/code&gt;ã§ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã£ãŸå¾Œsudoã¿ãŸã„ãªã“ã¨ã‚’ã™ã‚Œã°ã„ã„ã‹ã¨æ€ã„ã€&lt;a href=&#34;https://technet.microsoft.com/en-us/library/bb490994.aspx&#34;&gt;runas&lt;/a&gt;ã‚³ãƒãƒ³ãƒ‰ã‚’è©¦ã—ãŸã‘ã©ã ã‚ã ã£ãŸã€‚
ã‚ˆãåˆ†ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼ãŒã§ã‚‹ã—ã€ãã‚‚ãã‚‚&lt;code&gt;Administrator&lt;/code&gt;ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒã‚ã‹ã‚‰ãªã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\pcap4j\pcap4j-1\bin&amp;gt;runas /user:Administrator cmd
Enter the password for Administrator:
Attempting to start cmd as user &amp;quot;92EC7B3B09B4\Administrator&amp;quot; ...
RUNAS ERROR: Unable to run - cmd
1326: The user name or password is incorrect.
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\pcap4j\pcap4j-1\bin&amp;gt;runas /user:&amp;quot;User Manager\Administrator&amp;quot; capture.bat
Enter the password for User Manager\Administrator:
RUNAS ERROR: Unable to acquire user password
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;enter-pssession&#34;&gt;Enter-PSSession&lt;/h4&gt;

&lt;p&gt;ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ã«è¡Œã£ãŸã‚‰&lt;a href=&#34;https://social.msdn.microsoft.com/Forums/en-US/0b6bd405-a235-4608-a06b-a09b9ba08b2e/runas-administrator?forum=windowscontainers&#34;&gt;Enter-PSSession&lt;/a&gt;ã‚’ä½¿ã†æ–¹æ³•ãŒæ›¸ã„ã¦ã‚ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://technet.microsoft.com/en-us/library/hh849707.aspx&#34;&gt;Enter-PSSession&lt;/a&gt;ã¯ãƒªãƒ¢ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«æ¥ç¶šã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§ã€&lt;code&gt;-ContainerName&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ãˆã°ã‚³ãƒ³ãƒ†ãƒŠã«ã‚‚æ¥ç¶šã§ãã‚‹ã€‚&lt;/p&gt;

&lt;p&gt;è©¦ã—ãŸã‚‰ã€ã‚³ãƒ³ãƒ†ãƒŠãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;powershell -command Enter-PSSession -ContainerName amazing_archimedes -RunAsAdministrator
Enter-PSSession : The input ContainerName amazing_archimedes does not exist, or the corresponding container is not running.
At line:1 char:1
+ Enter-PSSession -ContainerName amazing_archimedes -RunAsAdministrator
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (:) [Enter-PSSession], PSInvalidOperationException
    + FullyQualifiedErrorId : CreateRemoteRunspaceForContainerFailed,Microsoft.PowerShell.Commands.EnterPSSessionCommand
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://technet.microsoft.com/en-us/library/hh849719.aspx&#34;&gt;Invoke-Command&lt;/a&gt;ã‚‚ã‚³ãƒ³ãƒ†ãƒŠã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã§ãã‚‹ã®ã§è©¦ã—ã¦ã¿ãŸã‘ã©ã€åŒæ§˜ã®ã‚¨ãƒ©ãƒ¼ã€‚&lt;/p&gt;

&lt;p&gt;ã©ã†ã‚‚ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã§æ‰±ã†ã‚³ãƒ³ãƒ†ãƒŠã‚„ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã€dockerã‚³ãƒãƒ³ãƒ‰ãŒæ‰±ã†ã‚‚ã®ã¨ã¯åˆ¥ã«ãªã£ã¦ã„ã‚‹ã›ã„ã£ã½ã„ã€‚
ãã‚“ãªã“ã¨ãŒTP4ã®ã¨ãã«è¦‹ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ã‚ã£ãŸã®ã‚’æ€ã„å‡ºã—ãŸã€‚(ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯æ¶ˆãˆã¦ãŸã€‚)&lt;/p&gt;

&lt;p&gt;å®Ÿéš›ã€&lt;code&gt;docker ps&lt;/code&gt;ã§ã¯è¦‹ãˆã¦ã„ã‚‹ã‚³ãƒ³ãƒ†ãƒŠãŒã€&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
a711497f29d8        pcap4j              &amp;quot;cmd&amp;quot;               13 minutes ago      Up 12 minutes                           amazing_archimedes
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‹ã‚‰ã ã¨è¦‹ãˆãªã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;powershell -command Get-Container
WARNING: Based on customer feedback, we are updating the Containers PowerShell module to better align with Docker. As part of that some cmdlet and parameter names may change in future releases. To learn more about these changes as well as to join in the design process or provide usage feedback please refer to http://aka.ms/windowscontainers/powershell
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ãã†ãªã‚‹ã¨ã€ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«ã¯&lt;code&gt;docker build&lt;/code&gt;ã«ã‚ãŸã‚‹ã‚‚ã®ãŒãªã„ã®ã§ã‚‚ã†ã©ã†ã—ã‚ˆã†ã‚‚ãªã„ã€‚&lt;/p&gt;

&lt;p&gt;ãã‚‚ãã‚‚ã€TP4ã®é ƒã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã¯&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/management/docker-powershell&#34;&gt;å»ƒæ­¢ã«ãªã£ã¦&lt;/a&gt;ã€&lt;a href=&#34;https://github.com/Microsoft/Docker-PowerShell/&#34;&gt;æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆ&lt;/a&gt;ã‚’é–‹ç™ºä¸­ã‚‰ã—ã„ã€‚ã‚„ã¯ã‚Šdockerã‚³ãƒãƒ³ãƒ‰ã¨ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§ã‚³ãƒ³ãƒ†ãƒŠã®ç›¸äº’é‹ç”¨ãŒã§ããªã„ä»•æ§˜ã«ãƒ¦ãƒ¼ã‚¶ã‹ã‚‰ç›¸å½“ã¤ã£ã“ã¿ãŒã‚ã£ãŸã‚ˆã†ã ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Enter-PSSession&lt;/code&gt;ã‚„&lt;code&gt;Invoke-Command&lt;/code&gt;ã®&lt;code&gt;-ContainerName&lt;/code&gt;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ãã®å†…ä¿®æ­£ã•ã‚Œã‚‹ã§ã‚ã‚ã†ã€‚
ãã‚Œã¾ã§å¾…ã¤ã‹ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Pcap4J Meets Windows Containers</title>
          <link>https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/</link>
          <pubDate>Fri, 22 Jan 2016 17:46:43 -0700</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/</guid>
          <description>

&lt;p&gt;&lt;strong&gt;&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/about/about_overview&#34;&gt;Windows Containers&lt;/a&gt;&lt;/strong&gt; ã§ &lt;strong&gt;&lt;a href=&#34;https://github.com/kaitoy/pcap4j&#34;&gt;Pcap4J&lt;/a&gt;&lt;/strong&gt; ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ãŸè©±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;windows-containersã¨ã¯&#34;&gt;Windows Containersã¨ã¯&lt;/h2&gt;

&lt;p&gt;Windows Containersã¯ã€MicrosoftãŒ&lt;a href=&#34;https://www.docker.com/company&#34;&gt;Docker, Inc&lt;/a&gt;ã¨ææºã—ã¦é–‹ç™ºã—ã¦ã„ã‚‹&lt;a href=&#34;http://www.sophia-it.com/content/%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E6%8A%80%E8%A1%93&#34;&gt;ã‚³ãƒ³ãƒ†ãƒŠæŠ€è¡“&lt;/a&gt;ã§ã€Windowsç‰ˆ&lt;a href=&#34;https://www.docker.com/&#34;&gt;Docker&lt;/a&gt;ã¨ã‚‚è¨€ã‚ã‚Œã‚‹æ©Ÿèƒ½ã€‚
ä»Šå¹´ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ &lt;strong&gt;Windows Server 2016&lt;/strong&gt; ã«å®Ÿè£…ã•ã‚Œã‚‹äºˆå®šã§ã€ãã®3ã¤ã‚ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã‚ã‚‹ &lt;strong&gt;Windows Server 2016 Technical Preview 3&lt;/strong&gt; (2015/8/19å…¬é–‹)ã‹ã‚‰è©•ä¾¡ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;Windows Containersã«ã¯æ¬¡ã®äºŒç¨®é¡ãŒã‚ã‚‹ã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Windows Server Containers&lt;/p&gt;

&lt;p&gt;ãƒ—ãƒ­ã‚»ã‚¹ã¨åå‰ç©ºé–“ã®åˆ†é›¢ã‚’å®Ÿç¾ã™ã‚‹æ©Ÿèƒ½ã§ã€ã“ã‚Œã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠã¯ã‚«ãƒ¼ãƒãƒ«ã‚’ãƒ›ã‚¹ãƒˆã¨å…±æœ‰ã™ã‚‹ã€‚
ã¤ã¾ã‚Šæœ¬å®¶Dockerã«è¿‘ã„å½¢ã®æ©Ÿèƒ½ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Hyper-V Containers&lt;/p&gt;

&lt;p&gt;ãã‚Œãã‚Œã®ã‚³ãƒ³ãƒ†ãƒŠã‚’è»½é‡åŒ–ã•ã‚ŒãŸHyper-Vã®ä»®æƒ³ãƒã‚·ãƒ³ã£ã½ã„ã‚‚ã®ã®ä¸Šã§å‹•ã‹ã™æ©Ÿèƒ½ã€‚
ã“ã®ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œã«ã¯Hyper-VãŒå¿…è¦ã€‚
Windows Server Containersã‚ˆã‚Šã‚³ãƒ³ãƒ†ãƒŠé–“ã®åˆ†é›¢æ€§ãŒé«˜ãã€ã‚«ãƒ¼ãƒãƒ«ã®å…±æœ‰ã‚‚ã—ãªã„ãŒã€ãã‚‚ãã‚‚ãã‚Œã£ã¦ã‚³ãƒ³ãƒ†ãƒŠãªã®?&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã©ã¡ã‚‰ã‚‚åŒã˜ã‚ˆã†ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ“ä½œã§ãã€ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã¯&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/reference/ps_docker_comparison&#34;&gt;Powershellã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã¨Dockerã‚³ãƒãƒ³ãƒ‰ã®äºŒç¨®é¡ãŒã‚ã‚‹&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ã‚ˆã‚Šè©³ã—ãã¯ã€&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/about/about_overview&#34;&gt;Microsoftã«ã‚ˆã‚‹è§£èª¬&lt;/a&gt;ã‚„&lt;a href=&#34;http://www.atmarkit.co.jp/ait/articles/1512/11/news022.html&#34;&gt;@ITã®ã“ã®è¨˜äº‹&lt;/a&gt;ãŒã‚ã‹ã‚Šã‚„ã™ã„ã€‚
ã¾ãŸã€&lt;a href=&#34;http://qiita.com/Arturias/items/3e82de8328067d0e03a3&#34;&gt;Qiitaã®ã“ã®è¨˜äº‹&lt;/a&gt;ãŒDockerã¨Windows Server Containersã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’è©³ç´°ã«èª¬æ˜ã—ã¦ã„ã¦é¢ç™½ã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;windows-containersã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&#34;&gt;Windows Containersã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—&lt;/h2&gt;

&lt;p&gt;ã¾ãšã€Windows 7 x64ã®ãƒãƒ¼ãƒˆPCã«VMware Player 7.1.0ã‚’å…¥ã‚Œã¦Windows 10 x64ç”¨ã®VM(CPU2ã¤ã¨ãƒ¡ãƒ¢ãƒª2.5GB)ã‚’ä½œã‚Šã€ãã“ã«2015/11/19ã«å…¬é–‹ã•ã‚ŒãŸ &lt;strong&gt;Windows Server 2016 Technical Preview 4&lt;/strong&gt; ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚
ã‚³ãƒãƒ³ãƒ‰ã§ã„ã‚ã„ã‚è¨­å®šã™ã‚‹ã®æ…£ã‚Œã¦ã„ãªã„ã®ã§GUI(Desktop Experience)ä»˜ãã§ã€‚
(ãƒªãƒ¢ãƒ¼ãƒˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ä½¿ãˆã°ã‚ˆã‹ã£ãŸã®ã‹ã‚‚ã—ã‚Œãªã„ã‘ã©ã€‚)
ãƒ­ã‚±ãƒ¼ãƒ«ã¯è‹±èªä»¥å¤–ã¯å•é¡ŒãŒèµ·ããã†ãªã®ã§è‹±èªã§ã€‚&lt;/p&gt;

&lt;p&gt;ã“ã®VMã«ã€&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/quick_start/inplace_setup&#34;&gt;Microsoftã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰&lt;/a&gt;ã¨&lt;a href=&#34;http://www.atmarkit.co.jp/ait/articles/1512/14/news006.html&#34;&gt;@ITã®è¨˜äº‹&lt;/a&gt;ã‚’å‚ç…§ã—ãªãŒã‚‰Windows Containersã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã€‚&lt;/p&gt;

&lt;p&gt;å¾Œè€…ã®è¨˜äº‹ã«ã‚ˆã‚‹ã¨ã€Hyper-V Containersã‚’VMä¸Šã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ã«ã¯ã€&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/hyperv_on_windows/user_guide/nesting&#34;&gt;Nested Virtualization&lt;/a&gt;ã¨ã„ã†Hyper-Vã®VMã®ä¸Šã§Hyper-Vã‚’å‹•ã‹ã™æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã—ãŸãƒ›ã‚¹ãƒˆä¸Šã®Hyper-V VMã‚’ä½¿ã‚ãªã„ã¨ã„ã‘ãªã„ã‚ˆã†ãªã®ã§ã€Windows Server Containersã®æ–¹ã‚’è©¦ã™ã“ã¨ã«ã€‚&lt;/p&gt;

&lt;p&gt;Windows Server Containersã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹æ‰‹é †ã¯ä»¥ä¸‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;VMä¸Šã§ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é–‹ã„ã¦ &lt;code&gt;powershell start-process powershell -Verb runas&lt;/code&gt; ã‚’å®Ÿè¡Œã€‚&lt;/li&gt;
&lt;li&gt;é’ã„ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã®ã§ãã“ã§ &lt;code&gt;wget -uri https://aka.ms/tp4/Install-ContainerHost -OutFile C:\Install-ContainerHost.ps1&lt;/code&gt; ã‚’å®Ÿè¡Œã€‚&lt;code&gt;Install-ContainerHost.ps1&lt;/code&gt; ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã€‚&lt;/li&gt;
&lt;li&gt;é’ã„ãƒ‘ãƒ¯ãƒ¼ã‚·ã‚§ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ &lt;code&gt;C:\Install-ContainerHost.ps1&lt;/code&gt; ã‚’å®Ÿè¡Œã™ã‚‹ã¨Windows Server Containersã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå§‹ã¾ã‚‹ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&#34;https://www.kaitoy.xyz/images/pcap4j-meets-windows-containers/install.png&#34; alt=&#34;install.png&#34; /&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;é€”ä¸­å†èµ·å‹•ãŒä¸€å›ã‚ã£ã¦ã€ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†ãŒå†é–‹ã—ãŸã€‚
å…¨éƒ¨ã§2æ™‚é–“ä»¥ä¸Šã‹ã‹ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ä»®æƒ³Ethernetã‚¹ã‚¤ãƒƒãƒæ¥ç¶šã®è¿½åŠ ã«å¤±æ•—ã—ãŸã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‘ã©ãªã‚“ãªã‚“ã ã‚ã†ã€‚
&lt;code&gt;ipconfig&lt;/code&gt; ã®å‡ºåŠ›ã«ã‚ˆã‚‹ã¨ &lt;code&gt;vEthernet&lt;/code&gt; ã¨ã„ã†Dockerã®&lt;a href=&#34;https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/#docker-network&#34;&gt;virtual Ethernet bridge&lt;/a&gt;ã«ã‚ãŸã‚‹ã‚‚ã®ã¯ã¡ã‚ƒã‚“ã¨ä½œã‚‰ã‚Œã¦ã„ã‚‹ã¿ãŸã„ãªã‚“ã ã‘ã©ã€‚&lt;/p&gt;

&lt;h2 id=&#34;windows-server-containerså‘³è¦‹&#34;&gt;Windows Server Containerså‘³è¦‹&lt;/h2&gt;

&lt;p&gt;ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ &lt;code&gt;docker images&lt;/code&gt; ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ—¢ã« &lt;code&gt;windowsservercore&lt;/code&gt; ã¨ã„ã†ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
windowsservercore   10.0.10586.0        6801d964fda5        11 weeks ago        0 B
windowsservercore   latest              6801d964fda5        11 weeks ago        0 B
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;docker run -it windowsservercore cmd&lt;/code&gt; ã‚’å®Ÿè¡Œã™ã‚‹ã¨ &lt;code&gt;windowsservercore&lt;/code&gt; ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ãã®ä¸Šã§ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èµ·å‹•ã§ãã‚‹ã€‚
ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ã¯éå¸¸ã«é…ã„ã€‚30ç§’ä»¥ä¸Šã‹ã‹ã‚‹ã€‚ã“ã‚Œã¯ä»Šã®æ™‚ç‚¹ã§ã®&lt;a href=&#34;https://msdn.microsoft.com/virtualization/windowscontainers/about/work_in_progress#windows-containers-start-slowly&#34;&gt;åˆ¶é™&lt;/a&gt;ã‚‰ã—ã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code&gt;docker login --help&lt;/code&gt; ã™ã‚‹ã¨ã‚ã‹ã‚‹ãŒã€ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ &lt;code&gt;https://registry-win-tp3.docker.io/v1/&lt;/code&gt; ã¨ã„ã†ä»®ã£ã½ã„ã‚µãƒ¼ãƒã«ã‚ã£ã¦ã€&lt;code&gt;docker search *&lt;/code&gt; ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãã“ã«ç™»éŒ²ã•ã‚ŒãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒªã‚¹ãƒˆãŒè¦‹ã‚Œã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;C:\Users\Administrator&amp;gt;docker search *
NAME                 DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
microsoft/aspnet     ASP.NET 5 framework installed in a Windows...   1         [OK]       [OK]
microsoft/django     Django installed in a Windows Server Core ...   1                    [OK]
microsoft/dotnet35   .NET 3.5 Runtime installed in a Windows Se...   1         [OK]       [OK]
microsoft/golang     Go Programming Language installed in a Win...   1                    [OK]
microsoft/httpd      Apache httpd installed in a Windows Server...   1                    [OK]
microsoft/iis        Internet Information Services (IIS) instal...   1         [OK]       [OK]
microsoft/mongodb    MongoDB installed in a Windows Server Core...   1                    [OK]
microsoft/mysql      MySQL installed in a Windows Server Core b...   1                    [OK]
microsoft/nginx      Nginx installed in a Windows Server Core b...   1                    [OK]
microsoft/node       Node installed in a Windows Server Core ba...   1                    [OK]
microsoft/php        PHP running on Internet Information Servic...   1                    [OK]
microsoft/python     Python installed in a Windows Server Core ...   1                    [OK]
microsoft/rails      Ruby on Rails installed in a Windows Serve...   1                    [OK]
microsoft/redis      Redis installed in a Windows Server Core b...   1                    [OK]
microsoft/ruby       Ruby installed in a Windows Server Core ba...   1                    [OK]
microsoft/sqlite     SQLite installed in a Windows Server Core ...   1                    [OK]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã‚Œã‚‰ã¯ã¡ã‚ƒã‚“ã¨ &lt;code&gt;docker pull&lt;/code&gt; ã—ã¦ä½¿ãˆã‚‹ã€‚
ã‘ã©å¤šåˆ† &lt;code&gt;docker push&lt;/code&gt; ã¯ã§ããªã„ã€‚&lt;/p&gt;

&lt;h2 id=&#34;pcap4j-on-windows-container&#34;&gt;Pcap4J on Windows Container&lt;/h2&gt;

&lt;p&gt;çµè«–ã‹ã‚‰è¨€ã†ã¨ã€ä»¥ä¸‹ã® &lt;code&gt;Dockerfile&lt;/code&gt; ã‚’æ›¸ã„ã¦ &lt;code&gt;docker build&lt;/code&gt; ã—ã¦Pcap4Jã‚’ã‚³ãƒ³ãƒ†ãƒŠä¸Šã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã“ã‚ã¾ã§ã¯ã§ããŸãŒã€ãã‚Œã‚’å®Ÿè¡Œã—ã¦ã‚‚NIFãŒå…¨ãæ¤œå‡ºã§ããšã€ã‚ˆã£ã¦ãƒ‘ã‚±ãƒƒãƒˆã‚­ãƒ£ãƒ—ãƒãƒ£ã‚‚å®Ÿè¡Œã§ããªã‹ã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;#
# Dockerfile for Pcap4J on Windows
#

FROM windowsservercore:latest
MAINTAINER Kaito Yamada &amp;lt;kaitoy@pcap4j.org&amp;gt;

# Install Chocolatey.
RUN mkdir C:\pcap4j
WORKDIR /pcap4j
ADD https://chocolatey.org/install.ps1 install.ps1
RUN powershell .\install.ps1

# Install dependencies.
RUN choco install -y nmap maven git jdk7

# Build Pcap4J.
RUN git clone git://github.com/kaitoy/pcap4j.git
WORKDIR pcap4j
RUN powershell -NoProfile -ExecutionPolicy Bypass -Command &amp;quot;mvn &#39;-Dmaven.repo.local=C:\pcap4j\repo&#39; -P distribution-assembly install 2&amp;gt;&amp;amp;1 | add-content -Path build.log -pass

# Collect libraries.
RUN mkdir bin &amp;amp;&amp;amp; \
    cd pcap4j-packetfactory-static &amp;amp;&amp;amp; \
    mvn -Dmaven.repo.local=C:\pcap4j\repo -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeScope=compile dependency:copy-dependencies &amp;amp;&amp;amp; \
    mvn -Dmaven.repo.local=C:\pcap4j\repo -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeGroupIds=ch.qos.logback dependency:copy-dependencies &amp;amp;&amp;amp; \
    cd ../pcap4j-distribution &amp;amp;&amp;amp; \
    mvn -Dmaven.repo.local=C:\pcap4j\repo -DoutputDirectory=..\bin -Dmdep.stripVersion=true -DincludeArtifactIds=pcap4j-packetfactory-static,pcap4j-sample dependency:copy-dependencies

# Generate sample script. (C:\pcap4j\pcap4j\bin\capture.bat)
RUN echo @echo off &amp;gt; bin\capture.bat &amp;amp;&amp;amp; \
    echo &amp;quot;%JAVA_HOME%\bin\java&amp;quot; -cp C:\pcap4j\pcap4j\bin\pcap4j-core.jar;C:\pcap4j\pcap4j\bin\pcap4j-packetfactory-static.jar;C:\pcap4j\pcap4j\bin\pcap4j-sample.jar;C:\pcap4j\pcap4j\bin\jna.jar;C:\pcap4j\pcap4j\bin\slf4j-api.jar;C:\pcap4j\pcap4j\bin\logback-classic.jar;C:\pcap4j\pcap4j\bin\logback-core.jar org.pcap4j.sample.GetNextPacketEx &amp;gt;&amp;gt; bin\capture.bat
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã“ã® &lt;code&gt;Dockerfile&lt;/code&gt; ã§ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã ã„ãŸã„ä»¥ä¸‹ã€‚&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;https://chocolatey.org/&#34;&gt;Chocolatey&lt;/a&gt;ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://nmap.org/&#34;&gt;Nmap&lt;/a&gt;ã¨&lt;a href=&#34;https://maven.apache.org/&#34;&gt;Maven&lt;/a&gt;ã¨&lt;a href=&#34;https://git-scm.com/&#34;&gt;Git&lt;/a&gt;ã¨JDK7ã‚’Chocolateyã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚&lt;/li&gt;
&lt;li&gt;Pcap4Jã®ã‚½ãƒ¼ã‚¹ã‚’ &lt;code&gt;git clone&lt;/code&gt; ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚&lt;/li&gt;
&lt;li&gt;Mavenã§Pcap4Jã®ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã€‚&lt;/li&gt;
&lt;li&gt;Pcap4Jã®ã‚µãƒ³ãƒ—ãƒ«ã‚¯ãƒ©ã‚¹ã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”Ÿæˆã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;2ã§Nmapã¯&lt;a href=&#34;http://www.winpcap.org/&#34;&gt;WinPcap&lt;/a&gt;ã®ä»£ã‚ã‚Šã«å…¥ã‚Œã¦ã„ã‚‹ã€‚
GUIç„¡ã—ã®ç’°å¢ƒã§WinPcapã‚’Chocolateyã§å…¥ã‚Œã‚ˆã†ã¨ã—ã¦ã‚‚ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚Šã—ãªã‹ã£ãŸã‚Šã—ã¦ã€ã—ã‹ã‚‚ã©ã¡ã‚‰ã«ã›ã‚ˆæ­£å¸¸ã«å…¥ã‚‰ãªã„ã€‚
ã“ã‚Œã¯WinPcapã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãŒã‚µã‚¤ãƒ¬ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ã‹ã‚‰ã€‚
Nmapã¯ã‚µã‚¤ãƒ¬ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¦ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†ä¸­ã«WinPcapã‚’å…¥ã‚Œã¦ãã‚Œã‚‹ã®ã§ã‚ã‚ŠãŒãŸã„ã€‚&lt;/p&gt;

&lt;p&gt;ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹ã¨ã€å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œ(å¤šåˆ†ãƒ¬ã‚¤ãƒ¤ã®ä½œæˆ)ãŒã™ã”ãé…ã„ã€‚
&lt;code&gt;RUN choco install -y nmap maven git jdk7&lt;/code&gt; ã®å¾Œã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã¾ã§30åˆ†ãã‚‰ã„å›ºã¾ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã¾ãŸã€&lt;code&gt;Dockerfile&lt;/code&gt; ã‚’æ›¸ã„ã¦ã„ã¦ä»¥ä¸‹ã®ãƒã‚°ã«æ‚©ã¾ã•ã‚ŒãŸã€‚&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;WORKDIR&lt;/code&gt; ã‚„ &lt;code&gt;ENV&lt;/code&gt; ã§ç’°å¢ƒå¤‰æ•°ãŒå±•é–‹ã•ã‚Œãªã„ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;  ENV hoge %tmp%
  RUN echo %hoge%
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã¨ã™ã‚‹ã¨ &lt;code&gt;%tmp%&lt;/code&gt; ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;WORKDIR&lt;/code&gt; ã‚„ &lt;code&gt;ENV&lt;/code&gt; ã‚„ &lt;code&gt;COPY&lt;/code&gt; ã§ãƒ‘ã‚¹ã®åŒºåˆ‡ã‚Šã¯ &lt;code&gt;\&lt;/code&gt; ä¸€ã¤ã ã¨æ¶ˆãˆã¡ã‚ƒã†ã®ã§ &lt;code&gt;\\&lt;/code&gt; ã‹ &lt;code&gt;/&lt;/code&gt; ã‚’ä½¿ã‚ãªã„ã¨ã„ã‘ãªã„ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;code&gt;WORKDIR&lt;/code&gt; ã‚„ &lt;code&gt;COPY&lt;/code&gt; ã®ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ‘ã‚¹ã«çµ¶å¯¾ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãŸã„å ´åˆã€&lt;code&gt;C:\hoge&lt;/code&gt;ã€&lt;code&gt;C:/hoge&lt;/code&gt;ã€&lt;code&gt;C:\\hoge&lt;/code&gt;ã€ã„ãšã‚Œã‚‚ãƒ€ãƒ¡ã€‚
ä»¥ä¸‹ã®æ§˜ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;  GetFileAttributesEx \\?\Volume{67df3c84-a0ef-11e5-9a63-000c2976fbc3}\C:: The filename, directory name, or volume label syntax is incorrect.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;UNIXå¼ã« &lt;code&gt;/hoge&lt;/code&gt; ã¨ã™ã‚‹ã¨ã„ã‘ã‚‹ã€‚Cä»¥å¤–ã®ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’æŒ‡å®šã—ãŸã„ã¨ãã¯ã©ã†ã™ã‚‹ã‚“ã ã‚ã†ã€‚&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ &lt;code&gt;C:\&lt;/code&gt; ç›´ä¸‹ã« &lt;code&gt;.&lt;/code&gt; ã§å§‹ã¾ã‚‹åå‰ã®ãƒ•ã‚©ãƒ«ãƒ€ä½œã‚‹ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§æ¶ˆãˆã¦ã‚‹ã€‚
&lt;code&gt;.&lt;/code&gt; ã§å§‹ã¾ã‚‹åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ &lt;code&gt;C:\&lt;/code&gt; ç›´ä¸‹ã˜ã‚ƒãªãã¦ã‚‚æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§æ¶ˆãˆã¦ã‚‹ã€‚
Mavenã®ãƒªãƒã‚¸ãƒˆãƒªãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ &lt;code&gt;C:\.m2\&lt;/code&gt; ä»¥ä¸‹ã«ã§ãã‚‹ã®ã§ã¯ã¾ã‚‹ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ã“ã‚Œã‚‰ã®ãƒã‚°ã‚’ä¹—ã‚Šè¶Šãˆã¦é ‘å¼µã£ã¦ &lt;code&gt;Dockerfile&lt;/code&gt; æ›¸ã„ãŸã®ã«ã€NIFã®æ¤œå‡ºã™ã‚‰ã§ããªã‹ã£ãŸã¨ã„ã†å“€ã—ã„çµæœã€‚
&lt;code&gt;pcap_lookupdev&lt;/code&gt; ãŒä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ã‚’åã„ã¦ &lt;code&gt;NULL&lt;/code&gt; ã‚’è¿”ã—ã¦ãã¦ãŸã®ã§ã€ãªã‚“ã¨ãªãã‚³ãƒ³ãƒ†ãƒŠã®NIFã«é•·ã™ãã‚‹åå‰ãŒã¤ã„ã¦ã„ã¦æ¤œå‡ºå¤±æ•—ã—ã¦ã„ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã¨ã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;PacketGetAdapterNames: The data area passed to a system call is too small. (122)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;å› ã¿ã«ã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰è¦‹ãˆã‚‹NIFã¯ä¸€ã¤ã§ã€ä»¥ä¸‹ã®æ§‹æˆã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;Ethernet adapter vEthernet (Virtual Switch-d206475ce13256766b9a16383540a740fe31da8d20499349fe98693393a8490f-0):

   Connection-specific DNS Suffix  . : localdomain
   Link-local IPv6 Address . . . . . : fe80::4086:d11e:5e6:28fe%26
   IPv4 Address. . . . . . . . . . . : 172.16.0.2
   Subnet Mask . . . . . . . . . . . : 255.240.0.0
   Default Gateway . . . . . . . . . : 172.16.0.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰ &lt;code&gt;www.google.com&lt;/code&gt; ã¨ã‹ã«pingå±Šã„ãŸã®ã§ã€ã“ã®NIFã¯ã¡ã‚ƒã‚“ã¨åƒã„ã¦ã„ã¯ãšãªã‚“ã ã‘ã©Pcap4Jã‹ã‚‰è¦‹ãˆãªã„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;br&gt;
&lt;br&gt;&lt;/p&gt;

&lt;p&gt;å¾Œæ—¥ä¸Šè¨˜ &lt;code&gt;Dockerfile&lt;/code&gt; ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ãŸã‚‰ã€&lt;code&gt;RUN powershell .\install.ps1&lt;/code&gt; ã§ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-text&#34;&gt;The request was aborted: Could not create SSL/TLS secure channel.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;install.ps1ã®ä¸­ã§Chocolateyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’HTTPSã§å–ã£ã¦ã“ã‚ˆã†ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹æ¨¡æ§˜ã€‚
Windows Containersã®&lt;a href=&#34;https://msdn.microsoft.com/en-us/virtualization/windowscontainers/about/work_in_progress#https-and-tls-are-not-supported&#34;&gt;ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ&lt;/a&gt;ã‚„&lt;a href=&#34;https://social.msdn.microsoft.com/Forums/en-US/c0d93dda-37b7-4a2c-9a78-55e4ba0b88f5/https-support-in-windowsservercore-image?forum=windowscontainers&#34;&gt;ãƒ•ã‚©ãƒ¼ãƒ©ãƒ &lt;/a&gt;ã«HTTPSãŒä½¿ãˆãªã„ã¨ã„ã†åˆ¶é™ãŒè¼‰ã£ã¦ã„ã‚‹ã‘ã©ã“ã®ã›ã„?
ã¡ã‚‡ã£ã¨å‰ã«ã‚„ã£ãŸã¨ãã¯åŒã˜ &lt;code&gt;Dockerfile&lt;/code&gt; ã§ãƒ“ãƒ«ãƒ‰ã§ããŸã¯ãšãªã‚“ã ã‘ã©ã€‚&lt;/p&gt;

&lt;p&gt;è©¦ã—ã«ä»¥ä¸‹ã®å‡¦ç†ã‚’æŒŸã‚“ã§Chocolateyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’HTTPã§å–ã£ã¦ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‰Chocolateyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¾ã§ã¯ã§ããŸã€‚&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-cmd&#34;&gt;RUN powershell $(Get-Content install.ps1) -replace \&amp;quot;https\&amp;quot;,\&amp;quot;http\&amp;quot; &amp;gt; install.mod.ps1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ã‘ã© &lt;code&gt;choco install&lt;/code&gt; ãŒHTTPSä½¿ã†ã®ã§çµå±€é§„ç›®ã ã£ãŸã€‚&lt;/p&gt;

&lt;p&gt;ã‚‚ã†é¢å€’ãªã®ã§HTTPSã®åˆ¶é™ãŒã¨ã‚Œã‚‹ã®ã‚’ã¾ã¨ã†ã€‚&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Another way to capture LAN packets with pcap4j container</title>
          <link>https://www.kaitoy.xyz/2015/07/27/another-way-to-capture-lan-packets-with-pcap4j-container/</link>
          <pubDate>Mon, 27 Jul 2015 23:41:49 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2015/07/27/another-way-to-capture-lan-packets-with-pcap4j-container/</guid>
          <description>

&lt;p&gt;2 days ago, I posted an article &lt;a href=&#34;https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/&#34;&gt;How to capture packets on a local network with Pcap4J container&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Today, I was reading &lt;a href=&#34;https://docs.docker.com/reference/run/#network-settings&#34;&gt;Docker Docs&lt;/a&gt; and found another way to do it.
I&amp;rsquo;m writing about it here.&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h3 id=&#34;net-option-for-docker-run&#34;&gt;&amp;ndash;net option for docker run&lt;/h3&gt;

&lt;p&gt;When we start a docker container we use &lt;code&gt;docker run&lt;/code&gt; command. It accepts some options.
&lt;code&gt;--net&lt;/code&gt; is one of them, which is to set a network mode for a container.
Network modes &lt;code&gt;--net&lt;/code&gt; takes are &lt;code&gt;bridge&lt;/code&gt;, &lt;code&gt;none&lt;/code&gt;, &lt;code&gt;container:&amp;lt;name|id&amp;gt;&lt;/code&gt;, and &lt;code&gt;host&lt;/code&gt;.
The &lt;code&gt;bridge&lt;/code&gt; is the default mode where containers connect to the virtual Ethernet bridge &lt;code&gt;docker0&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What I use in this article is &lt;code&gt;host&lt;/code&gt; mode. If it&amp;rsquo;s specified containers use the host network stack,
which means Pcap4J on a container with the &lt;code&gt;host&lt;/code&gt; mode can see network interfaces on its host and sniff network traffic via them directly.&lt;/p&gt;

&lt;p&gt;This sounds easy. And more, according to the Docker Docs, the &lt;code&gt;host&lt;/code&gt; mode gives significantly better networking performance than the &lt;code&gt;bridge&lt;/code&gt; mode. But instead, &lt;code&gt;host&lt;/code&gt; is insecure. (See &lt;a href=&#34;https://docs.docker.com/reference/run/#mode-host&#34;&gt;Docker Docs - Mode: host&lt;/a&gt; for the details.)&lt;/p&gt;

&lt;h3 id=&#34;what-i-did&#34;&gt;What I did&lt;/h3&gt;

&lt;p&gt;In the same environment with &lt;a href=&#34;https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/#what-i-did:a3622224f79a64f15ba6f2b66e1010d9&#34;&gt;2 days ago&lt;/a&gt;, I did the followings:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Start a Pcap4J container with the network mode set to host&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;  [root@localhost ~]# docker run --name pcap4j-hostnet --net=host kaitoy/pcap4j:latest
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;That&amp;rsquo;s it.&lt;/p&gt;

&lt;p&gt;The above command create a container named &lt;code&gt;pcap4j-hostnet&lt;/code&gt; from the image &lt;code&gt;kaitoy/pcap4j:latest&lt;/code&gt; and execute &lt;code&gt;/bin/sh /usr/local/src/pcap4j/bin/capture.sh eth0 false&lt;/code&gt; in the container.
  The &lt;code&gt;capture.sh&lt;/code&gt; starts packet capturing on &lt;code&gt;eth0&lt;/code&gt; using Pcap4J.
  This &lt;code&gt;eth0&lt;/code&gt; is the interface of the docker host mashine because the network mode is set to &lt;code&gt;host&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What a easy way.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
</description>
        </item>
      
    
      
        <item>
          <title>How to capture packets on a local network with Pcap4J container</title>
          <link>https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/</link>
          <pubDate>Sat, 25 Jul 2015 19:05:06 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/</guid>
          <description>

&lt;p&gt;I&amp;rsquo;ll show how to capture packets on a local network with Pcap4J container.&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h3 id=&#34;docker-network&#34;&gt;Docker network&lt;/h3&gt;

&lt;p&gt;By default, Docker containers are not connected to a local network.
They are connected only to a virtual network Docker creates as like below:&lt;/p&gt;

&lt;p&gt;
&lt;figure &gt;
    
        &lt;img src=&#34;https://www.kaitoy.xyz/images/docker_network.jpg&#34; alt=&#34;Docker network&#34; width=&#34;500&#34; /&gt;
    
    
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;Refer to &lt;a href=&#34;https://docs.docker.com/articles/networking/&#34;&gt;the Docker doc&lt;/a&gt; for more details.&lt;/p&gt;

&lt;h3 id=&#34;what-s-a-challenge&#34;&gt;What&amp;rsquo;s a challenge&lt;/h3&gt;

&lt;p&gt;In order to let a Pcap4J container capture packets in a local (real) network,
we need to directly connect the container to the local network,
because docker0 forwards only packets the destinations of which are in the virtual network.&lt;/p&gt;

&lt;p&gt;How to do it is explained in some articles.
I referred to one of them, &lt;a href=&#34;http://blog.oddbit.com/2014/08/11/four-ways-to-connect-a-docker/&#34;&gt;Four ways to connect a docker container to a local network in Odd Bits blog&lt;/a&gt;, and succeeded in local network capturing using the 4th way.&lt;/p&gt;

&lt;p&gt;What I actually did is as follows.&lt;/p&gt;

&lt;h3 id=&#34;what-i-did&#34;&gt;What I did&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Environment&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;OS: CentOS 7.0 (on VMware Player 7.1.0 on Windows 7)&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# uname -a
Linux localhost.localdomain 3.10.0-229.el7.x86_64 #1 SMP Fri Mar 6 11:36:42 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;user: root&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Pcap4J version: 1.5.1-SNAPSHOT&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Docker version: 1.6.2&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Network interfaces:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;  [root@localhost ~]# ip addr show
  1: lo: &amp;lt;LOOPBACK,UP,LOWER_UP&amp;gt; mtu 65536 qdisc noqueue state UNKNOWN
      link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
      inet 127.0.0.1/8 scope host lo
         valid_lft forever preferred_lft forever
      inet6 ::1/128 scope host
         valid_lft forever preferred_lft forever
  2: eth0: &amp;lt;BROADCAST,MULTICAST,UP,LOWER_UP&amp;gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
      link/ether 00:0c:29:8e:95:27 brd ff:ff:ff:ff:ff:ff
      inet 192.168.1.123/24 brd 192.168.1.255 scope global dynamic eth0
         valid_lft 85975sec preferred_lft 85975sec
      inet6 2601:282:8102:2623:20c:29ff:fe8e:9527/64 scope global dynamic
         valid_lft 221469sec preferred_lft 221469sec
      inet6 fe80::20c:29ff:fe8e:9527/64 scope link
         valid_lft forever preferred_lft forever
  3: docker0: &amp;lt;NO-CARRIER,BROADCAST,MULTICAST,UP&amp;gt; mtu 1500 qdisc noqueue state DOWN
      link/ether 56:84:7a:fe:97:99 brd ff:ff:ff:ff:ff:ff
      inet 172.17.42.1/16 scope global docker0
         valid_lft forever preferred_lft forever
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Prerequisites:

&lt;ul&gt;
&lt;li&gt;Docker is installed and Docker service is started&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://man7.org/linux/man-pages/man1/nsenter.1.html&#34;&gt;nsenter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Step by step&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Preparing&lt;/p&gt;

&lt;p&gt;Create a utility script &lt;code&gt;docker-pid&lt;/code&gt; with the following content and place it somewhere in the &lt;code&gt;PATH&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;  #!/bin/sh
  exec docker inspect --format &#39;{{ .State.Pid }}&#39; &amp;quot;$@&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This script show the PID of a docker container by name or ID.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Pull the latest Pcap4J image&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# docker pull kaitoy/pcap4j
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Start a Pcap4J container with wait mode&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# docker run --name pcap4j-br kaitoy/pcap4j:latest eth1 true
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This container (&lt;code&gt;pcap4j-br&lt;/code&gt;) waits for a ping to &lt;code&gt;eth0&lt;/code&gt; on the container before staring capturing packets with &lt;code&gt;eth1&lt;/code&gt; on the container.
After the container starts, you will see messages like below:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;17:49:21.196 [main] INFO  org.pcap4j.core.Pcaps - 3 NIF(s) found.
eth0 (null)
IP address: /172.17.0.3
IP address: /fe80:0:0:0:42:acff:fe11:3
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The messages say IP address of &lt;code&gt;eth0&lt;/code&gt; is &lt;code&gt;172.17.0.3&lt;/code&gt;. We will use it later.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Configure a bridge interface&lt;/p&gt;

&lt;p&gt;Open another terminal and do the following:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# ip link add eth1 link eth0 type macvlan mode bridge
[root@localhost ~]# ip link set netns $(docker-pid pcap4j-br) eth1
[root@localhost ~]# nsenter -t $(docker-pid pcap4j-br) -n ip link set eth1 up
[root@localhost ~]# nsenter -t $(docker-pid pcap4j-br) -n ip route del default
[root@localhost ~]# nsenter -t $(docker-pid pcap4j-br) -n ip addr add 192.168.1.200/24 dev eth1
[root@localhost ~]# nsenter -t $(docker-pid pcap4j-br) -n ip route add default via 192.168.1.1 dev eth1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The above commands
1) add an interface &lt;code&gt;eth1&lt;/code&gt; bridged to &lt;code&gt;eth0&lt;/code&gt; to the Docker host machine,
2) move the &lt;code&gt;eth1&lt;/code&gt; to the name space of &lt;code&gt;pcap4j-br&lt;/code&gt;,
3) start &lt;code&gt;eth1&lt;/code&gt;,
4) delete the default route in &lt;code&gt;pcap4j-br&lt;/code&gt;,
5) add an IP address &lt;code&gt;192.168.1.200/24&lt;/code&gt; to &lt;code&gt;eth1&lt;/code&gt;,
6) and set the default route in &lt;code&gt;pcap4j-br&lt;/code&gt; to &lt;code&gt;192.168.1.1&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Too much hassle? I agree. Let&amp;rsquo;s use an awesome tool, &lt;a href=&#34;https://github.com/jpetazzo/pipework&#34;&gt;pipework&lt;/a&gt;.
This tool accomplishes the above 6 steps in easier way as shown below:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# git clone https://github.com/jpetazzo/pipework.git
[root@localhost ~]# cd pipework
[root@localhost pipework]# ./pipework eth0 pcap4j-br 192.168.1.200/24@192.168.1.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;pipework uses &lt;code&gt;ip netns exec&lt;/code&gt; command instead of &lt;code&gt;nsenter&lt;/code&gt; to manipulate a container.
Incidentally, &lt;code&gt;docker exec&lt;/code&gt; didn&amp;rsquo;t work for the step 3 due to an error &amp;ldquo;&lt;code&gt;RTNETLINK answers: Operation not permitted&lt;/code&gt;&amp;rdquo;.&lt;/p&gt;

&lt;p&gt;In addition, in my case, because I was doing it on a VMware VM, I needed to enable the promiscuous mode of &lt;code&gt;eth0&lt;/code&gt; (on the docker host machine) as follows:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# ip link set dev eth0 promisc on
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Try to poke the container&lt;/p&gt;

&lt;p&gt;You can now communicate with &lt;code&gt;pcap4j-br&lt;/code&gt; using &lt;code&gt;eth1&lt;/code&gt; &lt;strong&gt;from another host&lt;/strong&gt;.
I tried some pings from the VM&amp;rsquo;s host to &lt;code&gt;pcap4j-br&lt;/code&gt; and saw replies.&lt;/p&gt;

&lt;p&gt;Note that you can &lt;strong&gt;NOT&lt;/strong&gt; communicate with &lt;code&gt;pcap4j-br&lt;/code&gt; via &lt;code&gt;eth1&lt;/code&gt; from the docker host.
See the &lt;a href=&#34;http://blog.oddbit.com/2014/08/11/four-ways-to-connect-a-docker/&#34;&gt;Odd Bits blog&lt;/a&gt; for the details.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Start packet capturing&lt;/p&gt;

&lt;p&gt;Ping to &lt;code&gt;eth0&lt;/code&gt; of &lt;code&gt;pcap4j-br&lt;/code&gt; form the docker host to start packet capturing.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# ping -c 1 172.17.0.3
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Pcap4J container with runC</title>
          <link>https://www.kaitoy.xyz/2015/07/19/pcap4j-container-with-runc/</link>
          <pubDate>Sun, 19 Jul 2015 16:25:03 -0600</pubDate>
          <author>Kaito Yamada</author>
          <guid>https://www.kaitoy.xyz/2015/07/19/pcap4j-container-with-runc/</guid>
          <description>

&lt;p&gt;I tried to run a &lt;a href=&#34;https://registry.hub.docker.com/u/kaitoy/pcap4j/&#34;&gt;Pcap4J container&lt;/a&gt; with &lt;a href=&#34;https://runc.io/&#34;&gt;runC&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;



&lt;script async src=&#34;//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js&#34;&gt;&lt;/script&gt;
&lt;ins class=&#34;adsbygoogle&#34;
     style=&#34;display:block&#34;
     data-ad-client=&#34;ca-pub-6244473643910448&#34;
     data-ad-slot=&#34;1845600530&#34;
     data-ad-format=&#34;auto&#34;&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/p&gt;

&lt;h2 id=&#34;what-is-pcap4j&#34;&gt;What is Pcap4J?&lt;/h2&gt;

&lt;p&gt;Pcap4J is a Java library for capturing, crafting, and sending packets.
It&amp;rsquo;s actually a Java wrapper for libpcap/WinPcap plus packet analyzer.
We can see the details in its &lt;a href=&#34;https://github.com/kaitoy/pcap4j&#34;&gt;README&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;what-is-runc&#34;&gt;What is runC?&lt;/h2&gt;

&lt;p&gt;runC is a container runtime developed by Docker and released on June 22, 2015.
With runC, we can start a container from a docker image without the docker service or the docker command.&lt;/p&gt;

&lt;p&gt;That said, as of now, runC cannot directory use docker images.
We need to create a container form a docker image and export its filesystem before executing runC.&lt;/p&gt;

&lt;p&gt;It seems currently it supports only Linux but Windows support is in the roadmap.&lt;/p&gt;

&lt;h2 id=&#34;what-i-did&#34;&gt;What I did&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Environment

&lt;ul&gt;
&lt;li&gt;OS: CentOS 7 (on VMware Player 7.1.0 on Windows 7)&lt;/li&gt;
&lt;li&gt;user: root&lt;/li&gt;
&lt;li&gt;runC version: 0.2&lt;/li&gt;
&lt;li&gt;Pcap4J version: 1.5.1-SNAPSHOT&lt;/li&gt;
&lt;li&gt;Docker version: 1.6.2&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Prerequisites:

&lt;ul&gt;
&lt;li&gt;Docker is installed and Docker service is started&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://golang.org/&#34;&gt;Go&lt;/a&gt; is installed&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Step by step&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Install runC&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# mkdir -p $GOPATH/src/github.com/opencontainers
[root@localhost ~]# cd $GOPATH/src/github.com/opencontainers
[root@localhost opencontainers]# git clone https://github.com/opencontainers/runc
[root@localhost opencontainers]# cd runc
[root@localhost runc]# make &amp;amp;&amp;amp; make install
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Pull the Pcap4J docker image.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# docker pull kaitoy/pcap4j
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Create a container from the image.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# docker run -d --name pcap4j-tmp kaitoy/pcap4j:latest /bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Export the container&amp;rsquo;s file system.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost ~]# mkdir /tmp/pcap4j-test
[root@localhost pcap4j-test]# cd /tmp/pcap4j-test
[root@localhost pcap4j-test]# docker export pcap4j-tmp &amp;gt; pcap4j.tar
[root@localhost pcap4j-test]# tar xf pcap4j.tar
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We are now free from Docker. We don&amp;rsquo;t need Docker service, Docker command, Docker images, nor Docker containers anymore.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Generate a container config file.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost pcap4j-test]# runc spec | sed -e &#39;s/rootfs/\/root\/Desktop\/pcap4j-container/&#39; -e &#39;s/&amp;quot;readonly&amp;quot;: true/&amp;quot;readonly&amp;quot;: false/&#39; -e &#39;s/&amp;quot;NET_BIND_SERVICE&amp;quot;/&amp;quot;NET_BIND_SERVICE&amp;quot;,&amp;quot;NET_ADMIN&amp;quot;,&amp;quot;NET_RAW&amp;quot;/&#39; &amp;gt; config.json
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In the above command, &lt;code&gt;runc spec&lt;/code&gt; generates a standard container config file and &lt;code&gt;sed&lt;/code&gt; modifies it for Pcap4J.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Run a container.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;[root@localhost pcap4j-test]# runc
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;In the container, enable lo.&lt;/p&gt;

&lt;p&gt;As far as I saw, lo is the only interface we can use in a container.
So, I used it to capture packets.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sh-4.1# ifconfig lo up
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Generate a script to ping localhost and run it background.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sh-4.1# cd /usr/local/src/pcap4j/bin
sh-4.1# echo ping 127.0.0.1 \&amp;gt; /dev/null &amp;gt; pinger.sh
sh-4.1# chmod +x pinger.sh
sh-4.1# ./pinger.sh &amp;amp;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In the next step, ICMP packets from this pinger.sh will be captured.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Generate a script to start capturing packets with Pcap4J and run it.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-sh&#34;&gt;sh-4.1# cat runGetNextPacket.sh | sed -e &#39;s/eth0/lo/&#39; &amp;gt; foo.sh
sh-4.1# chmod +x foo.sh
sh-4.1# ./foo.sh
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We will see the ICMP packets are dumped on the terminal. That&amp;rsquo;s it!&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
      
    

  </channel>
</rss>
