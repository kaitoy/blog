<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="google-site-verification" content="9qs7VjxtSrYMqw5OElxCdKv_gnssSRi6acB2iYlZnGA" />

    
    
    <meta property="og:type" content="article">
    <meta property="og:title" content="Kubernetesのチュートリアルをやる | To Be Decided">
    <meta property="og:url" content="https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/">
    <link rel="canonical" href="https://www.kaitoy.xyz/2017/10/11/goslings-on-kubernetes-cont/">
    <meta property="og:description" content="「Kubernetes 1.8が出たので、Minikubeを触ってみる」の続き。 Minikubeのセットアップまではできたので、Kubernetes Basicsというチュートリアルをやりながら、Goslingsをデプロイする。 (adsbygoogle = window.adsbygoogle || []).push({}); Kubernetes Basics - 概要 Kubernetes Basicsは、公式のチュートリアルで、Kubernetesクラスタのオーケストレーションの基本を学ぶことができるもの。 以下の6つのモジュールからなる。 Kubernetesクラスタを作る アプリをデプロイする アプリを調査する アプリを公開する アプリをスケールする アプリをアップデートする チュートリアルで使うのはMinikubeだけど、自分でセットアップする必要はない。 Katacodaという、ブラウザ上でIT技術を学べるプラットフォームがあり、Kubernetes Basicsはそれを利用して、ブラウザ上のターミナルからホステッドMinikubeを操作できるようにしている。 が、前回の記事で自PC上にMinikubeをセットアップしたので、そちらを使うことにする。 Kubernetes Basics - モジュール 1: Kubernetesクラスタを作る Minikubeを起動してkubectlでクラスタの状態をみるだけのモジュール。 これは前回の記事でカバーしている。 Kubernetes Basics - モジュール 2: アプリをデプロイする アプリ(i.e. コンテナ)をデプロイするにはDeploymentオブジェクトを作る。 MasterはDeploymentのspecに従って各ノードにアプリのインスタンスをスケジューリングする。 Deploymentは、アプリが落ちたら再起動してくれる、つまりself-healingも実現する。 Deploymentオブジェクトを作るコマンドはkubectl run &lt;オブジェクト名&gt; --image=&lt;Dockerイメージ名&gt;。 Goslingsをこれでデプロイする。 Goslingsコンテナは3つの引数を受け取り、指定したポートでWebサーバを起動する。 --portオプションでそのポートをexposeするようにして、--の後にコンテナに渡す引数を記述する。 C:\Users\kaitoy&gt;kubectl run goslings --image=kaitoy/goslings:latest --port 8080 -- 8080 /tmp https://github.com/kaitoy/ deployment &quot;goslings&quot; created C:\Users\kaitoy&gt;kubectl get deployment NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE goslings 1 1 1 1 27s デプロイできた。 裏でPodも作られていて、アプリが起動されている。 C:\Users\kaitoy&gt;kubectl get pods NAME READY STATUS RESTARTS AGE goslings-1210510689-6w5tf 0/1 ContainerCreating 0 1m (kubectl getに指定するのは、省略形のdeployとかpoでもいい。) Podは隔離されたネットワークで動くので、そのままではPod同士は通信できるけど、外からはアクセスできない。 kubectlでプロキシを作ってやることで、外からアクセスできるようになる。 C:\Users\kaitoy&gt;kubectl proxy Starting to serve on 127.0.0.1:8001 これで、kube-apiserverへのプロキシがローカルホストで起動した。 この状態でhttp://localhost:8001を開くと、kube-apiserverのAPI一覧が見れる。 例えば、http://localhost:8001/versionにアクセスすると、以下のJSONデータが返ってくる。 { &quot;major&quot;: &quot;1&quot;, &quot;minor&quot;: &quot;7&quot;, &quot;gitVersion&quot;: &quot;v1.7.0&quot;, &quot;gitCommit&quot;: &quot;d3ada0119e776222f11ec7945e6d860061339aad&quot;, &quot;gitTreeState&quot;: &quot;dirty&quot;, &quot;buildDate&quot;: &quot;2017-10-04T09:25:40Z&quot;, &quot;goVersion&quot;: &quot;go1.8.3&quot;, &quot;compiler&quot;: &quot;gc&quot;, &quot;platform&quot;: &quot;linux/amd64&quot; } 各Podへも以下のURLでアクセスできる。 http://localhost:8001/api/v1/proxy/namespaces/default/pods/&lt;Pod名&gt;/ Pod名の部分はkubectl getで確認できる。 C:\Users\kaitoy&gt;kubectl get po NAME READY STATUS RESTARTS AGE goslings-1210510689-6w5tf 1/1 Running 0 24m 実際に、http://localhost:8001/api/v1/proxy/namespaces/default/pods/goslings-1210510689-6w5tf/をブラウザで開いたら、GoslingsのGUIが出た。 ヒュー。 Kubernetes Basics - モジュール 3: アプリを調査する 以下のコマンドで、アプリの状態を調査するモジュール。 kubectl get: リソースをリスト表示する。 kubectl describe: リソースの詳細情報を表示する。 kubectl logs: コンテナのログを表示する。docker logs的な。 kubectl exec: コンテナ内でコマンドを実行する。docker exec的な。 kubectl getはさんざんやったので飛ばして、kubectl describeしてみる。 C:\Users\kaitoy&gt;kubectl describe po Name: goslings-1210510689-6w5tf Namespace: default Node: minikube/192.168.99.100 Start Time: Tue, 10 Oct 2017 21:51:48 &#43;0900 Labels: pod-template-hash=1210510689 run=goslings Annotations: kubernetes.io/created-by={&quot;kind&quot;:&quot;SerializedReference&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;reference&quot;:{&quot;kind&quot;:&quot;ReplicaSet&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;name&quot;:&quot;goslings-1210510689&quot;,&quot;uid&quot;:&quot;c74b6518-adb9-11e7-88a0-08002798178d...">
    
    <meta property="og:image" content="https://www.kaitoy.xyz/images/kubernetes_goslings.png">
    
    
    <meta property="og:site_name" content="To Be Decided">

    <title>
      
      Kubernetesのチュートリアルをやる | To Be Decided
      
    </title>

    
    <link rel="shortcut icon" href="https://www.kaitoy.xyz/assets/favicon.ico">

    
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.kaitoy.xyz/index.xml">

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Marcellus+SC" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=PT+Sans" rel="stylesheet" type="text/css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/zenburn.min.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/styles.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/custom.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/table.css" rel="stylesheet">
    <link href="https://www.kaitoy.xyz/css/jquery.bxslider.css" rel="stylesheet" />

    
    

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-6244473643910448",
        enable_page_level_ads: true
      });
    </script>

    
  </head>
  <body>

    <header id="site-header">
      <div class="container">
        <h1 class="text-center">
          <a href="https://www.kaitoy.xyz" class="font-logo">To Be Decided</a>
        </h1>
      </div>
    </header>

    <main id="site-body">
      <div class="container">

<div class="row">
  <div class="col-md-9">
    <article id="post">
      <span class="date">Wed, Oct 11, 2017</span>
      <h2 class="title">Kubernetesのチュートリアルをやる</h2>

      <div class="eyecatch text-center">
        
        <img src="https://www.kaitoy.xyz/images/kubernetes_goslings.png" alt="Kubernetesのチュートリアルをやる">
        
      </div>

      <div class="content">
        

<p>「<a href="https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/">Kubernetes 1.8が出たので、Minikubeを触ってみる</a>」の続き。
Minikubeのセットアップまではできたので、<a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/">Kubernetes Basics</a>というチュートリアルをやりながら、<a href="https://kaitoy.github.io/goslings/">Goslings</a>をデプロイする。</p>

<p>



<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6244473643910448"
     data-ad-slot="1845600530"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</p>

<h2 id="kubernetes-basics-概要">Kubernetes Basics - 概要</h2>

<p>Kubernetes Basicsは、公式のチュートリアルで、Kubernetesクラスタのオーケストレーションの基本を学ぶことができるもの。
以下の6つのモジュールからなる。</p>

<ol>
<li>Kubernetesクラスタを作る</li>
<li>アプリをデプロイする</li>
<li>アプリを調査する</li>
<li>アプリを公開する</li>
<li>アプリをスケールする</li>
<li>アプリをアップデートする</li>
</ol>

<p>チュートリアルで使うのは<a href="https://github.com/kubernetes/minikube">Minikube</a>だけど、自分でセットアップする必要はない。
<a href="https://www.katacoda.com/">Katacoda</a>という、ブラウザ上でIT技術を学べるプラットフォームがあり、Kubernetes Basicsはそれを利用して、ブラウザ上のターミナルからホステッドMinikubeを操作できるようにしている。</p>

<p>が、<a href="https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/">前回の記事</a>で自PC上にMinikubeをセットアップしたので、そちらを使うことにする。</p>

<p><br></p>

<h2 id="kubernetes-basics-モジュール-1-kubernetesクラスタを作る">Kubernetes Basics - モジュール 1: Kubernetesクラスタを作る</h2>

<p>Minikubeを起動してkubectlでクラスタの状態をみるだけのモジュール。</p>

<p>これは<a href="https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/">前回の記事</a>でカバーしている。</p>

<h2 id="kubernetes-basics-モジュール-2-アプリをデプロイする">Kubernetes Basics - モジュール 2: アプリをデプロイする</h2>

<p>アプリ(i.e. コンテナ)をデプロイするにはDeploymentオブジェクトを作る。
MasterはDeploymentのspecに従って各ノードにアプリのインスタンスをスケジューリングする。
Deploymentは、アプリが落ちたら再起動してくれる、つまりself-healingも実現する。</p>

<p>Deploymentオブジェクトを作るコマンドは<code>kubectl run &lt;オブジェクト名&gt; --image=&lt;Dockerイメージ名&gt;</code>。
Goslingsをこれでデプロイする。</p>

<p>Goslingsコンテナは3つの引数を受け取り、指定したポートでWebサーバを起動する。
<code>--port</code>オプションでそのポートをexposeするようにして、<code>--</code>の後にコンテナに渡す引数を記述する。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl run goslings --image=kaitoy/goslings:latest --port 8080 -- 8080 /tmp https://github.com/kaitoy/
deployment &quot;goslings&quot; created

C:\Users\kaitoy&gt;kubectl get deployment
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   1         1         1            1           27s
</code></pre>

<p>デプロイできた。
裏でPodも作られていて、アプリが起動されている。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl get pods
NAME                        READY     STATUS              RESTARTS   AGE
goslings-1210510689-6w5tf   0/1       ContainerCreating   0          1m
</code></pre>

<p>(<code>kubectl get</code>に指定するのは、省略形の<code>deploy</code>とか<code>po</code>でもいい。)</p>

<p><br></p>

<p>Podは隔離されたネットワークで動くので、そのままではPod同士は通信できるけど、外からはアクセスできない。
kubectlでプロキシを作ってやることで、外からアクセスできるようになる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl proxy
Starting to serve on 127.0.0.1:8001
</code></pre>

<p>これで、kube-apiserverへのプロキシがローカルホストで起動した。
この状態で<code>http://localhost:8001</code>を開くと、kube-apiserverのAPI一覧が見れる。
例えば、<code>http://localhost:8001/version</code>にアクセスすると、以下のJSONデータが返ってくる。</p>

<pre><code class="language-json">{
  &quot;major&quot;: &quot;1&quot;,
  &quot;minor&quot;: &quot;7&quot;,
  &quot;gitVersion&quot;: &quot;v1.7.0&quot;,
  &quot;gitCommit&quot;: &quot;d3ada0119e776222f11ec7945e6d860061339aad&quot;,
  &quot;gitTreeState&quot;: &quot;dirty&quot;,
  &quot;buildDate&quot;: &quot;2017-10-04T09:25:40Z&quot;,
  &quot;goVersion&quot;: &quot;go1.8.3&quot;,
  &quot;compiler&quot;: &quot;gc&quot;,
  &quot;platform&quot;: &quot;linux/amd64&quot;
}
</code></pre>

<p><br></p>

<p>各Podへも以下のURLでアクセスできる。</p>

<pre><code class="language-text">http://localhost:8001/api/v1/proxy/namespaces/default/pods/&lt;Pod名&gt;/
</code></pre>

<p>Pod名の部分は<code>kubectl get</code>で確認できる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl get po
NAME                        READY     STATUS    RESTARTS   AGE
goslings-1210510689-6w5tf   1/1       Running   0          24m
</code></pre>

<p>実際に、<code>http://localhost:8001/api/v1/proxy/namespaces/default/pods/goslings-1210510689-6w5tf/</code>をブラウザで開いたら、GoslingsのGUIが出た。
ヒュー。</p>

<p><img src="/images/goslings-on-kubernetes-cont/goslings-proxy.png" alt="goslings-proxy" />
</p>

<h2 id="kubernetes-basics-モジュール-3-アプリを調査する">Kubernetes Basics - モジュール 3: アプリを調査する</h2>

<p>以下のコマンドで、アプリの状態を調査するモジュール。</p>

<ul>
<li>kubectl get: リソースをリスト表示する。</li>
<li>kubectl describe: リソースの詳細情報を表示する。</li>
<li>kubectl logs: コンテナのログを表示する。<code>docker logs</code>的な。</li>
<li>kubectl exec: コンテナ内でコマンドを実行する。<code>docker exec</code>的な。</li>
</ul>

<p><br></p>

<p><code>kubectl get</code>はさんざんやったので飛ばして、<code>kubectl describe</code>してみる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl describe po
Name:           goslings-1210510689-6w5tf
Namespace:      default
Node:           minikube/192.168.99.100
Start Time:     Tue, 10 Oct 2017 21:51:48 +0900
Labels:         pod-template-hash=1210510689
                run=goslings
Annotations:    kubernetes.io/created-by={&quot;kind&quot;:&quot;SerializedReference&quot;,&quot;apiVersion&quot;:&quot;v1&quot;,&quot;reference&quot;:{&quot;kind&quot;:&quot;ReplicaSet&quot;,&quot;namespace&quot;:&quot;default&quot;,&quot;name&quot;:&quot;goslings-1210510689&quot;,&quot;uid&quot;:&quot;c74b6518-adb9-11e7-88a0-08002798178d...
Status:         Running
IP:             172.17.0.2
Created By:     ReplicaSet/goslings-1210510689
Controlled By:  ReplicaSet/goslings-1210510689
Containers:
  goslings:
    Container ID:       docker://ce90460886c9555f7748bf59e8d9892f05c05020e7841154ee85713d6d9b0c2d
    Image:              kaitoy/goslings:latest
    Image ID:           docker-pullable://kaitoy/goslings@sha256:a587e3c5f202cdaa6d4d5a9c4f6a01ba6f4782e00277c3a18c77dd034daa0109
    Port:               8080/TCP
    Args:
      8080
      C:/Users/kaitoy/AppData/Local/Temp
    State:              Running
      Started:          Tue, 10 Oct 2017 21:55:54 +0900
    Ready:              True
    Restart Count:      0
    Environment:        &lt;none&gt;
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-cqq59 (ro)
Conditions:
  Type          Status
  Initialized   True
  Ready         True
  PodScheduled  True
Volumes:
  default-token-cqq59:
    Type:       Secret (a volume populated by a Secret)
    SecretName: default-token-cqq59
    Optional:   false
QoS Class:      BestEffort
Node-Selectors: &lt;none&gt;
Tolerations:    &lt;none&gt;
Events:
  FirstSeen     LastSeen        Count   From                    SubObjectPath                   Type            Reason
                Message
  ---------     --------        -----   ----                    -------------                   --------        ------
                -------
  45m           45m             1       default-scheduler                                       Normal          Scheduled               Successfully assigned goslings-1210510689-6w5tf to minikube
  45m           45m             1       kubelet, minikube                                       Normal          SuccessfulMountVolume   MountVolume.SetUp succeeded for volume &quot;default-token-cqq59&quot;
  45m           45m             1       kubelet, minikube       spec.containers{goslings}       Normal          Pulling
                pulling image &quot;kaitoy/goslings:latest&quot;
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Pulled
                Successfully pulled image &quot;kaitoy/goslings:latest&quot;
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Created
                Created container
  41m           41m             1       kubelet, minikube       spec.containers{goslings}       Normal          Started
                Started container
</code></pre>

<p>Podの詳細な情報が出た。
EventsのとこにKubernetesの頑張りが見えて面白い。</p>

<p><br></p>

<p>次は<code>kubectl logs</code>。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl logs goslings-1210510689-6w5tf

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v1.4.3.RELEASE)

2017-10-10 12:56:02.498  INFO 6 --- [           main] c.g.kaitoy.goslings.server.Application   : Starting Application on goslings-1210510689-6w5tf with PID 6 (/usr/local/src/goslings/goslings-server/build/libs/goslings-server-0.0.1.jar started by root in /usr/local/src/goslings)
(snip)
</code></pre>

<p>Goslingsは<a href="https://projects.spring.io/spring-boot/">Spring Boot</a>でできてるので、そのログが出てる。</p>

<p><br></p>

<p>次は<code>kubectl exec</code>を試す。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl exec goslings-1210510689-6w5tf env
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=goslings-1210510689-6w5tf
KUBERNETES_PORT_443_TCP=tcp://10.0.0.1:443
KUBERNETES_PORT_443_TCP_PROTO=tcp
KUBERNETES_PORT_443_TCP_PORT=443
KUBERNETES_PORT_443_TCP_ADDR=10.0.0.1
KUBERNETES_SERVICE_HOST=10.0.0.1
KUBERNETES_SERVICE_PORT=443
KUBERNETES_SERVICE_PORT_HTTPS=443
KUBERNETES_PORT=tcp://10.0.0.1:443
LANG=C.UTF-8
JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
JAVA_VERSION=8u111
JAVA_DEBIAN_VERSION=8u111-b14-2~bpo8+1
CA_CERTIFICATES_JAVA_VERSION=20140324
HOME=/root
</code></pre>

<p><code>env</code>コマンドを実行し、コンテナ内の環境変数一覧を出せた。
Kubernetes関係の変数が定義されていることが分かる。</p>

<p><code>docker exec</code>と同様に、<code>-it</code>オプションを付ければ、コンテナ内に「入る」こともできる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl exec -it goslings-1210510689-6w5tf sh
# ls
Dockerfile  _config.yml  build.log     goslings-server  gradle.properties  gradlew.bat
# exit

C:\Users\kaitoy&gt;
</code></pre>

<h2 id="kubernetes-basics-モジュール-4-アプリを公開する">Kubernetes Basics - モジュール 4: アプリを公開する</h2>

<p>Serviceオブジェクト扱うモジュール。</p>

<p>例えば、以下のような状況にあるとする。</p>

<ul>
<li>PodがあるNodeで動いていたんだけど、そのNodeが死んだので、Kubernetesが別のNodeにPodを起動しなおしてくれた。</li>
<li>同じコンテナイメージを3つのPodで動かして、負荷分散させたい。</li>
</ul>

<p>こういう場合、KubernetesはPod毎に固有のIPアドレスを割り当てるので、Podにアクセスするユーザはアクセス先が不安定でめんどいことになる。
この問題を解決してくれるのがServiceで、こいつは、Podを抽象化して、安定したIPアドレスを公開してくれる。
しかもそれはクラスタ外からアクセスできる。</p>

<p>PodとServiceの紐づけには、<a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">ラベルとセレクタ</a>というものが使われる。</p>

<p><br></p>

<p>Serviceの情報はDeploymentとかと同様に<code>kubectl get</code>で見れる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl get svc
NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE
kubernetes   10.0.0.1     &lt;none&gt;        443/TCP   1d
</code></pre>

<p>ここで出ているkubernetesというのは、Minikubeがデフォルトで作るService。</p>

<p><br></p>

<p>Serviceオブジェクトは、<code>kubectl expose</code>で作ることができる。</p>

<p><code>goslings</code>という名のDeploymentに対し、NodePortのServiceを作り、コンテナの8080ポートを公開するコマンドは以下のようになる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl expose deploy/goslings --type=NodePort --port 8080
service &quot;goslings&quot; exposed

C:\Users\kaitoy&gt;kubectl get services
NAME         CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
goslings     10.0.0.69    &lt;nodes&gt;       8080:32406/TCP   11s
kubernetes   10.0.0.1     &lt;none&gt;        443/TCP          1d

C:\Users\kaitoy&gt;kubectl describe services/goslings
Name:                   goslings
Namespace:              default
Labels:                 run=goslings
Annotations:            &lt;none&gt;
Selector:               run=goslings
Type:                   NodePort
IP:                     10.0.0.69
Port:                   &lt;unset&gt; 8080/TCP
NodePort:               &lt;unset&gt; 32406/TCP
Endpoints:              172.17.0.2:8080
Session Affinity:       None
Events:                 &lt;none&gt;
</code></pre>

<p>goslingsという名前のServiceができた。
上記<code>kubectl describe</code>の出力のNodePortのとこに書いてあるのが外部にさらされたポート。</p>

<p><code>minikube ip</code>を実行すると、</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;minikube ip
192.168.99.100
</code></pre>

<p>MinikubeのVMのIPアドレスも分かるので、NodePortのポートと合わせて、<code>http://192.168.99.100:32406</code>にブラウザでアクセスしたら、GoslingsのGUI見れた。
ヒュー。</p>

<p><img src="/images/goslings-on-kubernetes-cont/goslings-service.png" alt="goslings-service" />
</p>

<p><br></p>

<p>ところで、上記<code>kubectl describe</code>の出力を見ると、特に指定はしなかったが、Podに<code>run=goslings</code>というLabelが付いていることが分かる。
Serviceのdescribeを見ると、</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl describe svc goslings
Name:                   goslings
Namespace:              default
Labels:                 run=goslings
Annotations:            &lt;none&gt;
Selector:               run=goslings
Type:                   NodePort
IP:                     10.0.0.69
Port:                   &lt;unset&gt; 8080/TCP
NodePort:               &lt;unset&gt; 32406/TCP
Endpoints:              172.17.0.2:8080
Session Affinity:       None
Events:                 &lt;none&gt;
</code></pre>

<p><code>run=goslings</code>というSelectorがServiceに紐づいている。
つまり、ServiceとPodが、<code>run=goslings</code>で紐づいているというわけだ。</p>

<p><br></p>

<p>Labelはクエリ時のフィルタとかにも使える。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl get po -l run=goslings
NAME                        READY     STATUS    RESTARTS   AGE
goslings-1210510689-6w5tf   1/1       Running   0          1h
</code></pre>

<p>後からラベル付けることもできる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl label pod goslings-1210510689-6w5tf ver=1.2.3
pod &quot;goslings-1210510689-6w5tf&quot; labeled
</code></pre>

<h2 id="kubernetes-basics-モジュール-5-アプリをスケールする">Kubernetes Basics - モジュール 5: アプリをスケールする</h2>

<p>アプリのスケールアウト・スケールインを学ぶモジュール。</p>

<p>Deploymentの定義でPodのレプリカ数を変えると、その数に合わせてKubernetesがPodを起動したり止めたりしてくれてスケールできる仕組み。
レプリカを作っておくとローリングアップデートできるのも利点。
<a href="http://kubernetes.io/docs/user-guide/horizontal-pod-autoscaling/">オートスケール機能</a>もあるけど、それはチュートリアルでは扱われない。</p>

<p>複数のPodで負荷分散するということなので、Serviceでロードバランシングするのが前提。</p>

<p><br></p>

<p>現在のDeploymentの状態をみる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl get deploy
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   1         1         1            1           1h
</code></pre>

<p>Podのレプリカ数は、期待してる(DESIRED)のが1で、今(CURRENT)も1。</p>

<p>スケールアウトするには、<code>kubectl scale</code>コマンドでレプリカ数を増やしてやる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl scale deploy/goslings --replicas=3
deployment &quot;goslings&quot; scaled

C:\Users\kaitoy&gt;kubectl get deploy
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
goslings   3         3         3            3           1h

C:\Users\kaitoy&gt;kubectl get po -o wide
NAME                       READY     STATUS    RESTARTS   AGE       IP           NODE
goslings-442066424-jn1lw   1/1       Running   0          1h        172.17.0.2   minikube
goslings-442066424-rdw4k   1/1       Running   0          1m        172.17.0.3   minikube
goslings-442066424-rwwjw   1/1       Running   0          1m        172.17.0.4   minikube
</code></pre>

<p>レプリカが3個になった。</p>

<p>スケールインするには、<code>kubectl scale</code>コマンドでレプリカ数を減らす。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl scale deploy/goslings --replicas=2
deployment &quot;goslings&quot; scaled

C:\Users\kaitoy&gt;kubectl get po
NAME                       READY     STATUS        RESTARTS   AGE
goslings-442066424-0mv4x   1/1       Terminating   0          1m
goslings-442066424-34h1f   1/1       Running       0          1m
goslings-442066424-kmn3p   1/1       Running       0          17m

C:\Users\kaitoy&gt;kubectl get po
NAME                       READY     STATUS    RESTARTS   AGE
goslings-442066424-34h1f   1/1       Running   0          1m
goslings-442066424-kmn3p   1/1       Running   0          17m
</code></pre>

<p><code>kubectl scale</code>直後の<code>kubectl get po</code>では、一つのPodを停止している最中の様子が見えていて、再度の<code>kubectl get po</code>ではレプリカが2個になったのが確認できた。</p>

<p>この状態がKubernetes Basicsで作るクラスタの最終形で、図にすると以下の感じ。</p>

<p><img src="/images/goslings-on-kubernetes-cont/objects.png" alt="objects" />
</p>

<h2 id="kubernetes-basics-モジュール-6-アプリをアップデートする">Kubernetes Basics - モジュール 6: アプリをアップデートする</h2>

<p>デプロイしたアプリのアップデート(i.e. コンテナイメージの変更)を学ぶモジュール。</p>

<p>Deploymentの定義をいじってコンテナイメージを変えてやると、その中のPodを新しいイメージで順次(デフォルトだと一つ一つ)起動しなおしてくれる。</p>

<p>アプリのアップデートはバージョン管理もされて、ロールバックもできる。</p>

<p><br></p>

<p>コンテナイメージを変更するには、<code>kubectl set image</code>コマンドを使う。
<code>goslings</code>という名のDeployment内の、<code>goslings</code>という名のContainerのイメージを<code>kaitoy/goslings:hoge</code>に変更するコマンドは以下。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl set image deploy/goslings goslings=kaitoy/goslings:hoge
deployment &quot;goslings&quot; image updated
</code></pre>

<p>実際には<code>kaitoy/goslings:hoge</code>というイメージはないので、イメージのPullに失敗したというエラー(ErrImagePull)になる。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl get po
NAME                       READY     STATUS         RESTARTS   AGE
goslings-274047280-jxmmh   0/1       ErrImagePull   0          9s
goslings-274047280-rgg2v   0/1       ErrImagePull   0          8s
goslings-442066424-34h1f   1/1       Terminating    0          1h
goslings-442066424-kmn3p   1/1       Running        0          1h
</code></pre>

<p><br></p>

<p>イメージ変更前に戻すには、<code>kubectl rollout undo</code>する。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;kubectl rollout undo deploy/goslings
deployment &quot;goslings&quot; rolled back

C:\Users\kaitoy&gt;kubectl rollout status deploy/goslings
deployment &quot;goslings&quot; successfully rolled out

C:\Users\kaitoy&gt;kubectl get po
NAME                       READY     STATUS    RESTARTS   AGE
goslings-442066424-kmn3p   1/1       Running   0          1h
goslings-442066424-m3873   1/1       Running   0          5s
</code></pre>

<p>無事に戻った。</p>

<h2 id="番外編1-3つのオブジェクト管理手法">番外編1 - 3つのオブジェクト管理手法</h2>

<p>Kubernetesオブジェクトを管理する手法は<a href="https://kubernetes.io/docs/tutorials/object-management-kubectl/object-management/">大きく3つある</a>。</p>

<table>
<thead>
<tr>
<th>管理手法</th>
<th>いじる対象</th>
<th>難易度</th>
</tr>
</thead>

<tbody>
<tr>
<td>命令的コマンド</td>
<td>生のオブジェクト</td>
<td>簡単</td>
</tr>

<tr>
<td>命令的オブジェクト設定</td>
<td>個々のファイル</td>
<td>普通</td>
</tr>

<tr>
<td>宣言的オブジェクト設定</td>
<td>ディレクトリに入ったファイル群</td>
<td>難しい</td>
</tr>
</tbody>
</table>

<p><br></p>

<p>Kubernetes Basicsでやってた手法は一番上の命令的コマンド。
これは簡単で分かりやすい。
けど、何度も同じようなデプロイするならコマンドを毎回打つのが面倒だし、作成されるオブジェクトは明示的じゃないし、変更管理もできない。
この手法は主に開発中に使う。</p>

<p><br></p>

<p>二つ目の手法の命令的オブジェクト設定では、YAML(かJSON)ファイルにオブジェクト定義を書いておいて、kubectlに渡す。
この手法だと、定義ファイルをオブジェクトのテンプレートとして使えるし、Gitとかのリポジトリに入れることでバージョン管理・変更管理できる。
けど、Kubernetesのオブジェクトモデルを理解しないと使えない。
(オブジェクト定義の詳細は<a href="https://kubernetes.io/docs/api-reference/v1.8/">APIリファレンス</a>を参照。)</p>

<p>命令的オブジェクト設定は以下のような形でやる。</p>

<pre><code class="language-sh">$ kubectl create -f nginx.yaml
$ kubectl delete -f nginx.yaml -f redis.yaml
$ kubectl replace -f nginx.yaml
</code></pre>

<p><br></p>

<p>三つ目の手法の宣言的オブジェクト設定では、設定フォルダに定義ファイル群を置く。
ユーザは明示的にcreateとかupdateとか指示する必要が無く、kubectlが勝手に判断してくれる。
生のオブジェクトを直接いじった後、同じオブジェクトの設定を設定ファイルで変更しても、
両者の変更が上手くマージされる。</p>

<p>なんかすごいけど、上手くいかなかったときのデバッグがむずい。</p>

<p>宣言的オブジェクト設定は以下のような形でやる。</p>

<pre><code class="language-sh">$ kubectl apply -R -f configs/
</code></pre>

<h2 id="番外編2-命令的オブジェクト設定">番外編2 - 命令的オブジェクト設定</h2>

<p>3つの手法の内、命令的オブジェクト設定でGoslingsをMinikubeにデプロイしてみる。</p>

<p>まず、Kubernetes Basicsで作ったオブジェクトを消すため、MinikubeのVMを作り直す。</p>

<pre><code class="language-cmd">C:\Users\kaitoy&gt;minikube stop
Stopping local Kubernetes cluster...
Machine stopped.

C:\Users\kaitoy&gt;minikube delete
Deleting local Kubernetes cluster...
Machine deleted.

C:\Users\kaitoy&gt;minikube start --vm-driver virtualbox --kubernetes-version v1.7.0
Starting local Kubernetes v1.7.0 cluster...
Starting VM...
Getting VM IP address...
Moving files into cluster...
Setting up certs...
Connecting to cluster...
Setting up kubeconfig...
Starting cluster components...
Kubectl is now configured to use the cluster.
</code></pre>

<p><br></p>

<p>次に定義ファイルを書いていく。</p>

<p><a href="https://v1-7.docs.kubernetes.io/docs/api-reference/v1.7/#deployment-v1beta1-apps">APIリファレンスのDeploymentのとこ</a>をみると、Kubernetes Basicsの最終形と同じようなDeploymentを作る定義は以下のように書ける。</p>

<pre><code class="language-yaml">apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: goslings-sample
spec:
  replicas: 2
  template:
    metadata:
      labels:
        app: goslings
        ver: latest
    spec:
      containers:
        - name: goslings
          image: kaitoy/goslings:latest
          ports:
            - name: http
              containerPort: 8080
          args:
            - '8080'
            - /tmp
            - https://github.com/kaitoy/
</code></pre>

<p>同様に、Serviceは、<a href="https://v1-7.docs.kubernetes.io/docs/api-reference/v1.7/#service-v1-core">APIリファレンスのServiceのとこ</a>みると以下のように書ける。</p>

<pre><code class="language-yaml">kind: Service
apiVersion: v1
metadata:
  name: goslings-sample
spec:
  ports:
    - name: http
      port: 8080
      targetPort: 8080
  selector:
    app: goslings
  type: NodePort
</code></pre>

<p><br></p>

<p>で、それぞれのYAMLファイルを<code>kubectl create</code>に渡してやると、Goslingsデプロイ完了。</p>

<pre><code class="language-cmd">C:\Users\kaitoy\kubeTest&gt;kubectl create -f deploy_goslings.yml
deployment &quot;goslings-sample&quot; created

C:\Users\kaitoy\kubeTest&gt;kubectl create -f service_goslings.yml
service &quot;goslings-sample&quot; created
</code></pre>

<p><br></p>

<p>オブジェクトの種類もパラメータも大量にあるので、使いこなすのは難しそう。</p>

      </div>

      <div class="text-center custom-partial">
        
      </div>

      <aside>
        
        

        
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6244473643910448"
             data-ad-slot="1845600530"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </aside>

      <aside>
        <div class="row">
          <div class="col-sm-5">
            <section id="share">
              <h3>Share</h3>
              <a id="share-fb" href="http://www.facebook.com/sharer.php?src=bm&u=https%3a%2f%2fwww.kaitoy.xyz%2f2017%2f10%2f11%2fgoslings-on-kubernetes-cont%2f&t=Kubernetes%e3%81%ae%e3%83%81%e3%83%a5%e3%83%bc%e3%83%88%e3%83%aa%e3%82%a2%e3%83%ab%e3%82%92%e3%82%84%e3%82%8b" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><img src="https://www.kaitoy.xyz/images/sharebutton/facebook.png" alt="Facebook"/></a>
              <a id="share-twitter" href="http://twitter.com/intent/tweet?url=https%3a%2f%2fwww.kaitoy.xyz%2f2017%2f10%2f11%2fgoslings-on-kubernetes-cont%2f&text=Kubernetes%e3%81%ae%e3%83%81%e3%83%a5%e3%83%bc%e3%83%88%e3%83%aa%e3%82%a2%e3%83%ab%e3%82%92%e3%82%84%e3%82%8b&tw_p=tweetbutton" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><img src="https://www.kaitoy.xyz/images/sharebutton/twitter.png" alt="Twitter"/></a>
              <a id="share-googleplus" href="https://plus.google.com/share?url=https%3a%2f%2fwww.kaitoy.xyz%2f2017%2f10%2f11%2fgoslings-on-kubernetes-cont%2f" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><img src="https://www.kaitoy.xyz/images/sharebutton/googleplus.png" alt="Google+"/></a>
              <a id="share-hatena" href="http://b.hatena.ne.jp/add?mode=confirm&url=https%3a%2f%2fwww.kaitoy.xyz%2f2017%2f10%2f11%2fgoslings-on-kubernetes-cont%2f" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><img src="https://www.kaitoy.xyz/images/sharebutton/hatena.png" alt="Hatena"/></a>
              <a id="share-pocket" href="http://getpocket.com/edit?url=https%3a%2f%2fwww.kaitoy.xyz%2f2017%2f10%2f11%2fgoslings-on-kubernetes-cont%2f&title=Kubernetes%e3%81%ae%e3%83%81%e3%83%a5%e3%83%bc%e3%83%88%e3%83%aa%e3%82%a2%e3%83%ab%e3%82%92%e3%82%84%e3%82%8b" onclick="window.open(this.href, 'PCwindow', 'width=550, height=350, menubar=no, toolbar=no, scrollbars=yes'); return false;"><img src="https://www.kaitoy.xyz/images/sharebutton/pocket.png" alt="Pocket"/></a>
            </section>
          </div>

          <div class="col-sm-7">
            
            

            
            <section id="related">
              <h3>Related Post</h3>
              <div id="tags">
                
                <a href="https://www.kaitoy.xyz/tags/goslings"><i class="fa fa-tags"></i> goslings </a>
                
                <a href="https://www.kaitoy.xyz/tags/kubernetes"><i class="fa fa-tags"></i> kubernetes </a>
                
                <a href="https://www.kaitoy.xyz/tags/minikube"><i class="fa fa-tags"></i> minikube </a>
                
                <a href="https://www.kaitoy.xyz/tags/docker"><i class="fa fa-tags"></i> docker </a>
                
              </div>

              <ul id="related-posts">
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2018/04/01/hello-skaffold/">Skaffoldを触ってみた</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/10/31/retry-dashboard-on-k8s-cluster-by-kubeadm/">Kubernetes 1.8のアクセス制御について。あとDashboard。</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/">Kubernetes1.8のクラスタを構築する。kubeadmで。</a></li>
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/">Kubernetes 1.8が出たので、Minikubeを触ってみる</a></li>
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/08/14/webdriverio-chrome/">WebdriverIOとChromeのヘッドレスモードで自動ブラウザテストするDockerイメージ: webdriverio-chrome</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/03/05/firedrop-private-beta/">Firedrop(プライベートベータ)が全く期待外れだった件</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/01/24/goslings-development-memo5-spring-boot-static-resources/">Goslings開発メモ - その5: Spring Boot最終編 (静的リソース処理)</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/01/17/goslings-development-memo4-spring-boot-logging/">Goslings開発メモ - その4: Spring Boot続続続編 (ロギング)</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/01/13/goslings-development-memo3-spring-boot-exception/">Goslings開発メモ - その3: Spring Boot続続編 (例外処理)</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/01/10/goslings-development-memo2-spring-boot-di/">Goslings開発メモ - その2: Spring Boot続編 (DI)</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2017/01/03/goslings-development-memo1-spring-boot/">Goslings開発メモ - その1: Spring Boot編</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2016/12/11/goslings-development-memo0-intro-design/">Goslings開発メモ - その0: 紹介と概要と設計編</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2016/09/15/pcap4j-on-hyper-v-container-on-win10/">Pcap4J on Nano Server on Hyper-V Containers on Windows 10 on VMware Playerにトライ</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2016/09/12/unzip-on-nanoserver/">Hyper-Vコンテナ(Nano Server)でunzipしたいならjarを使え</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2016/07/31/docker-for-windows/">Docker for Windowsがコレジャナかった</a></li>
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2016/07/11/windows_containers_on_tp5/">Windows Server 2016 TP5でWindows Containersにリトライ</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2016/01/22/pcap4j-meets-windows-containers/">Pcap4J Meets Windows Containers</a></li>
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2015/07/27/another-way-to-capture-lan-packets-with-pcap4j-container/">Another way to capture LAN packets with pcap4j container</a></li>
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2015/07/25/how-to-capture-packets-on-a-local-network-with-pcap4j-container/">How to capture packets on a local network with Pcap4J container</a></li>
                
                
                
                
                
                
                
                
                
                <li><a href="https://www.kaitoy.xyz/2015/07/19/pcap4j-container-with-runc/">Pcap4J container with runC</a></li>
                
                
                
                
                
                
              </ul>
            </section>
            
          </div>
        </div>
      </aside>

      
      <footer>
        <section id="pagination">
          <div class="row">
            <div class="col-sm-6">
              <div class="prev">
                
                <a href="https://www.kaitoy.xyz/2017/10/21/build-kubernetes-cluster-by-kubeadm/">
                  <i class="fa fa-chevron-left"></i>
                  Kubernetes1.8のクラスタを構築する。kubeadmで。
                </a>
                
              </div>
            </div>
            <div class="col-sm-6">
              <div class="next text-right">
                
                <a href="https://www.kaitoy.xyz/2017/10/10/goslings-on-kubernetes/">
                  Kubernetes 1.8が出たので、Minikubeを触ってみる
                  <i class="fa fa-chevron-right"></i>
                </a>
                
              </div>
            </div>
          </div>
        </section>

        
        <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'kaitoy-tobedecided';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </footer>

    </article>
  </div>

  <div class="col-md-3">
    <aside id="site-sidebar">
      <div class="row">
        <div class="col-md-12 col-sm-6 col-xs-12">
  <div class="text-center custom-partial">
    
  </div>
  <section class="sidebar-bordered">
    
    <div id="profile">
      <div class="text-center">
        <img id="profile-photo" src="/images/nopicture.png" alt="profile">
      </div>
      <div class="data">
        <h4 id="profile-username" class="post-title"></h4>
        
        <span id="profile-birth">DOB: Dec 14, 1983</span>
        
        <div id="social-links">
          
          <a href="https://www.facebook.com/yamada.kaito.90" target="_blank"><i class="fa fa-facebook-square"></i></a>
          
          
          
          <a href="https://github.com/Kaitoy" target="_blank"><i class="fa fa-github-square"></i></a>
          
        </div>
        <div id="profile-description"></div>
        <ul id="profile-urls" class="post-tags"></ul>
      </div>
    </div>
    
  </section>
</div>

<div class="col-md-12 col-sm-6 col-xs-12">
  <section>
    <h3>Tags</h3>
    
    <div id="tag-cloud" class="text-center">
      
      
      
      <a href="https://www.kaitoy.xyz/tags/atom">atom</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/aws">aws</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/aws-ecs">aws-ecs</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/blog">blog</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/bow">bow</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/cdn">cdn</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/ci">ci</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/cnn">cnn</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/coursera">coursera</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/deep-learning">deep-learning</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/disturb-me">disturb-me</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/docker">docker</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/elasticsearch">elasticsearch</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/filebeat">filebeat</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/firedrop">firedrop</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/git">git</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/github">github</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/goslings">goslings</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/groovy">groovy</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/headless-browser">headless-browser</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/hibernate">hibernate</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/hugo">hugo</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/impress.js">impress.js</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/japanese-word-selection">japanese-word-selection</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/javascript">javascript</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/jekyll">jekyll</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/jgit">jgit</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/jvm-language">jvm-language</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/keras">keras</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/kotlin">kotlin</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/kubeadm">kubeadm</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/kubernetes">kubernetes</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/license">license</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/logstash">logstash</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/machine-learning">machine-learning</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/management">management</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/minikube">minikube</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/nanoserver">nanoserver</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/neural-network">neural-network</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/nlp">nlp</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/oop">oop</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/orm">orm</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/pcap4j">pcap4j</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/react">react</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/rnn">rnn</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/runc">runc</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/selenium">selenium</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/seo">seo</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/servicenow">servicenow</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/skaffold">skaffold</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/spring">spring</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/spring-boot">spring-boot</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/subversion">subversion</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/tensorflow">tensorflow</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/test-framework">test-framework</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/vcs">vcs</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/webdriverio">webdriverio</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/windows">windows</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/yegor256">yegor256</a>
      
      
      <a href="https://www.kaitoy.xyz/tags/zundoko">zundoko</a>
      
    </div>
    
  </section>
</div>





<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
    style="display:block"
    data-ad-client="ca-pub-6244473643910448"
    data-ad-slot="1845600530"
    data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

<div class="col-md-12 col-sm-6 col-xs-12">
  <div class="text-center custom-partial">
    
  </div>
</div>

      </div>
    </aside>
  </div>
</div>

        <div class="text-center custom-partial">
          
        </div>
      </div>
    </main>

    <footer id="site-footer" class="text-center font-logo">
      <p>&copy;  2015 -  2018  Kaito Yamada </p>
      <p>Powered by <a href="http://gohugo.io" target="_blank">Hugo</a></p>
      <p>
        Theme: <a target="_blank" href="https://github.com/dim0627/hugo_theme_robust">Robust</a>
        designed by <a target="_blank" href="http://yet.unresolved.xyz">Daisuke Tsuji</a>
      </p>
    </footer>

    <script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://www.kaitoy.xyz/js/jquery.bxslider.min.js"></script>
    
    <script>
      $(document).ready(function(){
        $('.bxslider').bxSlider({
          speed: 1,
          preloadImages: 'all'
        });
      });
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="https://www.kaitoy.xyz/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65248565-1', 'auto');
    ga('send', 'pageview');

    </script>

    <script>
    $(function() {
      var url = "https://ja.gravatar.com/5fbe47b2a4b3637dd26dfc9a49381895.json?callback=?";
      $.getJSON(url)
        .done(function(data) {
          var entry = data.entry[0];
          $("#profile-photo").attr("src", entry.photos[0].value);
          $("#profile-username").html(entry.name.familyName + " " + entry.name.givenName);
          $("#profile-description").html(entry.aboutMe);
          entry.urls.forEach(function(el){
            $("#profile-urls").append($("<li><a href='" + el.value + "'>" + el.title + "</a></li>"));
          });
          $("#profile").show();
        });
    });
    </script>
  </body>
</html>

